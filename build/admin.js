(()=>{"use strict";const e=window.React,t=window.wp.element,a=window.wp.i18n,n=window.wp.components,l=()=>`ls-${Math.random().toString(36).slice(2,8)}${Date.now().toString(36).slice(-4)}`,s=()=>{const e=Boolean(window?.chrome&&window.chrome.runtime);return{userAgent:"undefined"==typeof navigator?"":navigator.userAgent||"",hasChromeRuntime:e,suggestion:"Test in private browsing to isolate extensions."}},r=({debugEnabled:e=!1,prefix:t="[LeanStats]"}={})=>{const a=()=>"function"==typeof e?e():e,n=(e,n,l,s=!1)=>{(s||a())&&((e,a,n)=>{const l=`${t} ${a}`;console&&console.groupCollapsed?(console.groupCollapsed(l),console[e](n),console.groupEnd()):console[e](l,n)})(e,n,{time:"undefined"!=typeof performance&&performance.now?Number(performance.now().toFixed(2)):Date.now(),page:"undefined"!=typeof window&&window.location&&window.location.pathname||"",...l})};return{debug:(e,t={})=>n("debug",e,t),info:(e,t={})=>n("info",e,t),warn:(e,t={})=>n("warn",e,t),error:(e,l={})=>{a()?n("error",e,l,!0):console&&console.error&&console.error(`${t} ${e}`)},isDebugEnabled:()=>e}};class i extends t.Component{state={error:null};static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e,t){const{onError:a}=this.props;a&&a(e,t)}render(){const{error:t}=this.state,{fatal:l,checkedHandles:s=[],checkedGlobals:r=[],children:i}=this.props,o=l||t;if(o){const t=(o?.checkedHandles||s).filter(Boolean),l=(o?.checkedGlobals||r).filter(Boolean),i=o?.reason||o?.message||("string"==typeof o?o:"");return(0,e.createElement)(n.Notice,{status:"error",isDismissible:!1},(0,e.createElement)("p",null,(0,a.__)("Lean Stats cannot load the admin interface.","lean-stats")),i&&(0,e.createElement)("p",null,i),t.length>0&&(0,e.createElement)("p",null,(0,a.sprintf)((0,a.__)("Script handles checked: %s","lean-stats"),t.join(", "))),l.length>0&&(0,e.createElement)("p",null,(0,a.sprintf)((0,a.__)("Global namespaces checked: %s","lean-stats"),l.join(", "))))}return i}}const o=i,c=({height:a,ariaLabel:n,children:l,onResize:s})=>{const{ref:r,size:i,hasSize:o}=(()=>{const e=(0,t.useRef)(null),[a,n]=(0,t.useState)({width:0,height:0}),l=a.width>0&&a.height>0;return(0,t.useEffect)(()=>{const t=e.current;if(!t)return;const a=()=>{const e=t.getBoundingClientRect(),a={width:Math.round(e.width),height:Math.round(e.height)};n(e=>e.width===a.width&&e.height===a.height?e:a)};let l;return a(),window.ResizeObserver?(l=new ResizeObserver(()=>a()),l.observe(t)):window.addEventListener("resize",a),()=>{l?l.disconnect():window.removeEventListener("resize",a)}},[]),{ref:e,size:a,hasSize:l}})();return(0,t.useEffect)(()=>{o&&s&&s(i)},[o,s,i]),(0,e.createElement)("div",{ref:r,className:"ls-chart-frame","data-height":a,role:"img","aria-label":n},o?l:null)},d=["ls-skeleton__bar--w80","ls-skeleton__bar--w74","ls-skeleton__bar--w68","ls-skeleton__bar--w62","ls-skeleton__bar--w56","ls-skeleton__bar--w50"],m=({isLoading:t,error:l,isEmpty:s,emptyLabel:r,loadingLabel:i=(0,a.__)("Loading…","lean-stats"),skeletonRows:o=4})=>{if(t){const t=Array.from({length:o},(e,t)=>t);return(0,e.createElement)("div",{className:"ls-data-state","aria-live":"polite","aria-busy":"true"},(0,e.createElement)("div",{className:"ls-data-state__header"},(0,e.createElement)(n.Spinner,null),(0,e.createElement)("span",null,i)),(0,e.createElement)("div",{className:"ls-skeleton"},t.map(t=>(0,e.createElement)("div",{key:t,className:`ls-skeleton__bar ${d[Math.min(t,d.length-1)]}`}))))}return l?(0,e.createElement)(n.Notice,{status:"error",isDismissible:!1},l):s?(0,e.createElement)("p",{role:"status"},r):null},_=({title:t,children:a,...l})=>(0,e.createElement)(n.Card,{...l},t?(0,e.createElement)(n.CardHeader,null,(0,e.createElement)("strong",null,t)):null,(0,e.createElement)(n.CardBody,null,a)),u=window.LeanStatsAdmin||null,g=()=>{var e;return Boolean(null!==(e=window.LEAN_STATS_DEBUG)&&void 0!==e?e:u?.settings?.debugEnabled)},p=[{name:"dashboard",title:(0,a.__)("Dashboard","lean-stats")},{name:"top-pages",title:(0,a.__)("Top pages","lean-stats")},{name:"referrers",title:(0,a.__)("Referring sites","lean-stats")},{name:"search-terms",title:(0,a.__)("Internal searches","lean-stats")},{name:"geolocation",title:(0,a.__)("Geolocation","lean-stats")},{name:"settings",title:(0,a.__)("Settings","lean-stats")}],b={plugin_label:"",respect_dnt_gpc:!0,url_strip_query:!0,url_query_allowlist:[],raw_logs_enabled:!1,raw_logs_retention_days:1,excluded_roles:[],excluded_paths:[],debug_enabled:!1,maxmind_account_id:"",maxmind_license_key:""},E=["7d","30d","90d"],h=()=>`lean_stats_range_preset:${u?.currentUserId?String(u.currentUserId):"default"}`,y=e=>E.includes(e)?e:null,v=()=>{const e=(()=>{if("undefined"==typeof window)return null;const e=new URLSearchParams(window.location.search);return y(e.get("period")||e.get("range"))})(),[a,n]=(0,t.useState)(()=>e||(()=>{if("undefined"==typeof window||!window.localStorage)return null;try{return y(window.localStorage.getItem(h()))}catch(e){return null}})()||"30d"),[l,s]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{e&&!l||y(a)&&(e=>{if("undefined"!=typeof window&&window.localStorage)try{window.localStorage.setItem(h(),e)}catch(e){}})(a)},[a,e,l]),[a,e=>{n(e),s(!0)}]},w=e=>`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`,f=e=>{const t=new Date,a=new Date(t.getFullYear(),t.getMonth(),t.getDate()),n=new Date(a);switch(e){case"7d":n.setDate(n.getDate()-6);break;case"30d":default:n.setDate(n.getDate()-29);break;case"90d":n.setDate(n.getDate()-89)}return{start:w(n),end:w(a)}},x=(e,t,a)=>{const n=u?.restUrl?`${u.restUrl}`:"",l=new URL(`${null!=a?a:u?.settings?.restInternalNamespace||""}${e}`,n);return t&&Object.entries(t).forEach(([e,t])=>{null!=t&&""!==t&&l.searchParams.set(e,t)}),l.toString()},N=(e,n,s={})=>{const[i,o]=(0,t.useState)(null),[c,d]=(0,t.useState)(!0),[m,_]=(0,t.useState)(null),p=(0,t.useMemo)(()=>JSON.stringify(null!=n?n:{}),[n]),b=(0,t.useMemo)(()=>r({debugEnabled:g}),[]),{enabled:E=!0,namespace:h=u?.settings?.restInternalNamespace}=s;return(0,t.useEffect)(()=>{if(!E||!e)return d(!1),_(null),void o(null);let t=!0;const s=new AbortController,r=l();return(async()=>{if(!u?.restNonce||!u?.restUrl)return _((0,a.__)("Missing REST configuration.","lean-stats")),void d(!1);d(!0),_(null),b.debug("Loading admin data",{action:"admin.fetch",traceId:r,path:e,params:n});try{const l=await fetch(x(e,n,h),{signal:s.signal,headers:{"X-WP-Nonce":u.restNonce}});if(!l.ok)throw new Error((0,a.sprintf)((0,a.__)("API error (%s)","lean-stats"),l.status));const i=await l.json();t&&o(i),b.debug("Admin data received",{action:"admin.fetch.success",traceId:r,path:e})}catch(n){t&&"AbortError"!==n.name?(_(n.message||(0,a.__)("Loading error.","lean-stats")),b.error("Admin load error",{action:"admin.fetch.error",traceId:r,path:e,error:n?.message})):"AbortError"===n.name&&b.debug("Admin load cancelled",{action:"admin.fetch.abort",traceId:r,path:e})}finally{t&&d(!1)}})(),()=>{t=!1,s.abort()}},[e,p,E]),{data:i,isLoading:c,error:m}},k=e=>{const t={...b,...e||{}},a=Boolean(t.debug_enabled||t.raw_logs_enabled);return{...t,debug_enabled:a,raw_logs_enabled:a}},S=({debugEnabled:t})=>{const{data:l,isLoading:s,error:r}=N("/admin/raw-logs",{limit:50},{enabled:t}),i=l?.items||[];return t?(0,e.createElement)("div",{className:"ls-settings-logs"},(0,e.createElement)(m,{isLoading:s,error:r,isEmpty:!s&&!r&&0===i.length,emptyLabel:(0,a.__)("No raw logs available.","lean-stats"),loadingLabel:(0,a.__)("Loading raw logs…","lean-stats"),skeletonRows:4}),!s&&!r&&i.length>0&&(0,e.createElement)("table",{className:"widefat striped ls-settings-logs__table"},(0,e.createElement)("thead",null,(0,e.createElement)("tr",null,(0,e.createElement)("th",null,(0,a.__)("Date","lean-stats")),(0,e.createElement)("th",null,(0,a.__)("Page","lean-stats")),(0,e.createElement)("th",null,(0,a.__)("Referrer","lean-stats")),(0,e.createElement)("th",null,(0,a.__)("Device","lean-stats")))),(0,e.createElement)("tbody",null,i.map((t,n)=>{return(0,e.createElement)("tr",{key:`${t.timestamp_bucket}-${n}`},(0,e.createElement)("td",null,(l=t.timestamp_bucket)?new Date(1e3*l).toLocaleString():""),(0,e.createElement)("td",null,t.page_path),(0,e.createElement)("td",null,t.referrer_domain||(0,a.__)("Direct","lean-stats")),(0,e.createElement)("td",null,t.device_class||"-"));var l})))):(0,e.createElement)(n.Notice,{status:"warning",isDismissible:!1},(0,a.__)("Enable debug mode to display raw logs.","lean-stats"))},L=()=>{const{data:t,isLoading:l,error:s}=N("/admin/geolocation"),r=t?.location||null,i=r&&!r.error,o=(0,a.__)("MaxMind API","lean-stats");return(0,e.createElement)(_,{title:(0,a.__)("Geolocation","lean-stats")},(0,e.createElement)(m,{isLoading:l,error:s,isEmpty:!l&&!s&&!i,emptyLabel:(0,a.__)("No geolocation data available.","lean-stats"),loadingLabel:(0,a.__)("Looking up location…","lean-stats"),skeletonRows:4}),!l&&!s&&r?.error&&(0,e.createElement)(n.Notice,{status:"warning",isDismissible:!1},r.error),!l&&!s&&i&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("p",null,(0,a.__)("Location is derived from the current request IP and is not stored.","lean-stats")),(0,e.createElement)("table",{className:"widefat striped"},(0,e.createElement)("tbody",null,(0,e.createElement)("tr",null,(0,e.createElement)("th",null,(0,a.__)("IP address","lean-stats")),(0,e.createElement)("td",null,r.ip)),(0,e.createElement)("tr",null,(0,e.createElement)("th",null,(0,a.__)("Country","lean-stats")),(0,e.createElement)("td",null,r.country||(0,a.__)("Unavailable","lean-stats"))),(0,e.createElement)("tr",null,(0,e.createElement)("th",null,(0,a.__)("Region","lean-stats")),(0,e.createElement)("td",null,r.region||(0,a.__)("Unavailable","lean-stats"))),(0,e.createElement)("tr",null,(0,e.createElement)("th",null,(0,a.__)("City","lean-stats")),(0,e.createElement)("td",null,r.city||(0,a.__)("Unavailable","lean-stats"))),(0,e.createElement)("tr",null,(0,e.createElement)("th",null,(0,a.__)("Source","lean-stats")),(0,e.createElement)("td",null,o))))))},C=({value:t,onChange:l})=>(0,e.createElement)(n.Card,{className:"ls-overview__summary-card ls-overview__summary-card--filter"},(0,e.createElement)(n.CardBody,null,(0,e.createElement)(n.SelectControl,{label:(0,a.__)("Period","lean-stats"),value:t,options:[{label:(0,a.__)("7 days","lean-stats"),value:"7d"},{label:(0,a.__)("30 days","lean-stats"),value:"30d"},{label:(0,a.__)("90 days","lean-stats"),value:"90d"}],onChange:l,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}))),M=()=>{const{data:s,isLoading:i,error:o}=N("/admin/settings"),[c,d]=(0,t.useState)(b),[p,E]=(0,t.useState)(""),[h,y]=(0,t.useState)(""),[v,w]=(0,t.useState)(!1),[f,L]=(0,t.useState)(null),[C,M]=(0,t.useState)({}),[D,$]=(0,t.useState)(!1),[B,P]=(0,t.useState)(!1),[I,T]=(0,t.useState)(null),R=(0,t.useMemo)(()=>r({debugEnabled:g}),[]),A=Boolean(c.debug_enabled);(0,t.useEffect)(()=>{if(s?.settings){const e=k(s.settings);d(e),E(e.url_query_allowlist.join(", ")),y(e.excluded_paths.join("\n")),window.LEAN_STATS_DEBUG=Boolean(e.debug_enabled),M({})}},[s]);const F=async()=>{if(!u?.restNonce||!u?.restUrl)return void L({status:"error",message:(0,a.__)("Missing REST configuration.","lean-stats")});const e=(e=>{const t={},n=String(e.maxmind_account_id||"").trim(),l=String(e.maxmind_license_key||"").trim();return n?/^\d+$/.test(n)||(t.maxmind_account_id=(0,a.__)("MaxMind Account ID must be numeric.","lean-stats")):t.maxmind_account_id=(0,a.__)("MaxMind Account ID is required.","lean-stats"),l||(t.maxmind_license_key=(0,a.__)("MaxMind License Key is required.","lean-stats")),t})(c);if(Object.keys(e).length>0)return M(e),void L({status:"error",message:Object.values(e).join(" ")});w(!0),L(null);const t=l();R.info("Saving settings",{action:"settings.save",traceId:t});try{const e=await fetch(x("/admin/settings"),{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":u.restNonce},body:JSON.stringify(c)}),n=await e.json().catch(()=>null);if(!e.ok)throw n?.data?.field_errors&&M(n.data.field_errors),new Error(n?.message||(0,a.sprintf)((0,a.__)("API error (%s)","lean-stats"),e.status));if(n?.settings){const e=k(n.settings);d(e),E(e.url_query_allowlist.join(", ")),y(e.excluded_paths.join("\n")),window.LEAN_STATS_DEBUG=Boolean(e.debug_enabled),M({})}L({status:"success",message:(0,a.__)("Settings saved.","lean-stats")}),R.info("Settings saved",{action:"settings.save.success",traceId:t})}catch(e){L({status:"error",message:e.message||(0,a.__)("Error while saving.","lean-stats")}),R.error("Settings save error",{action:"settings.save.error",traceId:t,error:e?.message})}finally{w(!1)}},U=async()=>{if(!u?.restNonce||!u?.restUrl)return void T({status:"error",message:(0,a.__)("Missing REST configuration.","lean-stats")});P(!0),T(null);const e=l();R.info("Purging analytics data",{action:"settings.purge",traceId:e});try{const t=await fetch(x("/admin/purge-data"),{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":u.restNonce}});if(!t.ok)throw new Error((0,a.sprintf)((0,a.__)("API error (%s)","lean-stats"),t.status));await t.json(),T({status:"success",message:(0,a.__)("Analytics data purged.","lean-stats")}),R.info("Analytics data purged",{action:"settings.purge.success",traceId:e})}catch(t){T({status:"error",message:t.message||(0,a.__)("Error while purging.","lean-stats")}),R.error("Purge error",{action:"settings.purge.error",traceId:e,error:t?.message})}finally{P(!1),$(!1)}},H=u?.roles||[],j=[{name:"general",title:(0,a.__)("General","lean-stats")},...A?[{name:"logs",title:(0,a.__)("Logs","lean-stats")}]:[]];return(0,e.createElement)(_,{title:(0,a.__)("Settings","lean-stats")},(0,e.createElement)(m,{isLoading:i,error:o,isEmpty:!1,emptyLabel:"",loadingLabel:(0,a.__)("Loading settings…","lean-stats"),skeletonRows:6}),!i&&!o&&(0,e.createElement)(n.TabPanel,{tabs:j},t=>"logs"===t.name?(0,e.createElement)(S,{debugEnabled:A}):(0,e.createElement)("div",{className:"ls-settings-form"},f&&(0,e.createElement)(n.Notice,{status:f.status,isDismissible:!1},f.message),I&&(0,e.createElement)(n.Notice,{status:I.status,isDismissible:!1},I.message),(0,e.createElement)(n.Card,{className:"ls-settings-section"},(0,e.createElement)(n.CardBody,null,(0,e.createElement)("h3",{className:"ls-settings-section__title"},(0,a.__)("General","lean-stats")),(0,e.createElement)(n.TextControl,{label:(0,a.__)("Plugin name (menu and dashboard)","lean-stats"),help:(0,a.__)('Leave blank to use "Lean Stats".',"lean-stats"),value:c.plugin_label,onChange:e=>d(t=>({...t,plugin_label:e}))}))),(0,e.createElement)(n.Card,{className:"ls-settings-section"},(0,e.createElement)(n.CardBody,null,(0,e.createElement)("h3",{className:"ls-settings-section__title"},(0,a.__)("Geolocation","lean-stats")),(0,e.createElement)("p",null,(0,a.__)("MaxMind Account ID and License Key are required to enable IP geolocation.","lean-stats")),(0,e.createElement)(n.TextControl,{label:(0,a.__)("MaxMind Account ID","lean-stats"),type:"text",help:C.maxmind_account_id||(0,a.__)("Numeric Account ID for MaxMind IP geolocation.","lean-stats"),value:c.maxmind_account_id,onChange:e=>{d(t=>({...t,maxmind_account_id:e})),C.maxmind_account_id&&M(e=>({...e,maxmind_account_id:null}))},isInvalid:Boolean(C.maxmind_account_id)}),(0,e.createElement)(n.TextControl,{label:(0,a.__)("MaxMind License Key","lean-stats"),type:"password",help:C.maxmind_license_key||(0,a.__)("License Key for MaxMind IP geolocation.","lean-stats"),value:c.maxmind_license_key,onChange:e=>{d(t=>({...t,maxmind_license_key:e})),C.maxmind_license_key&&M(e=>({...e,maxmind_license_key:null}))},isInvalid:Boolean(C.maxmind_license_key)}))),(0,e.createElement)(n.Card,{className:"ls-settings-section"},(0,e.createElement)(n.CardBody,null,(0,e.createElement)("h3",{className:"ls-settings-section__title"},(0,a.__)("Privacy & consent","lean-stats")),(0,e.createElement)(n.ToggleControl,{label:(0,a.__)("Respect DNT / GPC","lean-stats"),help:(0,a.__)("Ignore tracking if the browser sends DNT or GPC.","lean-stats"),checked:c.respect_dnt_gpc,onChange:e=>d(t=>({...t,respect_dnt_gpc:e}))}),(0,e.createElement)(n.ToggleControl,{label:(0,a.__)("Debug mode","lean-stats"),help:(0,a.__)("Enables detailed console logs and raw log capture.","lean-stats"),checked:c.debug_enabled,onChange:e=>d(t=>({...t,debug_enabled:e,raw_logs_enabled:e}))}),(0,e.createElement)(n.TextControl,{label:(0,a.__)("Retention window (days)","lean-stats"),type:"number",min:1,max:365,value:String(c.raw_logs_retention_days),help:(0,a.__)("Raw logs purge automatically after the configured window.","lean-stats"),onChange:e=>{const t=Number.parseInt(e,10);d(e=>({...e,raw_logs_retention_days:Number.isNaN(t)?e.raw_logs_retention_days:t}))}}))),(0,e.createElement)(n.Card,{className:"ls-settings-section"},(0,e.createElement)(n.CardBody,null,(0,e.createElement)("h3",{className:"ls-settings-section__title"},(0,a.__)("URL cleaning","lean-stats")),(0,e.createElement)(n.ToggleControl,{label:(0,a.__)("Strip query parameters","lean-stats"),help:(0,a.__)("Remove query parameters from tracked URLs.","lean-stats"),checked:c.url_strip_query,onChange:e=>d(t=>({...t,url_strip_query:e}))}),(0,e.createElement)(n.TextControl,{label:(0,a.__)("Query parameter allowlist","lean-stats"),help:(0,a.__)("Comma-separated list of allowed query keys (used for URL tracking and UTM aggregation).","lean-stats"),value:p,onChange:e=>{E(e);const t=e.split(",").map(e=>e.trim()).filter(Boolean);d(e=>({...e,url_query_allowlist:t}))}}))),(0,e.createElement)(n.Card,{className:"ls-settings-section"},(0,e.createElement)(n.CardBody,null,(0,e.createElement)("h3",{className:"ls-settings-section__title"},(0,a.__)("Exclusions","lean-stats")),(0,e.createElement)(n.TextareaControl,{label:(0,a.__)("Excluded paths","lean-stats"),help:(0,a.__)("One per line or comma-separated (e.g., /privacy, /account).","lean-stats"),value:h,onChange:e=>{y(e);const t=e.split(/[\n,]+/).map(e=>e.trim()).filter(Boolean);d(e=>({...e,excluded_paths:t}))}}),(0,e.createElement)("div",null,(0,e.createElement)("p",{className:"ls-settings-roles__title"},(0,a.__)("Role exclusions","lean-stats")),(0,e.createElement)("p",null,(0,a.__)("Select roles to exclude from tracking. Select all roles to ignore all logged-in users.","lean-stats")),(0,e.createElement)("div",{className:"ls-settings-roles__list"},0===H.length&&(0,e.createElement)("p",null,(0,a.__)("No roles available.","lean-stats")),H.map(t=>(0,e.createElement)(n.CheckboxControl,{key:t.key,label:t.label,checked:c.excluded_roles.includes(t.key),onChange:e=>{d(a=>{const n=new Set(a.excluded_roles);return e?n.add(t.key):n.delete(t.key),{...a,excluded_roles:Array.from(n)}})}})))))),(0,e.createElement)(n.Card,{className:"ls-settings-section"},(0,e.createElement)(n.CardBody,null,(0,e.createElement)("h3",{className:"ls-settings-section__title"},(0,a.__)("Data management","lean-stats")),(0,e.createElement)("p",null,(0,a.__)("Remove all aggregated analytics and raw log entries.","lean-stats")),(0,e.createElement)(n.Button,{variant:"secondary",isDestructive:!0,onClick:()=>$(!0)},(0,a.__)("Purge analytics data","lean-stats")))),(0,e.createElement)(n.Button,{variant:"primary",isBusy:v,onClick:F,"aria-label":(0,a.__)("Save settings","lean-stats")},(0,a.__)("Save","lean-stats")),D&&(0,e.createElement)(n.Modal,{title:(0,a.__)("Confirm data purge","lean-stats"),onRequestClose:()=>$(!1)},(0,e.createElement)("p",null,(0,a.__)("This action permanently removes all stored analytics and raw logs. Settings remain unchanged.","lean-stats")),(0,e.createElement)("div",{className:"ls-settings-modal__actions"},(0,e.createElement)(n.Button,{variant:"secondary",onClick:()=>$(!1)},(0,a.__)("Cancel","lean-stats")),(0,e.createElement)(n.Button,{variant:"primary",isDestructive:!0,isBusy:B,onClick:U},(0,a.__)("Purge now","lean-stats")))))))},D=({range:t})=>{var l;const{data:s,isLoading:r,error:i}=N("/overview",t,{namespace:u?.settings?.restNamespace}),o=s?.overview||null,c=s?.comparison?.overview||null,d=!r&&!i&&!o;if(r||i||d)return(0,e.createElement)(n.Card,{className:"ls-overview__summary-card ls-overview__summary-card--status"},(0,e.createElement)(n.CardBody,null,(0,e.createElement)(m,{isLoading:r,error:i,isEmpty:d,emptyLabel:(0,a.__)("No overview data available.","lean-stats"),loadingLabel:(0,a.__)("Loading overview…","lean-stats"),skeletonRows:3})));const _=(0,a.__)("Number of anonymous sessions over the selected period. The same person can generate multiple visits.","lean-stats"),g=(0,a.__)("Anonymous sessions aggregated over the selected period.","lean-stats"),p="undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(max-width: 600px)").matches?g:_,b=[{label:(0,a.__)("Visits","lean-stats"),value:null!==(l=o.visits)&&void 0!==l?l:0,icon:"visibility",tooltip:p,comparisonValue:c?.visits},{label:(0,a.__)("Page views","lean-stats"),value:o.pageViews,icon:"chart-bar",comparisonValue:c?.pageViews},{label:(0,a.__)("Referring sites","lean-stats"),value:o.uniqueReferrers,icon:"admin-links",comparisonValue:c?.uniqueReferrers},{label:(0,a.__)("Pages not found (404)","lean-stats"),value:o.notFoundHits,icon:"warning",comparisonValue:c?.notFoundHits},{label:(0,a.__)("Internal searches","lean-stats"),value:o.searchHits,icon:"search",comparisonValue:c?.searchHits}];return(0,e.createElement)(e.Fragment,null,b.map(t=>(0,e.createElement)(n.Card,{key:t.label,className:"ls-overview__summary-card"},(0,e.createElement)(n.CardBody,{className:"ls-kpi-card__body"},(0,e.createElement)("span",{className:`dashicons dashicons-${t.icon} ls-kpi-card__icon`,"aria-hidden":"true"}),(0,e.createElement)("div",{className:"ls-kpi-card__content"},(0,e.createElement)("p",{className:"ls-kpi-card__label"},(0,e.createElement)("span",{className:"ls-kpi-card__label-text"},t.label),t.tooltip?(0,e.createElement)(n.Tooltip,{text:t.tooltip},(0,e.createElement)(n.Button,{className:"ls-kpi-card__tooltip-button",variant:"tertiary",isSmall:!0,"aria-label":t.tooltip},(0,e.createElement)("span",{className:"dashicons dashicons-info-outline","aria-hidden":"true"}))):null),(0,e.createElement)("div",{className:"ls-kpi-card__value-row"},(0,e.createElement)("strong",{className:"ls-kpi-card__value"},t.value),(()=>{var l,s;const r=null==(i=(l=t.value,null==(s=t.comparisonValue)?null:0===s?0===l?0:100:(l-s)/s*100))?null:`${new Intl.NumberFormat(void 0,{maximumFractionDigits:1,minimumFractionDigits:0,signDisplay:"exceptZero"}).format(i)}%`;var i;return r?(0,e.createElement)(n.Badge,{className:"ls-kpi-card__badge","aria-label":(0,a.sprintf)((0,a.__)("Change vs previous period: %s","lean-stats"),r)},r):null})()))))))},$=({range:n})=>{const{data:l,isLoading:s,error:r}=N("/admin/timeseries/day",n),i=l?.items||[],[o,d]=(0,t.useState)(640),u=(0,t.useMemo)(()=>((e,t=640)=>{const a=e.reduce((e,t)=>Math.max(e,t.hits),0),n=Math.max(Math.round(t),65),l=Math.max(n-64,1),s=Math.max(176,1),r=Math.max(e.length-1,1),i=e.map((e,t)=>({x:32+l*t/r,y:208-(a?e.hits/a*s:0),label:e.bucket,hits:e.hits})),o=((e,t=.2)=>{if(0===e.length)return"";const a=(e,a,n,l=!1)=>{const s=a||e,r=n||e,i=Math.hypot(r.x-s.x,r.y-s.y),o=Math.atan2(r.y-s.y,r.x-s.x)+(l?Math.PI:0),c=i*t;return{x:e.x+Math.cos(o)*c,y:e.y+Math.sin(o)*c}};return e.reduce((e,t,n,l)=>{if(0===n)return`M ${t.x} ${t.y}`;const s=l[n-1],r=l[n+1],i=a(s,l[n-2],t),o=a(t,s,r,!0);return`${e} C ${i.x} ${i.y} ${o.x} ${o.y} ${t.x} ${t.y}`},"")})(i),c=i.length>0?`${o} L ${i[i.length-1].x} 208 L ${i[0].x} 208 Z`:"",d=Math.min(5,e.length),m=new Set;if(d<=1)m.add(0);else{const t=(e.length-1)/(d-1);for(let e=0;e<d;e+=1)m.add(Math.round(e*t))}const _=e.map((e,t)=>m.has(t)?{x:32+l*t/r,label:e.bucket}:null).filter(Boolean);return{points:i,linePath:o,areaPath:c,maxHits:a,width:n,height:240,padding:32,baselineY:208,xLabels:_}})(i,o),[i,o]),[g,p]=(0,t.useState)(null),b=(0,t.useCallback)(({width:e})=>{const t=Math.max(Math.round(e),65);d(e=>e===t?e:t)},[]),E=e=>{const t=new Date(`${e}T00:00:00`);return Number.isNaN(t.getTime())?e:new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"short"}).format(t)},h=g?(0,a.sprintf)((0,a.__)("%1$s · %2$s %3$s","lean-stats"),E(g.label),g.hits,(0,a.__)("Page views","lean-stats")):null,y="ls-timeseries-gradient";return(0,e.createElement)(_,{title:(0,a.__)("Daily page views","lean-stats")},(0,e.createElement)(m,{isLoading:s,error:r,isEmpty:!s&&!r&&0===i.length,emptyLabel:(0,a.__)("No data available for this period.","lean-stats"),loadingLabel:(0,a.__)("Loading chart…","lean-stats")}),!s&&!r&&i.length>0&&(0,e.createElement)("div",{className:"ls-timeseries"},(0,e.createElement)(c,{height:240,ariaLabel:(0,a.__)("Daily page views line chart","lean-stats"),onResize:b},(0,e.createElement)("div",{className:"ls-timeseries__chart",onMouseLeave:()=>p(null)},(0,e.createElement)("svg",{viewBox:`0 0 ${u.width} ${u.height}`,width:"100%",height:"100%",preserveAspectRatio:"xMidYMid meet",className:"ls-timeseries__svg",role:"img","aria-label":(0,a.__)("Daily page views line chart","lean-stats")},(0,e.createElement)("defs",null,(0,e.createElement)("linearGradient",{id:y,x1:"0",y1:"0",x2:"0",y2:"1"},(0,e.createElement)("stop",{offset:"0%",stopColor:"var(--ls-text-2, #2271b1)",stopOpacity:"0.35"}),(0,e.createElement)("stop",{offset:"100%",stopColor:"var(--ls-text-2, #2271b1)",stopOpacity:"0"}))),(0,e.createElement)("rect",{x:"0",y:"0",width:u.width,height:u.height,className:"ls-timeseries__bg"}),(0,e.createElement)("line",{x1:u.padding,y1:u.padding,x2:u.padding,y2:u.height-u.padding,className:"ls-timeseries__axis"}),(0,e.createElement)("line",{x1:u.padding,y1:u.height-u.padding,x2:u.width-u.padding,y2:u.height-u.padding,className:"ls-timeseries__axis"}),(0,e.createElement)("path",{d:u.areaPath,className:"ls-timeseries__area",fill:`url(#${y})`}),(0,e.createElement)("path",{d:u.linePath,className:"ls-timeseries__line"}),u.xLabels.map(t=>(0,e.createElement)("text",{key:`label-${t.label}`,x:t.x,y:u.height-u.padding+18,textAnchor:"middle",className:"ls-timeseries__axis-label"},E(t.label))),u.points.map(t=>(0,e.createElement)("circle",{key:`${t.label}-${t.hits}`,cx:t.x,cy:t.y,r:"4",className:"ls-timeseries__point"+(g?.label===t.label?" is-active":""),onMouseEnter:()=>p(t),onFocus:()=>p(t),onBlur:()=>p(null),tabIndex:"0"},(0,e.createElement)("title",null,(0,a.sprintf)((0,a.__)("%1$s: %2$s %3$s","lean-stats"),E(t.label),t.hits,(0,a.__)("Page views","lean-stats")))))),g&&(0,e.createElement)("div",{className:"ls-timeseries__tooltip",role:"status",style:{left:g.x/u.width*100+"%",top:g.y/u.height*100+"%"}},h)))))},B=({title:l,labelHeader:s,range:r,endpoint:i,emptyLabel:o,labelFallback:c,metricLabel:d=(0,a.__)("Page views","lean-stats"),metricKey:g="hits",metricValueKey:p="hits"})=>{const[b,E]=(0,t.useState)(1),[h,y]=(0,t.useState)(10),[v,w]=(0,t.useState)(g),[f,x]=(0,t.useState)("desc");(0,t.useEffect)(()=>{E(1)},[r.start,r.end]),(0,t.useEffect)(()=>{w(g),x("desc")},[g]);const{data:k,isLoading:S,error:L}=N(i,{...r,page:b,per_page:h,orderby:v,order:f},{namespace:u?.settings?.restNamespace}),C=k?.items||[],M=k?.pagination||{},D=M.totalPages||1,$=M.totalItems||C.length;(0,t.useEffect)(()=>{!S&&!L&&D&&b>D&&E(D)},[D,b,S,L]);const B=b>1,P=b<D,I="asc"===f?(0,a.__)("Ascending","lean-stats"):(0,a.__)("Descending","lean-stats"),T=(0,a.sprintf)((0,a.__)("%s label","lean-stats"),s),R=(0,a.sprintf)((0,a.__)("Toggle sort order: %s","lean-stats"),I),A=(0,a.sprintf)((0,a.__)("Table: %s","lean-stats"),l),F=C.map((e,t)=>{var a;return{key:`${e.label||c}-${t}`,label:e.label||c,value:null!==(a=e?.[p])&&void 0!==a?a:0}});return(0,e.createElement)(_,{title:l},(0,e.createElement)("div",{className:"ls-table-controls"},(0,e.createElement)(n.SelectControl,{label:(0,a.__)("Sort by","lean-stats"),value:v,options:[{label:d,value:g},{label:T,value:"label"}],onChange:e=>{w(e),E(1)},__nextHasNoMarginBottom:!0}),(0,e.createElement)(n.Button,{variant:"secondary",icon:"asc"===f?"arrow-up-alt2":"arrow-down-alt2",onClick:()=>{x("asc"===f?"desc":"asc"),E(1)},"aria-label":R},I),(0,e.createElement)(n.SelectControl,{label:(0,a.__)("Rows","lean-stats"),value:String(h),options:[{label:"5",value:"5"},{label:"10",value:"10"},{label:"20",value:"20"}],onChange:e=>{y(Number(e)),E(1)},__nextHasNoMarginBottom:!0})),(0,e.createElement)(m,{isLoading:S,error:L,isEmpty:!S&&!L&&0===F.length,emptyLabel:o,loadingLabel:(0,a.sprintf)((0,a.__)("Loading: %s","lean-stats"),l)}),!S&&!L&&F.length>0&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("table",{className:"widefat striped ls-report-table","aria-label":A},(0,e.createElement)("thead",null,(0,e.createElement)("tr",null,(0,e.createElement)("th",{scope:"col"},s),(0,e.createElement)("th",{scope:"col"},d))),(0,e.createElement)("tbody",null,F.map(t=>(0,e.createElement)("tr",{key:t.key},(0,e.createElement)("td",null,t.label),(0,e.createElement)("td",null,t.value))))),(0,e.createElement)(n.Flex,{className:"ls-table-pagination",justify:"space-between",align:"center"},(0,e.createElement)(n.FlexItem,null,(0,e.createElement)(n.ButtonGroup,null,(0,e.createElement)(n.Button,{variant:"secondary",onClick:()=>E(e=>Math.max(e-1,1)),disabled:!B,"aria-label":(0,a.__)("Previous page","lean-stats")},(0,a.__)("Previous","lean-stats")),(0,e.createElement)(n.Button,{variant:"secondary",onClick:()=>E(e=>Math.min(e+1,D)),disabled:!P,"aria-label":(0,a.__)("Next page","lean-stats")},(0,a.__)("Next","lean-stats")))),(0,e.createElement)(n.FlexItem,{className:"ls-table-pagination__meta"},(0,a.sprintf)((0,a.__)("Page %1$d of %2$d","lean-stats"),b,D)),(0,e.createElement)(n.FlexItem,{className:"ls-table-pagination__meta"},(0,a.sprintf)((0,a.__)("%s items","lean-stats"),$)))))},P=({range:l})=>{const[s,r]=(0,t.useState)(1),[i,o]=(0,t.useState)(10),[c,d]=(0,t.useState)("hits"),[g,p]=(0,t.useState)("desc");(0,t.useEffect)(()=>{r(1)},[l.start,l.end]);const{data:b,isLoading:E,error:h}=N("/referrer-sources",{...l,page:s,per_page:i,orderby:c,order:g},{namespace:u?.settings?.restNamespace}),y=b?.items||[],v=b?.pagination||{},w=v.totalPages||1,f=v.totalItems||y.length;(0,t.useEffect)(()=>{!E&&!h&&w&&s>w&&r(w)},[w,s,E,h]);const x=s>1,k=s<w,S="asc"===g?(0,a.__)("Ascending","lean-stats"):(0,a.__)("Descending","lean-stats"),L=(0,a.sprintf)((0,a.__)("Toggle sort order: %s","lean-stats"),S),C=(0,a.__)("Table: Referrer sources","lean-stats"),M=y.map((e,t)=>{const n=e.referrer_domain||(0,a.__)("Direct","lean-stats"),l=e.referrer_domain?(0,a.__)("Referrer","lean-stats"):(0,a.__)("Direct","lean-stats");return{key:`${n}-${e.source_category||l}-${t}`,referrer:n,category:e.source_category||l,hits:e.hits}});return(0,e.createElement)(_,{title:(0,a.__)("Referrer sources","lean-stats")},(0,e.createElement)("div",{className:"ls-table-controls"},(0,e.createElement)(n.SelectControl,{label:(0,a.__)("Sort by","lean-stats"),value:c,options:[{label:(0,a.__)("Page views","lean-stats"),value:"hits"},{label:(0,a.__)("Referrer","lean-stats"),value:"referrer"},{label:(0,a.__)("Source category","lean-stats"),value:"category"}],onChange:e=>{d(e),r(1)},__nextHasNoMarginBottom:!0}),(0,e.createElement)(n.Button,{variant:"secondary",icon:"asc"===g?"arrow-up-alt2":"arrow-down-alt2",onClick:()=>{p("asc"===g?"desc":"asc"),r(1)},"aria-label":L},S),(0,e.createElement)(n.SelectControl,{label:(0,a.__)("Rows","lean-stats"),value:String(i),options:[{label:"5",value:"5"},{label:"10",value:"10"},{label:"20",value:"20"}],onChange:e=>{o(Number(e)),r(1)},__nextHasNoMarginBottom:!0})),(0,e.createElement)(m,{isLoading:E,error:h,isEmpty:!E&&!h&&0===M.length,emptyLabel:(0,a.__)("No referrer data available.","lean-stats"),loadingLabel:(0,a.__)("Loading referrer sources…","lean-stats")}),!E&&!h&&M.length>0&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("table",{className:"widefat striped ls-report-table","aria-label":C},(0,e.createElement)("thead",null,(0,e.createElement)("tr",null,(0,e.createElement)("th",{scope:"col"},(0,a.__)("Referrer","lean-stats")),(0,e.createElement)("th",{scope:"col"},(0,a.__)("Source category","lean-stats")),(0,e.createElement)("th",{scope:"col"},(0,a.__)("Page views","lean-stats")))),(0,e.createElement)("tbody",null,M.map(t=>(0,e.createElement)("tr",{key:t.key},(0,e.createElement)("td",null,t.referrer),(0,e.createElement)("td",null,t.category),(0,e.createElement)("td",null,t.hits))))),(0,e.createElement)(n.Flex,{className:"ls-table-pagination",justify:"space-between",align:"center"},(0,e.createElement)(n.FlexItem,null,(0,e.createElement)(n.ButtonGroup,null,(0,e.createElement)(n.Button,{variant:"secondary",onClick:()=>r(e=>Math.max(e-1,1)),disabled:!x,"aria-label":(0,a.__)("Previous page","lean-stats")},(0,a.__)("Previous","lean-stats")),(0,e.createElement)(n.Button,{variant:"secondary",onClick:()=>r(e=>Math.min(e+1,w)),disabled:!k,"aria-label":(0,a.__)("Next page","lean-stats")},(0,a.__)("Next","lean-stats")))),(0,e.createElement)(n.FlexItem,{className:"ls-table-pagination__meta"},(0,a.sprintf)((0,a.__)("Page %1$d of %2$d","lean-stats"),s,w)),(0,e.createElement)(n.FlexItem,{className:"ls-table-pagination__meta"},(0,a.sprintf)((0,a.__)("%s items","lean-stats"),f)))))},I=({title:a,endpoint:n,labelHeader:l,emptyLabel:s,labelFallback:r,metricLabel:i,metricKey:o,metricValueKey:c})=>{const[d,m]=v(),_=(0,t.useMemo)(()=>f(d),[d]);return(0,e.createElement)("div",{className:"ls-report-panel"},(0,e.createElement)("div",{className:"ls-report-panel__header"},(0,e.createElement)(C,{value:d,onChange:m})),(0,e.createElement)(B,{title:a,labelHeader:l,range:_,endpoint:n,emptyLabel:s,labelFallback:r,metricLabel:i,metricKey:o,metricValueKey:c}))},T=()=>{const t=[{name:"top-pages",title:(0,a.__)("Top pages","lean-stats")},{name:"entry-pages",title:(0,a.__)("Entry pages","lean-stats")},{name:"exit-pages",title:(0,a.__)("Exit pages","lean-stats")},{name:"not-found",title:(0,a.__)("Pages not found (404)","lean-stats")}];return(0,e.createElement)(n.TabPanel,{className:"ls-pages-tabs",tabs:t},t=>"entry-pages"===t.name?(0,e.createElement)(U,null):"exit-pages"===t.name?(0,e.createElement)(H,null):"not-found"===t.name?(0,e.createElement)(A,null):(0,e.createElement)(R,null))},R=()=>(0,e.createElement)(I,{title:(0,a.__)("Top pages","lean-stats"),labelHeader:(0,a.__)("Page","lean-stats"),endpoint:"/top-pages",emptyLabel:(0,a.__)("No popular pages available.","lean-stats"),labelFallback:"/"}),A=()=>(0,e.createElement)(I,{title:(0,a.__)("Top 404s","lean-stats"),labelHeader:(0,a.__)("Missing page","lean-stats"),endpoint:"/404s",emptyLabel:(0,a.__)("No missing pages available.","lean-stats"),labelFallback:"/"}),F=()=>(0,e.createElement)(I,{title:(0,a.__)("Search terms","lean-stats"),labelHeader:(0,a.__)("Search term","lean-stats"),endpoint:"/search-terms",emptyLabel:(0,a.__)("No search terms available.","lean-stats"),labelFallback:(0,a.__)("Unknown","lean-stats")}),U=()=>(0,e.createElement)(I,{title:(0,a.__)("Entry pages (approx.)","lean-stats"),labelHeader:(0,a.__)("Entry page","lean-stats"),endpoint:"/entry-pages",emptyLabel:(0,a.__)("No entry pages available.","lean-stats"),labelFallback:"/",metricLabel:(0,a.__)("Entries (approx.)","lean-stats"),metricKey:"entries",metricValueKey:"entries"}),H=()=>(0,e.createElement)(I,{title:(0,a.__)("Exit pages (approx.)","lean-stats"),labelHeader:(0,a.__)("Exit page","lean-stats"),endpoint:"/exit-pages",emptyLabel:(0,a.__)("No exit pages available.","lean-stats"),labelFallback:"/",metricLabel:(0,a.__)("Exits (approx.)","lean-stats"),metricKey:"exits",metricValueKey:"exits"}),j=()=>{const[a,n]=v(),l=(0,t.useMemo)(()=>f(a),[a]);return(0,e.createElement)("div",{className:"ls-report-panel"},(0,e.createElement)("div",{className:"ls-report-panel__header"},(0,e.createElement)(C,{value:a,onChange:n})),(0,e.createElement)(P,{range:l}))},G=({range:t})=>{const{data:n,isLoading:l,error:s}=N("/admin/device-split",t),r=(n?.items||[]).map(e=>({...e,label:e.label?e.label.charAt(0).toUpperCase()+e.label.slice(1):(0,a.__)("Unknown","lean-stats")})),i=r.reduce((e,t)=>Math.max(e,t.hits),0);return(0,e.createElement)(_,{title:(0,a.__)("Device page views","lean-stats")},(0,e.createElement)(m,{isLoading:l,error:s,isEmpty:!l&&!s&&0===r.length,emptyLabel:(0,a.__)("No device data available.","lean-stats"),loadingLabel:(0,a.__)("Loading device breakdown…","lean-stats")}),!l&&!s&&r.length>0&&(0,e.createElement)("div",{className:"ls-device-breakdown"},r.map(t=>{const n=i?Math.round(t.hits/i*100):0;return(0,e.createElement)("div",{key:t.label,className:"ls-device-breakdown__row"},(0,e.createElement)("div",{className:"ls-device-breakdown__label"},t.label),(0,e.createElement)("div",{className:"ls-device-breakdown__bar","aria-hidden":"true"},(0,e.createElement)("div",{className:"ls-device-breakdown__bar-fill",style:{width:`${n}%`}})),(0,e.createElement)("div",{className:"ls-device-breakdown__value"},(0,a.sprintf)((0,a.__)("%s views","lean-stats"),t.hits)))})))},q=()=>{const[n,l]=v(),s=(0,t.useMemo)(()=>f(n),[n]);return(0,e.createElement)("div",{className:"ls-overview"},(0,e.createElement)("div",{className:"ls-overview__summary"},(0,e.createElement)(C,{value:n,onChange:l}),(0,e.createElement)(D,{range:s})),(0,e.createElement)($,{range:s}),(0,e.createElement)("div",{className:"ls-overview__grid"},(0,e.createElement)(B,{title:(0,a.__)("Top pages","lean-stats"),labelHeader:(0,a.__)("Page","lean-stats"),range:s,endpoint:"/top-pages",emptyLabel:(0,a.__)("No popular pages available.","lean-stats"),labelFallback:"/"}),(0,e.createElement)(B,{title:(0,a.__)("Top referrers","lean-stats"),labelHeader:(0,a.__)("Referrer","lean-stats"),range:s,endpoint:"/referrers",emptyLabel:(0,a.__)("No referrers available.","lean-stats"),labelFallback:(0,a.__)("Direct","lean-stats")}),(0,e.createElement)(G,{range:s})))},K=document.getElementById("lean-stats-admin");K&&(0,t.render)((0,e.createElement)(o,null,(0,e.createElement)(()=>{var i;if(!u)return(0,e.createElement)(n.Notice,{status:"error",isDismissible:!1},(0,a.__)("Missing admin configuration.","lean-stats"));const o=(e=>{if(!Array.isArray(e))return p;const t=e.map(e=>({name:e?.name||"",title:e?.title||e?.name||""})).filter(e=>e.name);return t.length>0?t:p})(u?.panels),c=u?.currentPanel||"dashboard",d=(e=>{const t={dashboard:q,"top-pages":T,referrers:j,"search-terms":F,geolocation:L,settings:M};return t[e]?t[e]:(window.LeanStatsAdminPanels||{})[e]||null})(c),m=((e,t)=>{const n=t.find(t=>t.name===e);return n?.title||(0,a.__)("Lean Stats","lean-stats")})(c,o),_=u?.settings?.pluginLabel||(0,a.__)("Lean Stats","lean-stats"),g=Boolean(null!==(i=window.LEAN_STATS_DEBUG)&&void 0!==i?i:u?.settings?.debugEnabled),b=(0,t.useMemo)(()=>r({debugEnabled:g}),[g]);return(0,t.useEffect)(()=>{(e=>{window&&window.addEventListener&&(window.addEventListener("error",t=>{e.error("Global error captured",{action:"window.error",message:t.message,filename:t.filename,lineno:t.lineno,colno:t.colno,error:t.error?t.error.toString():void 0})}),window.addEventListener("unhandledrejection",t=>{e.error("Unhandled promise rejection",{action:"window.unhandledrejection",reason:t.reason?t.reason.toString():void 0})}))})(b),b.info("Loading admin interface",{action:"admin.init",traceId:l(),context:s()})},[b]),(0,e.createElement)("div",{className:"ls-admin-app"},(0,e.createElement)("h1",null,_),d?(0,e.createElement)(d,{panel:{name:c,title:m}}):(0,e.createElement)(n.Notice,{status:"warning",isDismissible:!1},(0,a.__)("No panel available for this screen.","lean-stats")))},null)),K)})();