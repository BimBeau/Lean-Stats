(()=>{var e,t,n={20(e,t,n){"use strict";var a=n(609),i=Symbol.for("react.element"),r=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,s=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var a,r={},c=null,d=null;for(a in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)l.call(t,a)&&!o.hasOwnProperty(a)&&(r[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===r[a]&&(r[a]=t[a]);return{$$typeof:i,type:e,key:c,ref:d,props:r,_owner:s.current}}t.Fragment=r,t.jsx=c,t.jsxs=c},252(e){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var a,i,r;if(Array.isArray(t)){if((a=t.length)!=n.length)return!1;for(i=a;0!==i--;)if(!e(t[i],n[i]))return!1;return!0}if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;for(i of t.entries())if(!e(i[1],n.get(i[0])))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(n)){if((a=t.length)!=n.length)return!1;for(i=a;0!==i--;)if(t[i]!==n[i])return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((a=(r=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=a;0!==i--;)if(!Object.prototype.hasOwnProperty.call(n,r[i]))return!1;for(i=a;0!==i--;){var l=r[i];if(!e(t[l],n[l]))return!1}return!0}return t!=t&&n!=n}},493(e,t,n){"use strict";var a=n(609),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},r=a.useState,l=a.useEffect,s=a.useLayoutEffect,o=a.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(e){return!0}}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),a=r({inst:{value:n,getSnapshot:t}}),i=a[0].inst,d=a[1];return s(function(){i.value=n,i.getSnapshot=t,c(i)&&d({inst:i})},[e,n,t]),l(function(){return c(i)&&d({inst:i}),e(function(){c(i)&&d({inst:i})})},[e]),o(n),n};t.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:d},609(e){"use strict";e.exports=window.React},731(e){var t={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",Ấ:"A",Ắ:"A",Ẳ:"A",Ẵ:"A",Ặ:"A",Æ:"AE",Ầ:"A",Ằ:"A",Ȃ:"A",Ả:"A",Ạ:"A",Ẩ:"A",Ẫ:"A",Ậ:"A",Ç:"C",Ḉ:"C",È:"E",É:"E",Ê:"E",Ë:"E",Ế:"E",Ḗ:"E",Ề:"E",Ḕ:"E",Ḝ:"E",Ȇ:"E",Ẻ:"E",Ẽ:"E",Ẹ:"E",Ể:"E",Ễ:"E",Ệ:"E",Ì:"I",Í:"I",Î:"I",Ï:"I",Ḯ:"I",Ȋ:"I",Ỉ:"I",Ị:"I",Ð:"D",Ñ:"N",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",Ố:"O",Ṍ:"O",Ṓ:"O",Ȏ:"O",Ỏ:"O",Ọ:"O",Ổ:"O",Ỗ:"O",Ộ:"O",Ờ:"O",Ở:"O",Ỡ:"O",Ớ:"O",Ợ:"O",Ù:"U",Ú:"U",Û:"U",Ü:"U",Ủ:"U",Ụ:"U",Ử:"U",Ữ:"U",Ự:"U",Ý:"Y",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",ấ:"a",ắ:"a",ẳ:"a",ẵ:"a",ặ:"a",æ:"ae",ầ:"a",ằ:"a",ȃ:"a",ả:"a",ạ:"a",ẩ:"a",ẫ:"a",ậ:"a",ç:"c",ḉ:"c",è:"e",é:"e",ê:"e",ë:"e",ế:"e",ḗ:"e",ề:"e",ḕ:"e",ḝ:"e",ȇ:"e",ẻ:"e",ẽ:"e",ẹ:"e",ể:"e",ễ:"e",ệ:"e",ì:"i",í:"i",î:"i",ï:"i",ḯ:"i",ȋ:"i",ỉ:"i",ị:"i",ð:"d",ñ:"n",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",ố:"o",ṍ:"o",ṓ:"o",ȏ:"o",ỏ:"o",ọ:"o",ổ:"o",ỗ:"o",ộ:"o",ờ:"o",ở:"o",ỡ:"o",ớ:"o",ợ:"o",ù:"u",ú:"u",û:"u",ü:"u",ủ:"u",ụ:"u",ử:"u",ữ:"u",ự:"u",ý:"y",ÿ:"y",Ā:"A",ā:"a",Ă:"A",ă:"a",Ą:"A",ą:"a",Ć:"C",ć:"c",Ĉ:"C",ĉ:"c",Ċ:"C",ċ:"c",Č:"C",č:"c",C̆:"C",c̆:"c",Ď:"D",ď:"d",Đ:"D",đ:"d",Ē:"E",ē:"e",Ĕ:"E",ĕ:"e",Ė:"E",ė:"e",Ę:"E",ę:"e",Ě:"E",ě:"e",Ĝ:"G",Ǵ:"G",ĝ:"g",ǵ:"g",Ğ:"G",ğ:"g",Ġ:"G",ġ:"g",Ģ:"G",ģ:"g",Ĥ:"H",ĥ:"h",Ħ:"H",ħ:"h",Ḫ:"H",ḫ:"h",Ĩ:"I",ĩ:"i",Ī:"I",ī:"i",Ĭ:"I",ĭ:"i",Į:"I",į:"i",İ:"I",ı:"i",Ĳ:"IJ",ĳ:"ij",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",Ḱ:"K",ḱ:"k",K̆:"K",k̆:"k",Ĺ:"L",ĺ:"l",Ļ:"L",ļ:"l",Ľ:"L",ľ:"l",Ŀ:"L",ŀ:"l",Ł:"l",ł:"l",Ḿ:"M",ḿ:"m",M̆:"M",m̆:"m",Ń:"N",ń:"n",Ņ:"N",ņ:"n",Ň:"N",ň:"n",ŉ:"n",N̆:"N",n̆:"n",Ō:"O",ō:"o",Ŏ:"O",ŏ:"o",Ő:"O",ő:"o",Œ:"OE",œ:"oe",P̆:"P",p̆:"p",Ŕ:"R",ŕ:"r",Ŗ:"R",ŗ:"r",Ř:"R",ř:"r",R̆:"R",r̆:"r",Ȓ:"R",ȓ:"r",Ś:"S",ś:"s",Ŝ:"S",ŝ:"s",Ş:"S",Ș:"S",ș:"s",ş:"s",Š:"S",š:"s",Ţ:"T",ţ:"t",ț:"t",Ț:"T",Ť:"T",ť:"t",Ŧ:"T",ŧ:"t",T̆:"T",t̆:"t",Ũ:"U",ũ:"u",Ū:"U",ū:"u",Ŭ:"U",ŭ:"u",Ů:"U",ů:"u",Ű:"U",ű:"u",Ų:"U",ų:"u",Ȗ:"U",ȗ:"u",V̆:"V",v̆:"v",Ŵ:"W",ŵ:"w",Ẃ:"W",ẃ:"w",X̆:"X",x̆:"x",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Y̆:"Y",y̆:"y",Ź:"Z",ź:"z",Ż:"Z",ż:"z",Ž:"Z",ž:"z",ſ:"s",ƒ:"f",Ơ:"O",ơ:"o",Ư:"U",ư:"u",Ǎ:"A",ǎ:"a",Ǐ:"I",ǐ:"i",Ǒ:"O",ǒ:"o",Ǔ:"U",ǔ:"u",Ǖ:"U",ǖ:"u",Ǘ:"U",ǘ:"u",Ǚ:"U",ǚ:"u",Ǜ:"U",ǜ:"u",Ứ:"U",ứ:"u",Ṹ:"U",ṹ:"u",Ǻ:"A",ǻ:"a",Ǽ:"AE",ǽ:"ae",Ǿ:"O",ǿ:"o",Þ:"TH",þ:"th",Ṕ:"P",ṕ:"p",Ṥ:"S",ṥ:"s",X́:"X",x́:"x",Ѓ:"Г",ѓ:"г",Ќ:"К",ќ:"к",A̋:"A",a̋:"a",E̋:"E",e̋:"e",I̋:"I",i̋:"i",Ǹ:"N",ǹ:"n",Ồ:"O",ồ:"o",Ṑ:"O",ṑ:"o",Ừ:"U",ừ:"u",Ẁ:"W",ẁ:"w",Ỳ:"Y",ỳ:"y",Ȁ:"A",ȁ:"a",Ȅ:"E",ȅ:"e",Ȉ:"I",ȉ:"i",Ȍ:"O",ȍ:"o",Ȑ:"R",ȑ:"r",Ȕ:"U",ȕ:"u",B̌:"B",b̌:"b",Č̣:"C",č̣:"c",Ê̌:"E",ê̌:"e",F̌:"F",f̌:"f",Ǧ:"G",ǧ:"g",Ȟ:"H",ȟ:"h",J̌:"J",ǰ:"j",Ǩ:"K",ǩ:"k",M̌:"M",m̌:"m",P̌:"P",p̌:"p",Q̌:"Q",q̌:"q",Ř̩:"R",ř̩:"r",Ṧ:"S",ṧ:"s",V̌:"V",v̌:"v",W̌:"W",w̌:"w",X̌:"X",x̌:"x",Y̌:"Y",y̌:"y",A̧:"A",a̧:"a",B̧:"B",b̧:"b",Ḑ:"D",ḑ:"d",Ȩ:"E",ȩ:"e",Ɛ̧:"E",ɛ̧:"e",Ḩ:"H",ḩ:"h",I̧:"I",i̧:"i",Ɨ̧:"I",ɨ̧:"i",M̧:"M",m̧:"m",O̧:"O",o̧:"o",Q̧:"Q",q̧:"q",U̧:"U",u̧:"u",X̧:"X",x̧:"x",Z̧:"Z",z̧:"z",й:"и",Й:"И",ё:"е",Ё:"Е"},n=Object.keys(t).join("|"),a=new RegExp(n,"g"),i=new RegExp(n,"");function r(e){return t[e]}var l=function(e){return e.replace(a,r)};e.exports=l,e.exports.has=function(e){return!!e.match(i)},e.exports.remove=l},848(e,t,n){"use strict";e.exports=n(20)},888(e,t,n){"use strict";e.exports=n(493)}},a={};function i(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={exports:{}};return n[e](r,r.exports,i),r.exports}t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(n,a){if(1&a&&(n=this(n)),8&a)return n;if("object"==typeof n&&n){if(4&a&&n.__esModule)return n;if(16&a&&"function"==typeof n.then)return n}var r=Object.create(null);i.r(r);var l={};e=e||[null,t({}),t([]),t(t)];for(var s=2&a&&n;("object"==typeof s||"function"==typeof s)&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(e=>l[e]=()=>n[e]);return l.default=()=>n,i.d(r,l),r},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e=i(609),t=i.t(e,2);const n=window.wp.element,a=window.wp.i18n,r=window.wp.components,l=()=>`ls-${Math.random().toString(36).slice(2,8)}${Date.now().toString(36).slice(-4)}`,s=()=>{const e=Boolean(window?.chrome&&window.chrome.runtime);return{userAgent:"undefined"==typeof navigator?"":navigator.userAgent||"",hasChromeRuntime:e,suggestion:"Test in private browsing to isolate extensions."}},o=({debugEnabled:e=!1,prefix:t="[LeanStats]"}={})=>{const n=()=>"function"==typeof e?e():e,a=(e,a,i,r=!1)=>{(r||n())&&((e,n,a)=>{const i=`${t} ${n}`;console&&console.groupCollapsed?(console.groupCollapsed(i),console[e](a),console.groupEnd()):console[e](i,a)})(e,a,{time:"undefined"!=typeof performance&&performance.now?Number(performance.now().toFixed(2)):Date.now(),page:"undefined"!=typeof window&&window.location&&window.location.pathname||"",...i})};return{debug:(e,t={})=>a("debug",e,t),info:(e,t={})=>a("info",e,t),warn:(e,t={})=>a("warn",e,t),error:(e,i={})=>{n()?a("error",e,i,!0):console&&console.error&&console.error(`${t} ${e}`)},isDebugEnabled:()=>e}};class c extends n.Component{state={error:null};static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e,t){const{onError:n}=this.props;n&&n(e,t)}render(){const{error:t}=this.state,{fatal:n,checkedHandles:i=[],checkedGlobals:l=[],children:s}=this.props,o=n||t;if(o){const t=(o?.checkedHandles||i).filter(Boolean),n=(o?.checkedGlobals||l).filter(Boolean);return(0,e.createElement)(r.Notice,{status:"error",isDismissible:!1},(0,e.createElement)("p",null,(0,a.__)("Lean Stats requires WordPress Data Views. The admin app cannot load without it.","lean-stats")),o?.reason&&(0,e.createElement)("p",null,o.reason),t.length>0&&(0,e.createElement)("p",null,(0,a.sprintf)((0,a.__)("Script handles checked: %s","lean-stats"),t.join(", "))),n.length>0&&(0,e.createElement)("p",null,(0,a.sprintf)((0,a.__)("Global namespaces checked: %s","lean-stats"),n.join(", "))),(0,e.createElement)("p",null,(0,a.__)("Install or update the Gutenberg plugin, or update WordPress to a version that provides Data Views.","lean-stats")))}return s}}const d=c,u=({height:t,ariaLabel:a,children:i})=>{const{ref:r,hasSize:l}=(()=>{const e=(0,n.useRef)(null),[t,a]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{const t=e.current;if(!t)return;const n=()=>{const e=t.getBoundingClientRect(),n=e.width>0&&e.height>0;a(e=>e===n?e:n)};let i;return n(),window.ResizeObserver?(i=new ResizeObserver(()=>n()),i.observe(t)):window.addEventListener("resize",n),()=>{i?i.disconnect():window.removeEventListener("resize",n)}},[]),{ref:e,hasSize:t}})();return(0,e.createElement)("div",{ref:r,className:"ls-chart-frame","data-height":t,role:"img","aria-label":a},l?i:null)},m=["ls-skeleton__bar--w80","ls-skeleton__bar--w74","ls-skeleton__bar--w68","ls-skeleton__bar--w62","ls-skeleton__bar--w56","ls-skeleton__bar--w50"],f=({isLoading:t,error:n,isEmpty:i,emptyLabel:l,loadingLabel:s=(0,a.__)("Loading…","lean-stats"),skeletonRows:o=4})=>{if(t){const t=Array.from({length:o},(e,t)=>t);return(0,e.createElement)("div",{className:"ls-data-state","aria-live":"polite","aria-busy":"true"},(0,e.createElement)("div",{className:"ls-data-state__header"},(0,e.createElement)(r.Spinner,null),(0,e.createElement)("span",null,s)),(0,e.createElement)("div",{className:"ls-skeleton"},t.map(t=>(0,e.createElement)("div",{key:t,className:`ls-skeleton__bar ${m[Math.min(t,m.length-1)]}`}))))}return n?(0,e.createElement)(r.Notice,{status:"error",isDismissible:!1},n):i?(0,e.createElement)("p",{role:"status"},l):null},g=window.wp.compose,p=window.wp.ui,v=window.wp.primitives;var h=i(848),b=(0,h.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,h.jsx)(v.Path,{d:"M12 3.9 6.5 9.5l1 1 3.8-3.7V20h1.5V6.8l3.7 3.7 1-1z"})}),w=(0,h.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,h.jsx)(v.Path,{d:"m16.5 13.5-3.7 3.7V4h-1.5v13.2l-3.8-3.7-1 1 5.5 5.6 5.5-5.6z"})}),_="isAny",x="isNone",y="isAll",S="isNotAll",C="between",E="inThePast",j="over",k="is",I="isNot",V="lessThan",N="greaterThan",L="lessThanOrEqual",F="greaterThanOrEqual",M="before",P="after",A="beforeInc",O="afterInc",T="contains",D="notContains",B="startsWith",R="on",z="notOn",H=["asc","desc"],$={asc:"↑",desc:"↓"},W={asc:"ascending",desc:"descending"},q={asc:(0,a.__)("Sort ascending"),desc:(0,a.__)("Sort descending")},G={asc:b,desc:w},K="table",U="grid",Y=(0,n.createContext)({view:{type:K},onChangeView:()=>{},fields:[],data:[],paginationInfo:{totalItems:0,totalPages:0},selection:[],onChangeSelection:()=>{},setOpenedFilter:()=>{},openedFilter:null,getItemId:e=>e.id,isItemClickable:()=>!0,renderItemLink:void 0,containerWidth:0,containerRef:(0,n.createRef)(),resizeObserverRef:()=>{},defaultLayouts:{list:{},grid:{},table:{}},filters:[],isShowingFilter:!1,setIsShowingFilter:()=>{},hasInfiniteScrollHandler:!1,config:{perPageSizes:[]}});Y.displayName="DataViewsContext";var Z=Y,X=(0,h.jsx)(v.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,h.jsx)(v.Path,{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5 4.5h14c.3 0 .5.2.5.5v3.5h-15V5c0-.3.2-.5.5-.5zm8 5.5h6.5v3.5H13V10zm-1.5 3.5h-7V10h7v3.5zm-7 5.5v-4h7v4.5H5c-.3 0-.5-.2-.5-.5zm14.5.5h-6V15h6.5v4c0 .3-.2.5-.5.5z"})}),Q=(0,h.jsx)(v.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,h.jsx)(v.Path,{d:"M6 5.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5V6a.5.5 0 01.5-.5zM4 6a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2H6a2 2 0 01-2-2V6zm11-.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5h-3a.5.5 0 01-.5-.5V6a.5.5 0 01.5-.5zM13 6a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2h-3a2 2 0 01-2-2V6zm5 8.5h-3a.5.5 0 00-.5.5v3a.5.5 0 00.5.5h3a.5.5 0 00.5-.5v-3a.5.5 0 00-.5-.5zM15 13a2 2 0 00-2 2v3a2 2 0 002 2h3a2 2 0 002-2v-3a2 2 0 00-2-2h-3zm-9 1.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5v-3a.5.5 0 01.5-.5zM4 15a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2H6a2 2 0 01-2-2v-3z",fillRule:"evenodd",clipRule:"evenodd"})}),J=(0,h.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,h.jsx)(v.Path,{d:"M4 8.8h8.9V7.2H4v1.6zm0 7h8.9v-1.5H4v1.5zM18 13c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"})}),ee=(0,h.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,h.jsx)(v.Path,{d:"M11.1 15.8H20v-1.5h-8.9v1.5zm0-8.6v1.5H20V7.2h-8.9zM6 13c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-7c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})}),te=(0,h.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,h.jsx)(v.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 18.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13ZM4 12a8 8 0 1 1 16 0 8 8 0 0 1-16 0Zm9 1V8h-1.5v3.5h-2V13H13Z"})});function ne(e){var t,n,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=ne(e[t]))&&(a&&(a+=" "),a+=n)}else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}const ae=function(){for(var e,t,n=0,a="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=ne(e))&&(a&&(a+=" "),a+=t);return a},ie=window.wp.keycodes;function re({selection:e,onChangeSelection:t,item:n,getItemId:i,titleField:l,disabled:s,...o}){const c=i(n),d=!s&&e.includes(c),u=l?.getValue?.({item:n})||(0,a.__)("(no title)");return(0,h.jsx)(r.CheckboxControl,{className:"dataviews-selection-checkbox","aria-label":u,"aria-disabled":s,checked:d,onChange:()=>{s||t(e.includes(c)?e.filter(e=>c!==e):[...e,c])},...o})}var le=(0,h.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,h.jsx)(v.Path,{d:"M13 19h-2v-2h2v2zm0-6h-2v-2h2v2zm0-6h-2V5h2v2z"})});const se=window.wp.data,oe=window.wp.privateApis;var{lock:ce,unlock:de}=(0,oe.__dangerousOptInToUnstableAPIsOnlyForCoreModules)("I acknowledge private features are not for use in themes or plugins and doing so will break in the next version of WordPress.","@wordpress/dataviews"),{Menu:ue,kebabCase:me}=de(r.privateApis);function fe({action:e,onClick:t,items:n,variant:a}){const i="string"==typeof e.label?e.label:e.label(n);return(0,h.jsx)(r.Button,{disabled:!!e.disabled,accessibleWhenDisabled:!0,size:"compact",variant:a,onClick:t,children:i})}function ge({action:e,onClick:t,items:n}){const a="string"==typeof e.label?e.label:e.label(n);return(0,h.jsx)(ue.Item,{disabled:e.disabled,onClick:t,children:(0,h.jsx)(ue.ItemLabel,{children:a})})}function pe({action:e,items:t,closeModal:n}){const a="string"==typeof e.label?e.label:e.label(t),i="function"==typeof e.modalHeader?e.modalHeader(t):e.modalHeader;return(0,h.jsx)(r.Modal,{title:i||a,__experimentalHideHeader:!!e.hideModalHeader,onRequestClose:n,focusOnMount:e.modalFocusOnMount??!0,size:e.modalSize||"medium",overlayClassName:`dataviews-action-modal dataviews-action-modal__${me(e.id)}`,children:(0,h.jsx)(e.RenderModal,{items:t,closeModal:n})})}function ve({actions:e,item:t,registry:a,setActiveModalAction:i}){const{primaryActions:r,regularActions:l}=(0,n.useMemo)(()=>e.reduce((e,t)=>((t.isPrimary?e.primaryActions:e.regularActions).push(t),e),{primaryActions:[],regularActions:[]}),[e]),s=e=>e.map(e=>(0,h.jsx)(ge,{action:e,onClick:()=>{"RenderModal"in e?i(e):e.callback([t],{registry:a})},items:[t]},e.id));return(0,h.jsxs)(ue.Group,{children:[s(r),r.length>0&&l.length>0&&(0,h.jsx)(ue.Separator,{}),s(l)]})}function he({item:e,actions:t,isCompact:a}){const i=(0,se.useRegistry)(),{primaryActions:r,eligibleActions:l}=(0,n.useMemo)(()=>{const n=t.filter(t=>!t.isEligible||t.isEligible(e));return{primaryActions:n.filter(e=>e.isPrimary),eligibleActions:n}},[t,e]);return a?(0,h.jsx)(be,{item:e,actions:l,isSmall:!0,registry:i}):(0,h.jsxs)(p.Stack,{direction:"row",justify:"flex-end",className:"dataviews-item-actions",style:{flexShrink:0,width:"auto"},children:[(0,h.jsx)(we,{item:e,actions:r,registry:i}),r.length<l.length&&(0,h.jsx)(be,{item:e,actions:l,registry:i})]})}function be({item:e,actions:t,isSmall:i,registry:l}){const[s,o]=(0,n.useState)(null);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(ue,{placement:"bottom-end",children:[(0,h.jsx)(ue.TriggerButton,{render:(0,h.jsx)(r.Button,{size:i?"small":"compact",icon:le,label:(0,a.__)("Actions"),accessibleWhenDisabled:!0,disabled:!t.length,className:"dataviews-all-actions-button"})}),(0,h.jsx)(ue.Popover,{children:(0,h.jsx)(ve,{actions:t,item:e,registry:l,setActiveModalAction:o})})]}),!!s&&(0,h.jsx)(pe,{action:s,items:[e],closeModal:()=>o(null)})]})}function we({item:e,actions:t,registry:a,buttonVariant:i}){const[r,l]=(0,n.useState)(null);return(0,g.useViewportMatch)("medium","<")?null:Array.isArray(t)&&0!==t.length?(0,h.jsxs)(h.Fragment,{children:[t.map(t=>(0,h.jsx)(fe,{action:t,onClick:()=>{"RenderModal"in t?l(t):t.callback([e],{registry:a})},items:[e],variant:i},t.id)),!!r&&(0,h.jsx)(pe,{action:r,items:[e],closeModal:()=>l(null)})]}):null}var _e=(0,h.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,h.jsx)(v.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})});function xe({action:e,items:t,ActionTriggerComponent:a}){const[i,r]=(0,n.useState)(!1),l={action:e,onClick:()=>{r(!0)},items:t};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(a,{...l}),i&&(0,h.jsx)(pe,{action:e,items:t,closeModal:()=>r(!1)})]})}function ye(e,t){return(0,n.useMemo)(()=>e.some(e=>e.supportsBulk&&(!e.isEligible||e.isEligible(t))),[e,t])}function Se(e,t){return(0,n.useMemo)(()=>t.some(t=>e.some(e=>e.supportsBulk&&(!e.isEligible||e.isEligible(t)))),[e,t])}function Ce({selection:e,onChangeSelection:t,data:i,actions:l,getItemId:s}){const o=(0,n.useMemo)(()=>i.filter(e=>l.some(t=>t.supportsBulk&&(!t.isEligible||t.isEligible(e)))),[i,l]),c=i.filter(t=>e.includes(s(t))&&o.includes(t)),d=c.length===o.length;return(0,h.jsx)(r.CheckboxControl,{className:"dataviews-view-table-selection-checkbox",checked:d,indeterminate:!d&&!!c.length,onChange:()=>{t(d?[]:o.map(e=>s(e)))},"aria-label":d?(0,a.__)("Deselect all"):(0,a.__)("Select all")})}function Ee({action:e,onClick:t,isBusy:n,items:a}){const i="string"==typeof e.label?e.label:e.label(a);return(0,g.useViewportMatch)("medium","<")?(0,h.jsx)(r.Button,{disabled:n,accessibleWhenDisabled:!0,label:i,icon:e.icon,size:"compact",onClick:t,isBusy:n}):(0,h.jsx)(r.Button,{disabled:n,accessibleWhenDisabled:!0,size:"compact",onClick:t,isBusy:n,children:i})}var je=[];function ke({action:e,selectedItems:t,actionInProgress:a,setActionInProgress:i}){const r=(0,se.useRegistry)(),l=(0,n.useMemo)(()=>t.filter(t=>!e.isEligible||e.isEligible(t)),[e,t]);return"RenderModal"in e?(0,h.jsx)(xe,{action:e,items:l,ActionTriggerComponent:Ee},e.id):(0,h.jsx)(Ee,{action:e,onClick:async()=>{i(e.id),await e.callback(t,{registry:r}),i(null)},items:l,isBusy:a===e.id},e.id)}function Ie(e,t,n,i,l,s,o,c,d){const u=s.length>0?(0,a.sprintf)(
/* translators: %d: number of items. */
/* translators: %d: number of items. */
(0,a._n)("%d Item selected","%d Items selected",s.length),s.length):(0,a.sprintf)(
/* translators: %d: number of items. */
/* translators: %d: number of items. */
(0,a._n)("%d Item","%d Items",e.length),e.length);return(0,h.jsxs)(p.Stack,{direction:"row",className:"dataviews-bulk-actions-footer__container",gap:"sm",align:"center",children:[(0,h.jsx)(Ce,{selection:i,onChangeSelection:d,data:e,actions:t,getItemId:n}),(0,h.jsx)("span",{className:"dataviews-bulk-actions-footer__item-count",children:u}),(0,h.jsxs)(p.Stack,{direction:"row",className:"dataviews-bulk-actions-footer__action-buttons",gap:"2xs",children:[l.map(e=>(0,h.jsx)(ke,{action:e,selectedItems:s,actionInProgress:o,setActionInProgress:c},e.id)),s.length>0&&(0,h.jsx)(r.Button,{icon:_e,showTooltip:!0,tooltipPosition:"top",size:"compact",label:(0,a.__)("Cancel"),disabled:!!o,accessibleWhenDisabled:!1,onClick:()=>{d(je)}})]})]})}function Ve({selection:e,actions:t,onChangeSelection:a,data:i,getItemId:r}){const[l,s]=(0,n.useState)(null),o=(0,n.useRef)(null),c=(0,g.useViewportMatch)("medium","<"),d=(0,n.useMemo)(()=>t.filter(e=>e.supportsBulk),[t]),u=(0,n.useMemo)(()=>i.filter(e=>d.some(t=>!t.isEligible||t.isEligible(e))),[i,d]),m=(0,n.useMemo)(()=>i.filter(t=>e.includes(r(t))&&u.includes(t)),[e,i,r,u]),f=(0,n.useMemo)(()=>t.filter(e=>e.supportsBulk&&(!c||e.icon)&&m.some(t=>!e.isEligible||e.isEligible(t))),[t,m,c]);return l?(o.current||(o.current=Ie(i,t,r,e,f,m,l,s,a)),o.current):(o.current&&(o.current=null),Ie(i,t,r,e,f,m,l,s,a))}function Ne(){const{data:e,selection:t,actions:a=je,onChangeSelection:i,getItemId:r}=(0,n.useContext)(Z);return(0,h.jsx)(Ve,{selection:t,onChangeSelection:i,data:e,actions:a,getItemId:r})}var Le=(0,h.jsx)(v.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,h.jsx)(v.Path,{d:"M10 17.5H14V16H10V17.5ZM6 6V7.5H18V6H6ZM8 12.5H16V11H8V12.5Z"})}),Fe=(0,h.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,h.jsx)(v.Path,{d:"M20 11.2H6.8l3.7-3.7-1-1L3.9 12l5.6 5.5 1-1-3.7-3.7H20z"})}),Me=(0,h.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,h.jsx)(v.Path,{d:"m14.5 6.5-1 1 3.7 3.7H4v1.6h13.2l-3.7 3.7 1 1 5.6-5.5z"})}),Pe=(0,h.jsx)(v.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,h.jsx)(v.Path,{d:"M20.7 12.7s0-.1-.1-.2c0-.2-.2-.4-.4-.6-.3-.5-.9-1.2-1.6-1.8-.7-.6-1.5-1.3-2.6-1.8l-.6 1.4c.9.4 1.6 1 2.1 1.5.6.6 1.1 1.2 1.4 1.6.1.2.3.4.3.5v.1l.7-.3.7-.3Zm-5.2-9.3-1.8 4c-.5-.1-1.1-.2-1.7-.2-3 0-5.2 1.4-6.6 2.7-.7.7-1.2 1.3-1.6 1.8-.2.3-.3.5-.4.6 0 0 0 .1-.1.2s0 0 .7.3l.7.3V13c0-.1.2-.3.3-.5.3-.4.7-1 1.4-1.6 1.2-1.2 3-2.3 5.5-2.3H13v.3c-.4 0-.8-.1-1.1-.1-1.9 0-3.5 1.6-3.5 3.5s.6 2.3 1.6 2.9l-2 4.4.9.4 7.6-16.2-.9-.4Zm-3 12.6c1.7-.2 3-1.7 3-3.5s-.2-1.4-.6-1.9L12.4 16Z"})});function Ae(e,t){const n=[e?.titleField,e?.mediaField,e?.descriptionField].filter(Boolean);return t.filter(e=>!n.includes(e.id)&&"media"!==e.type&&!1!==e.enableHiding)}var{Menu:Oe}=de(r.privateApis);function Te({children:e}){return n.Children.toArray(e).filter(Boolean).map((e,t)=>(0,h.jsxs)(n.Fragment,{children:[t>0&&(0,h.jsx)(Oe.Separator,{}),e]},t))}var De=(0,n.forwardRef)(function({fieldId:e,view:t,fields:i,onChangeView:l,onHide:s,setOpenedFilter:o,canMove:c=!0,canInsertLeft:d=!0,canInsertRight:u=!0},m){const f=t.fields??[],g=f?.indexOf(e),p=t.sort?.field===e;let v=!1,b=!1,w=!1,_=[];const x=i.find(t=>t.id===e),{setIsShowingFilter:y}=(0,n.useContext)(Z);if(!x)return null;v=!1!==x.enableHiding,b=!1!==x.enableSorting;const S=x.header;if(_=!!x.filterBy&&x.filterBy?.operators||[],w=!(t.filters?.some(t=>e===t.field)||!x.hasElements&&!x.Edit||!1===x.filterBy||x.filterBy?.isPrimary),!(b||c||v||w))return S;const C=Ae(t,i).filter(e=>!f.includes(e.id)),E=(d||u)&&!!C.length,j=(0,a.isRTL)();return(0,h.jsxs)(Oe,{children:[(0,h.jsxs)(Oe.TriggerButton,{render:(0,h.jsx)(r.Button,{size:"compact",className:"dataviews-view-table-header-button",ref:m,variant:"tertiary"}),children:[S,t.sort&&p&&(0,h.jsx)("span",{"aria-hidden":"true",children:$[t.sort.direction]})]}),(0,h.jsx)(Oe.Popover,{style:{minWidth:"240px"},children:(0,h.jsxs)(Te,{children:[b&&(0,h.jsx)(Oe.Group,{children:H.map(n=>{const a=t.sort&&p&&t.sort.direction===n,i=`${e}-${n}`;return(0,h.jsx)(Oe.RadioItem,{name:"view-table-sorting",value:i,checked:a,onChange:()=>{l({...t,sort:{field:e,direction:n},showLevels:!1})},children:(0,h.jsx)(Oe.ItemLabel,{children:q[n]})},i)})}),w&&(0,h.jsx)(Oe.Group,{children:(0,h.jsx)(Oe.Item,{prefix:(0,h.jsx)(r.Icon,{icon:Le}),onClick:()=>{o(e),y(!0),l({...t,page:1,filters:[...t.filters||[],{field:e,value:void 0,operator:_[0]}]})},children:(0,h.jsx)(Oe.ItemLabel,{children:(0,a.__)("Add filter")})})}),(c||v||E)&&x&&(0,h.jsxs)(Oe.Group,{children:[c&&(0,h.jsx)(Oe.Item,{prefix:(0,h.jsx)(r.Icon,{icon:Fe}),disabled:j?g>=f.length-1:g<1,onClick:()=>{const n=j?g+1:g-1,a=[...f];a.splice(g,1),a.splice(n,0,e),l({...t,fields:a})},children:(0,h.jsx)(Oe.ItemLabel,{children:(0,a.__)("Move left")})}),c&&(0,h.jsx)(Oe.Item,{prefix:(0,h.jsx)(r.Icon,{icon:Me}),disabled:j?g<1:g>=f.length-1,onClick:()=>{const n=j?g-1:g+1,a=[...f];a.splice(g,1),a.splice(n,0,e),l({...t,fields:a})},children:(0,h.jsx)(Oe.ItemLabel,{children:(0,a.__)("Move right")})}),d&&!!C.length&&(0,h.jsxs)(Oe,{children:[(0,h.jsx)(Oe.SubmenuTriggerItem,{children:(0,h.jsx)(Oe.ItemLabel,{children:(0,a.__)("Insert left")})}),(0,h.jsx)(Oe.Popover,{children:C.map(e=>(0,h.jsx)(Oe.Item,{onClick:()=>{l({...t,fields:[...f.slice(0,g),e.id,...f.slice(g)]})},children:(0,h.jsx)(Oe.ItemLabel,{children:e.label})},e.id))})]}),u&&!!C.length&&(0,h.jsxs)(Oe,{children:[(0,h.jsx)(Oe.SubmenuTriggerItem,{children:(0,h.jsx)(Oe.ItemLabel,{children:(0,a.__)("Insert right")})}),(0,h.jsx)(Oe.Popover,{children:C.map(e=>(0,h.jsx)(Oe.Item,{onClick:()=>{l({...t,fields:[...f.slice(0,g+1),e.id,...f.slice(g+1)]})},children:(0,h.jsx)(Oe.ItemLabel,{children:e.label})},e.id))})]}),v&&x&&(0,h.jsx)(Oe.Item,{prefix:(0,h.jsx)(r.Icon,{icon:Pe}),onClick:()=>{s(x),l({...t,fields:f.filter(t=>t!==e)})},children:(0,h.jsx)(Oe.ItemLabel,{children:(0,a.__)("Hide column")})})]})]})})]})}),Be=De;function Re({item:e,isItemClickable:t,onClickItem:a,renderItemLink:i,className:r,children:l,...s}){if(!t(e))return(0,h.jsx)("div",{className:r,...s,children:l});if(i){const t=i({item:e,className:`${r} ${r}--clickable`,...s,children:l});return(0,n.cloneElement)(t,{onClick:e=>{e.stopPropagation(),t.props.onClick&&t.props.onClick(e)},onKeyDown:e=>{"Enter"!==e.key&&""!==e.key&&" "!==e.key||(e.stopPropagation(),t.props.onKeyDown&&t.props.onKeyDown(e))}})}const o=function({item:e,isItemClickable:t,onClickItem:n,className:a}){return t(e)&&n?{className:a?`${a} ${a}--clickable`:void 0,role:"button",tabIndex:0,onClick:t=>{t.stopPropagation(),n(e)},onKeyDown:t=>{"Enter"!==t.key&&""!==t.key&&" "!==t.key||(t.stopPropagation(),n(e))}}:{className:a}}({item:e,isItemClickable:t,onClickItem:a,className:r});return(0,h.jsx)("div",{...o,...s,children:l})}var ze=function({item:e,level:t,titleField:n,mediaField:a,descriptionField:i,onClickItem:r,renderItemLink:l,isItemClickable:s}){return(0,h.jsxs)(p.Stack,{direction:"row",gap:"sm",align:"flex-start",justify:"flex-start",children:[a&&(0,h.jsx)(Re,{item:e,isItemClickable:s,onClickItem:r,renderItemLink:l,className:"dataviews-view-table__cell-content-wrapper dataviews-column-primary__media","aria-label":s(e)&&(r||l)&&n?n.getValue?.({item:e}):void 0,children:(0,h.jsx)(a.render,{item:e,field:a,config:{sizes:"32px"}})}),(0,h.jsxs)(p.Stack,{direction:"column",align:"flex-start",className:"dataviews-view-table__primary-column-content",children:[n&&(0,h.jsxs)(Re,{item:e,isItemClickable:s,onClickItem:r,renderItemLink:l,className:"dataviews-view-table__cell-content-wrapper dataviews-title-field",children:[void 0!==t&&t>0&&(0,h.jsxs)("span",{className:"dataviews-view-table__level",children:[Array(t).fill("—").join(" ")," "]}),(0,h.jsx)(n.render,{item:e,field:n})]}),i&&(0,h.jsx)(i.render,{item:e,field:i})]})]})};function He(e,t){return e.reduce((e,n)=>{const a=t.getValue({item:n});return e.has(a)||e.set(a,[]),e.get(a)?.push(n),e},new Map)}var $e=(0,h.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,h.jsx)(v.Path,{d:"M16.5 7.5 10 13.9l-2.5-2.4-1 1 3.5 3.6 7.5-7.6z"})});function We({field:e,isVisible:t,onToggleVisibility:n}){return(0,h.jsx)(r.__experimentalItem,{onClick:e.enableHiding?n:void 0,children:(0,h.jsxs)(p.Stack,{direction:"row",gap:"xs",justify:"flex-start",align:"center",children:[(0,h.jsx)("div",{style:{height:24,width:24},children:t&&(0,h.jsx)(r.Icon,{icon:$e})}),(0,h.jsx)("span",{className:"dataviews-view-config__label",children:e.label})]})})}function qe({showLabel:e=!0}){const{view:t,fields:i,onChangeView:l}=(0,n.useContext)(Z),s=Ae(t,i);if(!s?.length)return null;const o=i.find(e=>e.id===t.titleField),c=i.find(e=>e.id===t.mediaField),d=i.find(e=>e.id===t.descriptionField),u=[{field:o,isVisibleFlag:"showTitle"},{field:c,isVisibleFlag:"showMedia"},{field:d,isVisibleFlag:"showDescription"}].filter(({field:e})=>!!e),m=t.fields??[],f=s.filter(e=>m.includes(e.id)).length,g=u.filter(({isVisibleFlag:e})=>t[e]??!0),v=g.length+f,b=1===v&&1===g.length;return(0,h.jsxs)(p.Stack,{direction:"column",className:"dataviews-field-control",children:[e&&(0,h.jsx)(r.BaseControl.VisualLabel,{children:(0,a.__)("Properties")}),(0,h.jsx)(p.Stack,{direction:"column",className:"dataviews-view-config__properties",children:(0,h.jsxs)(r.__experimentalItemGroup,{isBordered:!0,isSeparated:!0,size:"medium",children:[u.map(({field:e,isVisibleFlag:n})=>{const a=t[n]??!0,i=b&&a?{...e,enableHiding:!1}:e;return(0,h.jsx)(We,{field:i,isVisible:a,onToggleVisibility:()=>{l({...t,[n]:!a})}},e.id)}),s.map(e=>{const n=m.includes(e.id),a=1===v&&n?{...e,enableHiding:!1}:e;return(0,h.jsx)(We,{field:a,isVisible:n,onToggleVisibility:()=>{l({...t,fields:n?m.filter(t=>t!==e.id):[...m,e.id]})}},e.id)})]})})]})}function Ge({item:e,fields:t,column:n,align:a}){const i=t.find(e=>e.id===n);if(!i)return null;const r=ae("dataviews-view-table__cell-content-wrapper",{"dataviews-view-table__cell-align-end":"end"===a,"dataviews-view-table__cell-align-center":"center"===a});return(0,h.jsx)("div",{className:r,children:(0,h.jsx)(i.render,{item:e,field:i})})}function Ke({hasBulkActions:e,item:t,level:a,actions:i,fields:r,id:l,view:s,titleField:o,mediaField:c,descriptionField:d,selection:u,getItemId:m,isItemClickable:f,onClickItem:g,renderItemLink:p,onChangeSelection:v,isActionsColumnSticky:b,posinset:w}){const{paginationInfo:_}=(0,n.useContext)(Z),x=ye(i,t),y=x&&u.includes(l),{showTitle:S=!0,showMedia:C=!0,showDescription:E=!0,infiniteScrollEnabled:j}=s,k=(0,n.useRef)(!1),I=s.fields??[],V=o&&S||c&&C||d&&E;return(0,h.jsxs)("tr",{className:ae("dataviews-view-table__row",{"is-selected":x&&y,"has-bulk-actions":x}),onTouchStart:()=>{k.current=!0},"aria-setsize":j?_.totalItems:void 0,"aria-posinset":w,role:j?"article":void 0,onMouseDown:e=>{const t=(0,ie.isAppleOS)()?e.metaKey:e.ctrlKey;0===e.button&&t&&window.navigator.userAgent.toLowerCase().includes("firefox")&&e?.preventDefault()},onClick:e=>{x&&((0,ie.isAppleOS)()?e.metaKey:e.ctrlKey)&&!k.current&&"Range"!==document.getSelection()?.type&&v(u.includes(l)?u.filter(e=>l!==e):[...u,l])},children:[e&&(0,h.jsx)("td",{className:"dataviews-view-table__checkbox-column",children:(0,h.jsx)("div",{className:"dataviews-view-table__cell-content-wrapper",children:(0,h.jsx)(re,{item:t,selection:u,onChangeSelection:v,getItemId:m,titleField:o,disabled:!x})})}),V&&(0,h.jsx)("td",{children:(0,h.jsx)(ze,{item:t,level:a,titleField:S?o:void 0,mediaField:C?c:void 0,descriptionField:E?d:void 0,isItemClickable:f,onClickItem:g,renderItemLink:p})}),I.map(e=>{const{width:n,maxWidth:a,minWidth:i,align:l}=s.layout?.styles?.[e]??{};return(0,h.jsx)("td",{style:{width:n,maxWidth:a,minWidth:i},children:(0,h.jsx)(Ge,{fields:r,item:t,column:e,align:l})},e)}),!!i?.length&&(0,h.jsx)("td",{className:ae("dataviews-view-table__actions-column",{"dataviews-view-table__actions-column--sticky":!0,"dataviews-view-table__actions-column--stuck":b}),onClick:e=>e.stopPropagation(),children:(0,h.jsx)(he,{item:t,actions:i})})]})}var{Badge:Ue}=de(r.privateApis);function Ye(e,t){const n=[];for(let a=0,i=e.length;a<i;a+=t)n.push(e.slice(a,a+t));return n}var Ze=(0,n.forwardRef)(function e({view:t,selection:n,onChangeSelection:i,onClickItem:l,isItemClickable:s,renderItemLink:o,getItemId:c,item:d,actions:u,mediaField:m,titleField:f,descriptionField:v,regularFields:b,badgeFields:w,hasBulkActions:_,config:x,...y},S){const{showTitle:C=!0,showMedia:E=!0,showDescription:j=!0}=t,k=ye(u,d),I=c(d),V=(0,g.useInstanceId)(e),N=n.includes(I),L=m?.render?(0,h.jsx)(m.render,{item:d,field:m,config:x}):null,F=C&&f?.render?(0,h.jsx)(f.render,{item:d,field:f}):null,M=E&&L;let P,A;return s(d)&&l&&(F?(P={"aria-labelledby":`dataviews-view-grid__title-field-${V}`},A={id:`dataviews-view-grid__title-field-${V}`}):P={"aria-label":(0,a.__)("Navigate to item")}),(0,h.jsxs)(p.Stack,{direction:"column",...y,ref:S,className:ae(y.className,"dataviews-view-grid__row__gridcell","dataviews-view-grid__card",{"is-selected":k&&N}),onClickCapture:e=>{if(y.onClickCapture?.(e),(0,ie.isAppleOS)()?e.metaKey:e.ctrlKey){if(e.stopPropagation(),e.preventDefault(),!k)return;i(n.includes(I)?n.filter(e=>I!==e):[...n,I])}},children:[M&&(0,h.jsx)(Re,{item:d,isItemClickable:s,onClickItem:l,renderItemLink:o,className:"dataviews-view-grid__media",...P,children:L}),_&&M&&(0,h.jsx)(re,{item:d,selection:n,onChangeSelection:i,getItemId:c,titleField:f,disabled:!k}),!C&&M&&!!u?.length&&(0,h.jsx)("div",{className:"dataviews-view-grid__media-actions",children:(0,h.jsx)(he,{item:d,actions:u,isCompact:!0})}),C&&(0,h.jsxs)(p.Stack,{direction:"row",gap:"xs",className:"dataviews-view-grid__title-actions",children:[(0,h.jsx)(Re,{item:d,isItemClickable:s,onClickItem:l,renderItemLink:o,className:"dataviews-view-grid__title-field dataviews-title-field",...A,children:F}),!!u?.length&&(0,h.jsx)(he,{item:d,actions:u,isCompact:!0})]}),(0,h.jsxs)(p.Stack,{direction:"column",gap:"2xs",children:[j&&v?.render&&(0,h.jsx)(v.render,{item:d,field:v}),!!w?.length&&(0,h.jsx)(p.Stack,{direction:"row",className:"dataviews-view-grid__badge-fields",gap:"xs",wrap:"wrap",align:"top",justify:"flex-start",children:w.map(e=>(0,h.jsx)(Ue,{className:"dataviews-view-grid__field-value",children:(0,h.jsx)(e.render,{item:d,field:e})},e.id))}),!!b?.length&&(0,h.jsx)(p.Stack,{direction:"column",className:"dataviews-view-grid__fields",gap:"2xs",children:b.map(e=>(0,h.jsx)(r.Flex,{className:"dataviews-view-grid__field",gap:1,justify:"flex-start",expanded:!0,style:{height:"auto"},direction:"row",children:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(r.Tooltip,{text:e.label,children:(0,h.jsx)(r.FlexItem,{className:"dataviews-view-grid__field-name",children:e.header})}),(0,h.jsx)(r.FlexItem,{className:"dataviews-view-grid__field-value",style:{maxHeight:"none"},children:(0,h.jsx)(e.render,{item:d,field:e})})]})},e.id))})]})]})});function Xe({data:e,isInfiniteScroll:t,className:i,isLoading:l,view:s,fields:o,selection:c,onChangeSelection:d,onClickItem:u,isItemClickable:m,renderItemLink:f,getItemId:g,actions:p}){const{paginationInfo:v,resizeObserverRef:b}=(0,n.useContext)(Z),w=function(){const e=(0,n.useContext)(Z),t=e.view;return(0,n.useMemo)(()=>{const n=e.containerWidth,a=t.layout?.previewSize??230,i=Math.floor((n+32)/(a+32));return Math.max(1,i)},[e.containerWidth,t.layout?.previewSize])}(),_=Se(p,e),x=o.find(e=>e.id===s?.titleField),y=o.find(e=>e.id===s?.mediaField),S=o.find(e=>e.id===s?.descriptionField),C=s.fields??[],{regularFields:E,badgeFields:j}=C.reduce((e,t)=>{const n=o.find(e=>e.id===t);return n?(e[s.layout?.badgeFields?.includes(t)?"badgeFields":"regularFields"].push(n),e):e},{regularFields:[],badgeFields:[]}),k=Math.ceil(e.length/w);return(0,h.jsx)(r.Composite,{role:t?"feed":"grid",className:ae("dataviews-view-grid",i),focusWrap:!0,"aria-busy":l,"aria-rowcount":t?void 0:k,ref:b,children:Ye(e,w).map((e,n)=>(0,h.jsx)(r.Composite.Row,{render:(0,h.jsx)("div",{role:"row","aria-rowindex":n+1,"aria-label":(0,a.sprintf)(
/* translators: %d: The row number in the grid */
/* translators: %d: The row number in the grid */
(0,a.__)("Row %d"),n+1),className:"dataviews-view-grid__row",style:{gridTemplateColumns:`repeat( ${w}, minmax(0, 1fr) )`}}),children:e.map((e,a)=>{const i=n*w+a;return(0,h.jsx)(r.Composite.Item,{render:n=>(0,h.jsx)(Ze,{...n,role:t?"article":"gridcell","aria-setsize":t?v.totalItems:void 0,"aria-posinset":t?i+1:void 0,view:s,selection:c,onChangeSelection:d,onClickItem:u,isItemClickable:m,renderItemLink:f,getItemId:g,item:e,actions:p,mediaField:y,titleField:x,descriptionField:S,regularFields:E,badgeFields:j,hasBulkActions:_,config:{sizes:"900px"}})},g(e))})},n))})}var{Menu:Qe}=de(r.privateApis);function Je(e){return`${e}-item-wrapper`}function et(e){return`${e}-dropdown`}function tt({idPrefix:e,primaryAction:t,item:a}){const i=(0,se.useRegistry)(),[l,s]=(0,n.useState)(!1),o=function(e,t){return`${e}-primary-action-${t}`}(e,t.id),c="string"==typeof t.label?t.label:t.label([a]);return"RenderModal"in t?(0,h.jsx)("div",{role:"gridcell",children:(0,h.jsx)(r.Composite.Item,{id:o,render:(0,h.jsx)(r.Button,{disabled:!!t.disabled,accessibleWhenDisabled:!0,text:c,size:"small",onClick:()=>s(!0)}),children:l&&(0,h.jsx)(pe,{action:t,items:[a],closeModal:()=>s(!1)})})},t.id):(0,h.jsx)("div",{role:"gridcell",children:(0,h.jsx)(r.Composite.Item,{id:o,render:(0,h.jsx)(r.Button,{disabled:!!t.disabled,accessibleWhenDisabled:!0,size:"small",onClick:()=>{t.callback([a],{registry:i})},children:c})})},t.id)}function nt({view:e,actions:t,idPrefix:i,isSelected:l,item:s,titleField:o,mediaField:c,descriptionField:d,onSelect:u,otherFields:m,onDropdownTriggerKeyDown:f,posinset:g}){const{showTitle:v=!0,showMedia:b=!0,showDescription:w=!0,infiniteScrollEnabled:_}=e,x=(0,n.useRef)(null),y=`${i}-label`,S=`${i}-description`,C=(0,se.useRegistry)(),[E,j]=(0,n.useState)(!1),[k,I]=(0,n.useState)(null),V=({type:e})=>{j("mouseenter"===e)},{paginationInfo:N}=(0,n.useContext)(Z);(0,n.useEffect)(()=>{l&&x.current?.scrollIntoView({behavior:"auto",block:"nearest",inline:"nearest"})},[l]);const{primaryAction:L,eligibleActions:F}=(0,n.useMemo)(()=>{const e=t.filter(e=>!e.isEligible||e.isEligible(s));return{primaryAction:e.filter(e=>e.isPrimary)[0],eligibleActions:e}},[t,s]),M=L&&1===t.length,P=b&&c?.render?(0,h.jsx)("div",{className:"dataviews-view-list__media-wrapper",children:(0,h.jsx)(c.render,{item:s,field:c,config:{sizes:"52px"}})}):null,A=v&&o?.render?(0,h.jsx)(o.render,{item:s,field:o}):null,O=F?.length>0&&(0,h.jsxs)(p.Stack,{direction:"row",gap:"sm",className:"dataviews-view-list__item-actions",children:[L&&(0,h.jsx)(tt,{idPrefix:i,primaryAction:L,item:s}),!M&&(0,h.jsxs)("div",{role:"gridcell",children:[(0,h.jsxs)(Qe,{placement:"bottom-end",children:[(0,h.jsx)(Qe.TriggerButton,{render:(0,h.jsx)(r.Composite.Item,{id:et(i),render:(0,h.jsx)(r.Button,{size:"small",icon:le,label:(0,a.__)("Actions"),accessibleWhenDisabled:!0,disabled:!t.length,onKeyDown:f})})}),(0,h.jsx)(Qe.Popover,{children:(0,h.jsx)(ve,{actions:F,item:s,registry:C,setActiveModalAction:I})})]}),!!k&&(0,h.jsx)(pe,{action:k,items:[s],closeModal:()=>I(null)})]})]});return(0,h.jsx)(r.Composite.Row,{ref:x,render:(0,h.jsx)("div",{"aria-posinset":g,"aria-setsize":_?N.totalItems:void 0}),role:_?"article":"row",className:ae({"is-selected":l,"is-hovered":E}),onMouseEnter:V,onMouseLeave:V,children:(0,h.jsxs)(p.Stack,{direction:"row",className:"dataviews-view-list__item-wrapper",children:[(0,h.jsx)("div",{role:"gridcell",children:(0,h.jsx)(r.Composite.Item,{id:Je(i),"aria-pressed":l,"aria-labelledby":y,"aria-describedby":S,className:"dataviews-view-list__item",onClick:()=>u(s)})}),(0,h.jsxs)(p.Stack,{direction:"row",gap:"sm",justify:"start",align:"flex-start",style:{flex:1},children:[P,(0,h.jsxs)(p.Stack,{direction:"column",gap:"2xs",className:"dataviews-view-list__field-wrapper",children:[(0,h.jsxs)(p.Stack,{direction:"row",align:"center",children:[(0,h.jsx)("div",{className:"dataviews-title-field",id:y,style:{flex:1},children:A}),O]}),w&&d?.render&&(0,h.jsx)("div",{className:"dataviews-view-list__field",children:(0,h.jsx)(d.render,{item:s,field:d})}),(0,h.jsx)("div",{className:"dataviews-view-list__fields",id:S,children:m.map(e=>(0,h.jsxs)("div",{className:"dataviews-view-list__field",children:[(0,h.jsx)(r.VisuallyHidden,{as:"span",className:"dataviews-view-list__field-label",children:e.label}),(0,h.jsx)("span",{className:"dataviews-view-list__field-value",children:(0,h.jsx)(e.render,{item:s,field:e})})]},e.id))})]})]})]})})}function at(e){return!!e}function it({groupName:e,groupData:t,groupField:i,showLabel:r=!0,children:l}){const s=r?(0,n.createInterpolateElement)(
// translators: %s: The label of the field e.g. "Status".
// translators: %s: The label of the field e.g. "Status".
(0,a.sprintf)((0,a.__)("%s: <groupName />"),i.label).trim(),{groupName:(0,h.jsx)(i.render,{item:t[0],field:i})}):(0,h.jsx)(i.render,{item:t[0],field:i});return(0,h.jsxs)(p.Stack,{direction:"column",className:"dataviews-view-activity__group",children:[(0,h.jsx)("h3",{className:"dataviews-view-activity__group-header",children:s}),l]},e)}var rt=function(e){const{view:t,actions:a,item:i,titleField:l,mediaField:s,descriptionField:o,otherFields:c,posinset:d,onClickItem:u,renderItemLink:m,isItemClickable:f}=e,{showTitle:g=!0,showMedia:v=!0,showDescription:b=!0,infiniteScrollEnabled:w}=t,_=(0,n.useRef)(null),x=(0,se.useRegistry)(),{paginationInfo:y}=(0,n.useContext)(Z),{primaryActions:S,eligibleActions:C}=(0,n.useMemo)(()=>{const e=a.filter(e=>!e.isEligible||e.isEligible(i));return{primaryActions:e.filter(e=>e.isPrimary),eligibleActions:e}},[a,i]),E=t.layout?.density??"balanced",j=v&&"compact"!==E&&s?.render?(0,h.jsx)(s.render,{item:i,field:s,config:{sizes:"comfortable"===E?"32px":"24px"}}):null,k=(0,h.jsx)("div",{className:"dataviews-view-activity__item-type-icon",children:j||(0,h.jsx)("span",{className:"dataviews-view-activity__item-bullet","aria-hidden":"true"})}),I=g&&l?.render?(0,h.jsx)(l.render,{item:i,field:l}):null,V=(0,n.useMemo)(()=>"comfortable"===E?"sm":"xs",[E]);return(0,h.jsx)("div",{ref:_,role:w?"article":void 0,"aria-posinset":d,"aria-setsize":w?y.totalItems:void 0,className:ae("dataviews-view-activity__item","compact"===E&&"is-compact","balanced"===E&&"is-balanced","comfortable"===E&&"is-comfortable"),children:(0,h.jsxs)(p.Stack,{direction:"row",gap:"md",justify:"start",align:"flex-start",children:[(0,h.jsx)(p.Stack,{direction:"column",gap:"2xs",align:"center",className:"dataviews-view-activity__item-type",children:k}),(0,h.jsxs)(p.Stack,{direction:"column",gap:V,align:"flex-start",className:"dataviews-view-activity__item-content",children:[I&&(0,h.jsx)(Re,{item:i,isItemClickable:f,onClickItem:u,renderItemLink:m,className:"dataviews-view-activity__item-title",children:I}),b&&o&&(0,h.jsx)("div",{className:"dataviews-view-activity__item-description",children:(0,h.jsx)(o.render,{item:i,field:o})}),(0,h.jsx)("div",{className:"dataviews-view-activity__item-fields",children:c.map(e=>(0,h.jsxs)("div",{className:"dataviews-view-activity__item-field",children:[(0,h.jsx)(r.VisuallyHidden,{as:"span",className:"dataviews-view-activity__item-field-label",children:e.label}),(0,h.jsx)("span",{className:"dataviews-view-activity__item-field-value",children:(0,h.jsx)(e.render,{item:i,field:e})})]},e.id))}),!!S?.length&&(0,h.jsx)(we,{item:i,actions:S,registry:x,buttonVariant:"secondary"})]}),S.length<C.length&&(0,h.jsx)("div",{className:"dataviews-view-activity__item-actions",children:(0,h.jsx)(he,{item:i,actions:C,isCompact:!0})})]})})};function lt(e){return!!e}function st(t){const{data:n,fields:a,getItemId:i,view:r}=t,l=a.find(e=>e.id===r.titleField),s=a.find(e=>e.id===r.mediaField),o=a.find(e=>e.id===r.descriptionField),c=(r?.fields??[]).map(e=>a.find(t=>e===t.id)).filter(lt);return n.map((n,a)=>(0,e.createElement)(rt,{...t,key:i(n),item:n,mediaField:s,titleField:l,descriptionField:o,otherFields:c,posinset:r.infiniteScrollEnabled?a+1:void 0}))}function ot(e){return(0,n.useMemo)(()=>e?.every(e=>e.supportsBulk),[e])}var ct=(0,n.forwardRef)(({className:e,previewSize:t,...n},a)=>(0,h.jsx)("div",{ref:a,className:ae("dataviews-view-grid-items",e),style:{gridTemplateColumns:t&&`repeat(auto-fill, minmax(${t}px, 1fr))`},...n})),{Badge:dt}=de(r.privateApis);function ut({view:e,multiselect:t,selection:n,onChangeSelection:i,getItemId:l,item:s,mediaField:o,titleField:c,descriptionField:d,regularFields:u,badgeFields:m,config:f,posinset:g,setsize:v}){const{showTitle:b=!0,showMedia:w=!0,showDescription:_=!0}=e,x=l(s),y=n.includes(x),S=o?.render?(0,h.jsx)(o.render,{item:s,field:o,config:f}):null,C=b&&c?.render?(0,h.jsx)(c.render,{item:s,field:c}):null;return(0,h.jsxs)(r.Composite.Item,{"aria-label":c?c.getValue({item:s})||(0,a.__)("(no title)"):void 0,render:({children:e,...t})=>(0,h.jsx)(p.Stack,{direction:"column",children:e,...t}),role:"option","aria-posinset":g,"aria-setsize":v,className:ae("dataviews-view-picker-grid__card",{"is-selected":y}),"aria-selected":y,onClick:()=>{if(y)i(n.filter(e=>x!==e));else{const e=t?[...n,x]:[x];i(e)}},children:[w&&S&&(0,h.jsx)("div",{className:"dataviews-view-picker-grid__media",children:S}),w&&S&&(0,h.jsx)(re,{item:s,selection:n,onChangeSelection:i,getItemId:l,titleField:c,disabled:!1,"aria-hidden":!0,tabIndex:-1}),b&&(0,h.jsx)(p.Stack,{direction:"row",justify:"space-between",className:"dataviews-view-picker-grid__title-actions",children:(0,h.jsx)("div",{className:"dataviews-view-picker-grid__title-field dataviews-title-field",children:C})}),(0,h.jsxs)(p.Stack,{direction:"column",gap:"2xs",children:[_&&d?.render&&(0,h.jsx)(d.render,{item:s,field:d}),!!m?.length&&(0,h.jsx)(p.Stack,{direction:"row",className:"dataviews-view-picker-grid__badge-fields",gap:"xs",wrap:"wrap",align:"top",justify:"flex-start",children:m.map(e=>(0,h.jsx)(dt,{className:"dataviews-view-picker-grid__field-value",children:(0,h.jsx)(e.render,{item:s,field:e})},e.id))}),!!u?.length&&(0,h.jsx)(p.Stack,{direction:"column",className:"dataviews-view-picker-grid__fields",gap:"2xs",children:u.map(e=>(0,h.jsx)(r.Flex,{className:"dataviews-view-picker-grid__field",gap:1,justify:"flex-start",expanded:!0,style:{height:"auto"},direction:"row",children:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(r.FlexItem,{className:"dataviews-view-picker-grid__field-name",children:e.header}),(0,h.jsx)(r.FlexItem,{className:"dataviews-view-picker-grid__field-value",style:{maxHeight:"none"},children:(0,h.jsx)(e.render,{item:s,field:e})})]})},e.id))})]})]},x)}function mt({groupName:e,groupField:t,showLabel:n=!0,children:i}){const r=(0,g.useInstanceId)(mt,"dataviews-view-picker-grid-group__header");return(0,h.jsxs)(p.Stack,{direction:"column",gap:"xs",role:"group","aria-labelledby":r,children:[(0,h.jsx)("h3",{className:"dataviews-view-picker-grid-group__header",id:r,children:n?(0,a.sprintf)(
// translators: 1: The label of the field e.g. "Date". 2: The value of the field, e.g.: "May 2022".
// translators: 1: The label of the field e.g. "Date". 2: The value of the field, e.g.: "May 2022".
(0,a.__)("%1$s: %2$s"),t.label,e):e}),i]},e)}function ft({item:e,fields:t,column:n,align:a}){const i=t.find(e=>e.id===n);if(!i)return null;const r=ae("dataviews-view-table__cell-content-wrapper",{"dataviews-view-table__cell-align-end":"end"===a,"dataviews-view-table__cell-align-center":"center"===a});return(0,h.jsx)("div",{className:r,children:(0,h.jsx)(i.render,{item:e,field:i})})}function gt({item:e,fields:t,id:a,view:i,titleField:l,mediaField:s,descriptionField:o,selection:c,getItemId:d,onChangeSelection:u,multiselect:m,posinset:f}){const{paginationInfo:g}=(0,n.useContext)(Z),p=c.includes(a),[v,b]=(0,n.useState)(!1),{showTitle:w=!0,showMedia:_=!0,showDescription:x=!0,infiniteScrollEnabled:y}=i,S=()=>{b(!0)},C=()=>{b(!1)},E=i.fields??[],j=l&&w||s&&_||o&&x;return(0,h.jsxs)(r.Composite.Item,{render:({children:e,...t})=>(0,h.jsx)("tr",{className:ae("dataviews-view-table__row",{"is-selected":p,"is-hovered":v}),onMouseEnter:S,onMouseLeave:C,children:e,...t}),"aria-selected":p,"aria-setsize":g.totalItems||void 0,"aria-posinset":f,role:y?"article":"option",onClick:()=>{if(p)u(c.filter(e=>a!==e));else{const e=m?[...c,a]:[a];u(e)}},children:[(0,h.jsx)("td",{className:"dataviews-view-table__checkbox-column",role:"presentation",children:(0,h.jsx)("div",{className:"dataviews-view-table__cell-content-wrapper",children:(0,h.jsx)(re,{item:e,selection:c,onChangeSelection:u,getItemId:d,titleField:l,disabled:!1,"aria-hidden":!0,tabIndex:-1})})}),j&&(0,h.jsx)("td",{role:"presentation",children:(0,h.jsx)(ze,{item:e,titleField:w?l:void 0,mediaField:_?s:void 0,descriptionField:x?o:void 0,isItemClickable:()=>!1})}),E.map(n=>{const{width:a,maxWidth:r,minWidth:l,align:s}=i.layout?.styles?.[n]??{};return(0,h.jsx)("td",{style:{width:a,maxWidth:r,minWidth:l},role:"presentation",children:(0,h.jsx)(ft,{fields:t,item:e,column:n,align:s})},n)})]},a)}var pt=[{value:120,breakpoint:1},{value:170,breakpoint:1},{value:230,breakpoint:1},{value:290,breakpoint:1112},{value:350,breakpoint:1636},{value:430,breakpoint:588}];function vt(){const e=(0,n.useContext)(Z),t=e.view,i=pt.filter(t=>e.containerWidth>=t.breakpoint),l=t.layout?.previewSize??230,s=i.map((e,t)=>({...e,index:t})).filter(e=>e.value<=l).sort((e,t)=>t.value-e.value)[0]?.index??0,o=i.map((e,t)=>({value:t}));return(0,h.jsx)(r.RangeControl,{__next40pxDefaultSize:!0,showTooltip:!1,label:(0,a.__)("Preview size"),value:s,min:0,max:i.length-1,withInputField:!1,onChange:(n=0)=>{e.onChangeView({...t,layout:{...t.layout,previewSize:i[n].value}})},step:1,marks:o})}function ht(){const e=(0,n.useContext)(Z),t=e.view;return(0,h.jsxs)(r.__experimentalToggleGroupControl,{size:"__unstable-large",label:(0,a.__)("Density"),value:t.layout?.density||"balanced",onChange:n=>{e.onChangeView({...t,layout:{...t.layout,density:n}})},isBlock:!0,children:[(0,h.jsx)(r.__experimentalToggleGroupControlOption,{value:"comfortable",label:(0,a._x)("Comfortable","Density option for DataView layout")},"comfortable"),(0,h.jsx)(r.__experimentalToggleGroupControlOption,{value:"balanced",label:(0,a._x)("Balanced","Density option for DataView layout")},"balanced"),(0,h.jsx)(r.__experimentalToggleGroupControlOption,{value:"compact",label:(0,a._x)("Compact","Density option for DataView layout")},"compact")]})}var bt=[{type:K,label:(0,a.__)("Table"),component:function({actions:e,data:t,fields:i,getItemId:l,getItemLevel:s,isLoading:o=!1,onChangeView:c,onChangeSelection:d,selection:u,setOpenedFilter:m,onClickItem:f,isItemClickable:p,renderItemLink:v,view:b,className:w,empty:_}){const{containerRef:x}=(0,n.useContext)(Z),y=(0,n.useRef)(new Map),S=(0,n.useRef)(),[C,E]=(0,n.useState)(),j=Se(e,t),[k,I]=(0,n.useState)(null);(0,n.useEffect)(()=>{S.current&&(S.current.focus(),S.current=void 0)});const V=(0,n.useId)(),N=function({scrollContainerRef:e,enabled:t=!1}){const[i,r]=(0,n.useState)(!1),l=(0,g.useDebounce)((0,n.useCallback)(()=>{const t=e.current;var n;t&&r((n=t,(0,a.isRTL)()?Math.abs(n.scrollLeft)<=1:n.scrollLeft+n.clientWidth>=n.scrollWidth-1))},[e,r]),200);return(0,n.useEffect)(()=>"undefined"!=typeof window&&t&&e.current?(l(),e.current.addEventListener("scroll",l),window.addEventListener("resize",l),()=>{e.current?.removeEventListener("scroll",l),window.removeEventListener("resize",l)}):()=>{},[e,t]),i}({scrollContainerRef:x,enabled:!!e?.length});if(C)return S.current=C,void E(void 0);const L=e=>{const t=y.current.get(e.id),n=t?y.current.get(t.fallback):void 0;E(n?.node)},F=e=>{e.preventDefault(),e.stopPropagation();const t={getBoundingClientRect:()=>({x:e.clientX,y:e.clientY,top:e.clientY,left:e.clientX,right:e.clientX,bottom:e.clientY,width:0,height:0,toJSON:()=>({})})};window.requestAnimationFrame(()=>{I(t)})},M=!!t?.length,P=i.find(e=>e.id===b.titleField),A=i.find(e=>e.id===b.mediaField),O=i.find(e=>e.id===b.descriptionField),T=b.groupBy?.field?i.find(e=>e.id===b.groupBy?.field):null,D=T?He(t,T):null,{showTitle:B=!0,showMedia:R=!0,showDescription:z=!0}=b,H=P&&B||A&&R||O&&z,$=b.fields??[],q=(e,t)=>n=>{n?y.current.set(e,{node:n,fallback:$[t>0?t-1:1]}):y.current.delete(e)},G=b.infiniteScrollEnabled&&!D;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("table",{className:ae("dataviews-view-table",w,{[`has-${b.layout?.density}-density`]:b.layout?.density&&["compact","comfortable"].includes(b.layout.density),"has-bulk-actions":j}),"aria-busy":o,"aria-describedby":V,role:G?"feed":void 0,children:[(0,h.jsxs)("colgroup",{children:[j&&(0,h.jsx)("col",{className:"dataviews-view-table__col-checkbox"}),H&&(0,h.jsx)("col",{className:"dataviews-view-table__col-first-data"}),$.map((e,t)=>(0,h.jsx)("col",{className:ae(`dataviews-view-table__col-${e}`,{"dataviews-view-table__col-first-data":!H&&0===t})},`col-${e}`)),!!e?.length&&(0,h.jsx)("col",{className:"dataviews-view-table__col-actions"})]}),k&&(0,h.jsx)(r.Popover,{anchor:k,onClose:()=>I(null),placement:"bottom-start",children:(0,h.jsx)(qe,{showLabel:!1})}),(0,h.jsx)("thead",{onContextMenu:F,children:(0,h.jsxs)("tr",{className:"dataviews-view-table__row",children:[j&&(0,h.jsx)("th",{className:"dataviews-view-table__checkbox-column",scope:"col",onContextMenu:F,children:(0,h.jsx)(Ce,{selection:u,onChangeSelection:d,data:t,actions:e,getItemId:l})}),H&&(0,h.jsx)("th",{scope:"col",children:P&&(0,h.jsx)(Be,{ref:q(P.id,0),fieldId:P.id,view:b,fields:i,onChangeView:c,onHide:L,setOpenedFilter:m,canMove:!1,canInsertLeft:!1,canInsertRight:b.layout?.enableMoving??!0})}),$.map((e,t)=>{const{width:n,maxWidth:a,minWidth:r,align:l}=b.layout?.styles?.[e]??{},s=b.layout?.enableMoving??!0;return(0,h.jsx)("th",{style:{width:n,maxWidth:a,minWidth:r,textAlign:l},"aria-sort":b.sort?.direction&&b.sort?.field===e?W[b.sort.direction]:void 0,scope:"col",children:(0,h.jsx)(Be,{ref:q(e,t),fieldId:e,view:b,fields:i,onChangeView:c,onHide:L,setOpenedFilter:m,canMove:s,canInsertLeft:s,canInsertRight:s})},e)}),!!e?.length&&(0,h.jsx)("th",{className:ae("dataviews-view-table__actions-column",{"dataviews-view-table__actions-column--sticky":!0,"dataviews-view-table__actions-column--stuck":!N}),children:(0,h.jsx)("span",{className:"dataviews-view-table-header",children:(0,a.__)("Actions")})})]})}),M&&T&&D?Array.from(D.entries()).map(([t,n])=>(0,h.jsxs)("tbody",{children:[(0,h.jsx)("tr",{className:"dataviews-view-table__group-header-row",children:(0,h.jsx)("td",{colSpan:$.length+(H?1:0)+(j?1:0)+(e?.length?1:0),className:"dataviews-view-table__group-header-cell",children:!1===b.groupBy?.showLabel?t:(0,a.sprintf)(
// translators: 1: The label of the field e.g. "Date". 2: The value of the field, e.g.: "May 2022".
// translators: 1: The label of the field e.g. "Date". 2: The value of the field, e.g.: "May 2022".
(0,a.__)("%1$s: %2$s"),T.label,t)})}),n.map((t,n)=>(0,h.jsx)(Ke,{item:t,level:b.showLevels&&"function"==typeof s?s(t):void 0,hasBulkActions:j,actions:e,fields:i,id:l(t)||n.toString(),view:b,titleField:P,mediaField:A,descriptionField:O,selection:u,getItemId:l,onChangeSelection:d,onClickItem:f,renderItemLink:v,isItemClickable:p,isActionsColumnSticky:!N},l(t)))]},`group-${t}`)):(0,h.jsx)("tbody",{children:M&&t.map((t,n)=>(0,h.jsx)(Ke,{item:t,level:b.showLevels&&"function"==typeof s?s(t):void 0,hasBulkActions:j,actions:e,fields:i,id:l(t)||n.toString(),view:b,titleField:P,mediaField:A,descriptionField:O,selection:u,getItemId:l,onChangeSelection:d,onClickItem:f,renderItemLink:v,isItemClickable:p,isActionsColumnSticky:!N,posinset:G?n+1:void 0},l(t)))})]}),(0,h.jsxs)("div",{className:ae({"dataviews-loading":o,"dataviews-no-results":!M&&!o}),id:V,children:[!M&&(o?(0,h.jsx)("p",{children:(0,h.jsx)(r.Spinner,{})}):_),M&&o&&(0,h.jsx)("p",{className:"dataviews-loading-more",children:(0,h.jsx)(r.Spinner,{})})]})]})},icon:X,viewConfigOptions:ht},{type:U,label:(0,a.__)("Grid"),component:function({actions:e,data:t,fields:n,getItemId:i,isLoading:l,onChangeSelection:s,onClickItem:o,isItemClickable:c,renderItemLink:d,selection:u,view:m,className:f,empty:g}){const v=!!t?.length,b=m.groupBy?.field?n.find(e=>e.id===m.groupBy?.field):null,w=b?He(t,b):null,_=m.infiniteScrollEnabled&&!w,x={className:f,isLoading:l,view:m,fields:n,selection:u,onChangeSelection:s,onClickItem:o,isItemClickable:c,renderItemLink:d,getItemId:i,actions:e};return(0,h.jsxs)(h.Fragment,{children:[v&&b&&w&&(0,h.jsx)(p.Stack,{direction:"column",gap:"md",children:Array.from(w.entries()).map(([e,t])=>(0,h.jsxs)(p.Stack,{direction:"column",gap:"xs",children:[(0,h.jsx)("h3",{className:"dataviews-view-grid__group-header",children:!1===m.groupBy?.showLabel?e:(0,a.sprintf)(
// translators: 1: The label of the field e.g. "Date". 2: The value of the field, e.g.: "May 2022".
// translators: 1: The label of the field e.g. "Date". 2: The value of the field, e.g.: "May 2022".
(0,a.__)("%1$s: %2$s"),b.label,e)}),(0,h.jsx)(Xe,{...x,data:t,isInfiniteScroll:!1})]},e))}),v&&!w&&(0,h.jsx)(Xe,{...x,data:t,isInfiniteScroll:!!_}),!v&&(0,h.jsx)("div",{className:ae({"dataviews-loading":l,"dataviews-no-results":!l}),children:l?(0,h.jsx)("p",{children:(0,h.jsx)(r.Spinner,{})}):g}),v&&l&&(0,h.jsx)("p",{className:"dataviews-loading-more",children:(0,h.jsx)(r.Spinner,{})})]})},icon:Q,viewConfigOptions:vt},{type:"list",label:(0,a.__)("List"),component:function e(t){const{actions:i,data:l,fields:s,getItemId:o,isLoading:c,onChangeSelection:d,selection:u,view:m,className:f,empty:v}=t,b=(0,g.useInstanceId)(e,"view-list"),w=l?.findLast(e=>u.includes(o(e))),_=s.find(e=>e.id===m.titleField),x=s.find(e=>e.id===m.mediaField),y=s.find(e=>e.id===m.descriptionField),S=(m?.fields??[]).map(e=>s.find(t=>e===t.id)).filter(at),C=e=>d([o(e)]),E=(0,n.useCallback)(e=>`${b}-${o(e)}`,[b,o]),j=(0,n.useCallback)((e,t)=>t.startsWith(E(e)),[E]),[k,I]=(0,n.useState)(void 0);(0,n.useEffect)(()=>{w&&I(Je(E(w)))},[w,E]);const V=l.findIndex(e=>j(e,k??"")),N=(0,g.usePrevious)(V),L=-1!==V,F=(0,n.useCallback)((e,t)=>{const n=Math.min(l.length-1,Math.max(0,e));if(!l[n])return;const a=t(E(l[n]));I(a),document.getElementById(a)?.focus()},[l,E]);(0,n.useEffect)(()=>{!L&&void 0!==N&&-1!==N&&F(N,Je)},[L,F,N]);const M=(0,n.useCallback)(e=>{"ArrowDown"===e.key&&(e.preventDefault(),F(V+1,et)),"ArrowUp"===e.key&&(e.preventDefault(),F(V-1,et))},[F,V]),P=l?.length;if(!P)return(0,h.jsx)("div",{className:ae({"dataviews-loading":c,"dataviews-no-results":!P&&!c}),children:!P&&(c?(0,h.jsx)("p",{children:(0,h.jsx)(r.Spinner,{})}):v)});const A=m.groupBy?.field?s.find(e=>e.id===m.groupBy?.field):null,O=A?He(l,A):null;return P&&A&&O?(0,h.jsx)(r.Composite,{id:`${b}`,render:(0,h.jsx)("div",{}),className:"dataviews-view-list__group",role:"grid",activeId:k,setActiveId:I,children:(0,h.jsx)(p.Stack,{direction:"column",gap:"md",className:ae("dataviews-view-list",f),children:Array.from(O.entries()).map(([e,t])=>(0,h.jsxs)(p.Stack,{direction:"column",gap:"xs",children:[(0,h.jsx)("h3",{className:"dataviews-view-list__group-header",children:!1===m.groupBy?.showLabel?e:(0,a.sprintf)(
// translators: 1: The label of the field e.g. "Date". 2: The value of the field, e.g.: "May 2022".
// translators: 1: The label of the field e.g. "Date". 2: The value of the field, e.g.: "May 2022".
(0,a.__)("%1$s: %2$s"),A.label,e)}),t.map(e=>{const t=E(e);return(0,h.jsx)(nt,{view:m,idPrefix:t,actions:i,item:e,isSelected:e===w,onSelect:C,mediaField:x,titleField:_,descriptionField:y,otherFields:S,onDropdownTriggerKeyDown:M},t)})]},e))})}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(r.Composite,{id:b,render:(0,h.jsx)("div",{}),className:ae("dataviews-view-list",f,{[`has-${m.layout?.density}-density`]:m.layout?.density&&["compact","comfortable"].includes(m.layout.density)}),role:m.infiniteScrollEnabled?"feed":"grid",activeId:k,setActiveId:I,children:l.map((e,t)=>{const n=E(e);return(0,h.jsx)(nt,{view:m,idPrefix:n,actions:i,item:e,isSelected:e===w,onSelect:C,mediaField:x,titleField:_,descriptionField:y,otherFields:S,onDropdownTriggerKeyDown:M,posinset:m.infiniteScrollEnabled?t+1:void 0},n)})}),P&&c&&(0,h.jsx)("p",{className:"dataviews-loading-more",children:(0,h.jsx)(r.Spinner,{})})]})},icon:(0,a.isRTL)()?J:ee,viewConfigOptions:ht},{type:"activity",label:(0,a.__)("Activity"),component:function(e){const{empty:t,data:n,fields:a,isLoading:i,view:l,className:s}=e,o=n?.length;if(!o)return(0,h.jsx)("div",{className:ae({"dataviews-loading":i,"dataviews-no-results":!o&&!i}),children:!o&&(i?(0,h.jsx)("p",{children:(0,h.jsx)(r.Spinner,{})}):t)});const c=ae("dataviews-view-activity",s),d=l.groupBy?.field?a.find(e=>e.id===l.groupBy?.field):null,u=d?He(n,d):null,m=u?Array.from(u.entries()):[];return o&&d&&u?(0,h.jsx)(p.Stack,{direction:"column",gap:"xs",className:c,children:m.map(([t,n])=>(0,h.jsx)(it,{groupName:t,groupData:n,groupField:d,showLabel:!1!==l.groupBy?.showLabel,children:(0,h.jsx)(st,{...e,data:n})},t))}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:c,role:l.infiniteScrollEnabled?"feed":void 0,children:(0,h.jsx)(st,{...e})}),o&&i&&(0,h.jsx)("p",{className:"dataviews-loading-more",children:(0,h.jsx)(r.Spinner,{})})]})},icon:te,viewConfigOptions:ht},{type:"pickerGrid",label:(0,a.__)("Grid"),component:function({actions:e,data:t,fields:a,getItemId:i,isLoading:l,onChangeSelection:s,selection:o,view:c,className:d,empty:u}){const{resizeObserverRef:m,paginationInfo:f,itemListLabel:g}=(0,n.useContext)(Z),v=a.find(e=>e.id===c?.titleField),b=a.find(e=>e.id===c?.mediaField),w=a.find(e=>e.id===c?.descriptionField),_=c.fields??[],{regularFields:x,badgeFields:y}=_.reduce((e,t)=>{const n=a.find(e=>e.id===t);return n?(e[c.layout?.badgeFields?.includes(t)?"badgeFields":"regularFields"].push(n),e):e},{regularFields:[],badgeFields:[]}),S=!!t?.length,C=c.layout?.previewSize,E=ot(e),j="900px",k=c.groupBy?.field?a.find(e=>e.id===c.groupBy?.field):null,I=k?He(t,k):null,V=c.infiniteScrollEnabled&&!I,N=c?.page??1,L=c?.perPage??0,F=V?f?.totalItems:void 0;return(0,h.jsxs)(h.Fragment,{children:[S&&k&&I&&(0,h.jsx)(r.Composite,{virtualFocus:!0,orientation:"horizontal",role:"listbox","aria-multiselectable":E,className:ae("dataviews-view-picker-grid",d),"aria-label":g,render:({children:e,...t})=>(0,h.jsx)(p.Stack,{direction:"column",gap:"md",children:e,...t}),children:Array.from(I.entries()).map(([e,n])=>(0,h.jsx)(mt,{groupName:e,groupField:k,showLabel:!1!==c.groupBy?.showLabel,children:(0,h.jsx)(ct,{previewSize:C,style:{gridTemplateColumns:C&&`repeat(auto-fill, minmax(${C}px, 1fr))`},"aria-busy":l,ref:m,children:n.map(e=>{const n=(N-1)*L+t.indexOf(e)+1;return(0,h.jsx)(ut,{view:c,multiselect:E,selection:o,onChangeSelection:s,getItemId:i,item:e,mediaField:b,titleField:v,descriptionField:w,regularFields:x,badgeFields:y,config:{sizes:j},posinset:n,setsize:F},i(e))})})},e))}),S&&!I&&(0,h.jsx)(r.Composite,{render:(0,h.jsx)(ct,{className:ae("dataviews-view-picker-grid",d),previewSize:C,"aria-busy":l,ref:m}),virtualFocus:!0,orientation:"horizontal",role:"listbox","aria-multiselectable":E,"aria-label":g,children:t.map((e,t)=>{let n=V?t+1:void 0;return V||(n=(N-1)*L+t+1),(0,h.jsx)(ut,{view:c,multiselect:E,selection:o,onChangeSelection:s,getItemId:i,item:e,mediaField:b,titleField:v,descriptionField:w,regularFields:x,badgeFields:y,config:{sizes:j},posinset:n,setsize:F},i(e))})}),!S&&(0,h.jsx)("div",{className:ae({"dataviews-loading":l,"dataviews-no-results":!l}),children:l?(0,h.jsx)("p",{children:(0,h.jsx)(r.Spinner,{})}):u}),S&&l&&(0,h.jsx)("p",{className:"dataviews-loading-more",children:(0,h.jsx)(r.Spinner,{})})]})},icon:Q,viewConfigOptions:vt,isPicker:!0},{type:"pickerTable",label:(0,a.__)("Table"),component:function({actions:e,data:t,fields:i,getItemId:l,isLoading:s=!1,onChangeView:o,onChangeSelection:c,selection:d,setOpenedFilter:u,view:m,className:f,empty:g}){const p=(0,n.useRef)(new Map),v=(0,n.useRef)(),[b,w]=(0,n.useState)(),_=ot(e)??!1;(0,n.useEffect)(()=>{v.current&&(v.current.focus(),v.current=void 0)});const x=(0,n.useId)();if(b)return v.current=b,void w(void 0);const y=e=>{const t=p.current.get(e.id),n=t?p.current.get(t.fallback):void 0;w(n?.node)},S=!!t?.length,C=i.find(e=>e.id===m.titleField),E=i.find(e=>e.id===m.mediaField),j=i.find(e=>e.id===m.descriptionField),k=m.groupBy?.field?i.find(e=>e.id===m.groupBy?.field):null,I=k?He(t,k):null,{showTitle:V=!0,showMedia:N=!0,showDescription:L=!0}=m,F=C&&V||E&&N||j&&L,M=m.fields??[],P=(e,t)=>n=>{n?p.current.set(e,{node:n,fallback:M[t>0?t-1:1]}):p.current.delete(e)},A=m.infiniteScrollEnabled&&!I;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("table",{className:ae("dataviews-view-table","dataviews-view-picker-table",f,{[`has-${m.layout?.density}-density`]:m.layout?.density&&["compact","comfortable"].includes(m.layout.density)}),"aria-busy":s,"aria-describedby":x,role:A?"feed":"listbox",children:[(0,h.jsx)("thead",{role:"presentation",children:(0,h.jsxs)("tr",{className:"dataviews-view-table__row",role:"presentation",children:[(0,h.jsx)("th",{className:"dataviews-view-table__checkbox-column",children:_&&(0,h.jsx)(Ce,{selection:d,onChangeSelection:c,data:t,actions:e,getItemId:l})}),F&&(0,h.jsx)("th",{children:C&&(0,h.jsx)(Be,{ref:P(C.id,0),fieldId:C.id,view:m,fields:i,onChangeView:o,onHide:y,setOpenedFilter:u,canMove:!1})}),M.map((e,t)=>{const{width:n,maxWidth:a,minWidth:r,align:l}=m.layout?.styles?.[e]??{};return(0,h.jsx)("th",{style:{width:n,maxWidth:a,minWidth:r,textAlign:l},"aria-sort":m.sort?.direction&&m.sort?.field===e?W[m.sort.direction]:void 0,scope:"col",children:(0,h.jsx)(Be,{ref:P(e,t),fieldId:e,view:m,fields:i,onChangeView:o,onHide:y,setOpenedFilter:u,canMove:m.layout?.enableMoving??!0})},e)})]})}),S&&k&&I?Array.from(I.entries()).map(([e,t])=>(0,h.jsxs)(r.Composite,{virtualFocus:!0,orientation:"vertical",render:(0,h.jsx)("tbody",{role:"group"}),children:[(0,h.jsx)("tr",{className:"dataviews-view-table__group-header-row",role:"presentation",children:(0,h.jsx)("td",{colSpan:M.length+(F?1:0)+1,className:"dataviews-view-table__group-header-cell",role:"presentation",children:!1===m.groupBy?.showLabel?e:(0,a.sprintf)(
// translators: 1: The label of the field e.g. "Date". 2: The value of the field, e.g.: "May 2022".
// translators: 1: The label of the field e.g. "Date". 2: The value of the field, e.g.: "May 2022".
(0,a.__)("%1$s: %2$s"),k.label,e)})}),t.map((e,t)=>(0,h.jsx)(gt,{item:e,fields:i,id:l(e)||t.toString(),view:m,titleField:C,mediaField:E,descriptionField:j,selection:d,getItemId:l,onChangeSelection:c,multiselect:_},l(e)))]},`group-${e}`)):(0,h.jsx)(r.Composite,{render:(0,h.jsx)("tbody",{role:"presentation"}),virtualFocus:!0,orientation:"vertical",children:S&&t.map((e,t)=>(0,h.jsx)(gt,{item:e,fields:i,id:l(e)||t.toString(),view:m,titleField:C,mediaField:E,descriptionField:j,selection:d,getItemId:l,onChangeSelection:c,multiselect:_,posinset:t+1},l(e)))})]}),(0,h.jsxs)("div",{className:ae({"dataviews-loading":s,"dataviews-no-results":!S&&!s}),id:x,children:[!S&&(s?(0,h.jsx)("p",{children:(0,h.jsx)(r.Spinner,{})}):g),S&&s&&(0,h.jsx)("p",{className:"dataviews-loading-more",children:(0,h.jsx)(r.Spinner,{})})]})]})},icon:X,viewConfigOptions:ht,isPicker:!0}],{Menu:wt}=de(r.privateApis);function _t({filters:e,view:t,onChangeView:n,setOpenedFilter:a,triggerProps:i}){const r=e.filter(e=>!e.isVisible);return(0,h.jsxs)(wt,{children:[(0,h.jsx)(wt.TriggerButton,{...i}),(0,h.jsx)(wt.Popover,{children:r.map(e=>(0,h.jsx)(wt.Item,{onClick:()=>{a(e.field),n({...t,page:1,filters:[...t.filters||[],{field:e.field,value:void 0,operator:e.operators[0]}]})},children:(0,h.jsx)(wt.ItemLabel,{children:e.name})},e.field))})]})}var xt=(0,n.forwardRef)(function({filters:e,view:t,onChangeView:n,setOpenedFilter:i},l){if(!e.length||e.every(({isPrimary:e})=>e))return null;const s=e.filter(e=>!e.isVisible);return(0,h.jsx)(_t,{triggerProps:{render:(0,h.jsx)(r.Button,{accessibleWhenDisabled:!0,size:"compact",className:"dataviews-filters-button",variant:"tertiary",disabled:!s.length,ref:l}),children:(0,a.__)("Add filter")},filters:e,view:t,onChangeView:n,setOpenedFilter:i})});function yt({buttonRef:e,filtersCount:t,children:a}){return(0,n.useEffect)(()=>()=>{e.current?.focus()},[e]),(0,h.jsxs)(h.Fragment,{children:[a,!!t&&(0,h.jsx)("span",{className:"dataviews-filters-toggle__count",children:t})]})}var St=function(){const{filters:e,view:t,onChangeView:i,setOpenedFilter:l,isShowingFilter:s,setIsShowingFilter:o}=(0,n.useContext)(Z),c=(0,n.useRef)(null),d=(0,n.useCallback)(e=>{i(e),o(!0)},[i,o]),u=!!e.filter(e=>e.isVisible).length;if(0===e.length)return null;const m={label:(0,a.__)("Add filter"),"aria-expanded":!1,isPressed:!1},f={label:(0,a._x)("Filter","verb"),"aria-expanded":s,isPressed:s,onClick:()=>{s||l(null),o(!s)}},g=(0,h.jsx)(r.Button,{ref:c,className:"dataviews-filters__visibility-toggle",size:"compact",icon:Le,...u?f:m});return(0,h.jsx)("div",{className:"dataviews-filters__container-visibility-toggle",children:u?(0,h.jsx)(yt,{buttonRef:c,filtersCount:t.filters?.length,children:g}):(0,h.jsx)(_t,{filters:e,view:t,onChangeView:d,setOpenedFilter:l,triggerProps:{render:g}})})};function Ct(...e){}function Et(e,t){return"function"==typeof Object.hasOwn?Object.hasOwn(e,t):Object.prototype.hasOwnProperty.call(e,t)}function jt(...e){return(...t)=>{for(const n of e)"function"==typeof n&&n(...t)}}function kt(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function It(e){return e}function Vt(e,t){if(!e){if("string"!=typeof t)throw new Error("Invariant failed");throw new Error(t)}}function Nt(e){return e.disabled||!0===e["aria-disabled"]||"true"===e["aria-disabled"]}function Lt(e){const t={};for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}function Ft(...e){for(const t of e)if(void 0!==t)return t}function Mt(e,t){"function"==typeof e?e(t):e&&(e.current=t)}var Pt,At="undefined"!=typeof window&&!!(null==(Pt=window.document)?void 0:Pt.createElement);function Ot(e){return e?"self"in e?e.document:e.ownerDocument||document:document}function Tt(e,t=!1){var n;const{activeElement:a}=Ot(e);if(!(null==a?void 0:a.nodeName))return null;if("IFRAME"===a.tagName&&(null==(n=a.contentDocument)?void 0:n.body))return Tt(a.contentDocument.body,t);if(t){const e=a.getAttribute("aria-activedescendant");if(e){const t=Ot(a).getElementById(e);if(t)return t}}return a}function Dt(e,t){return e===t||e.contains(t)}function Bt(e){const t=e.tagName.toLowerCase();return"button"===t||!("input"!==t||!e.type)&&-1!==Rt.indexOf(e.type)}var Rt=["button","color","file","image","reset","submit"];function zt(e){try{const t=e instanceof HTMLInputElement&&null!==e.selectionStart,n="TEXTAREA"===e.tagName;return t||n||!1}catch(e){return!1}}function Ht(e){return e.isContentEditable||zt(e)}function $t(e){let t=0,n=0;if(zt(e))t=e.selectionStart||0,n=e.selectionEnd||0;else if(e.isContentEditable){const a=Ot(e).getSelection();if((null==a?void 0:a.rangeCount)&&a.anchorNode&&Dt(e,a.anchorNode)&&a.focusNode&&Dt(e,a.focusNode)){const i=a.getRangeAt(0),r=i.cloneRange();r.selectNodeContents(e),r.setEnd(i.startContainer,i.startOffset),t=r.toString().length,r.setEnd(i.endContainer,i.endOffset),n=r.toString().length}}return{start:t,end:n}}function Wt(e,t){const n=null==e?void 0:e.getAttribute("role");return n&&-1!==["dialog","menu","listbox","tree","grid"].indexOf(n)?n:t}function qt(e){if(!e)return null;const t=e=>"auto"===e||"scroll"===e;if(e.clientHeight&&e.scrollHeight>e.clientHeight){const{overflowY:n}=getComputedStyle(e);if(t(n))return e}else if(e.clientWidth&&e.scrollWidth>e.clientWidth){const{overflowX:n}=getComputedStyle(e);if(t(n))return e}return qt(e.parentElement)||document.scrollingElement||document.body}function Gt(e,...t){/text|search|password|tel|url/i.test(e.type)&&e.setSelectionRange(...t)}function Kt(){return!!At&&/mac|iphone|ipad|ipod/i.test(navigator.platform)}function Ut(){return At&&Kt()&&/apple/i.test(navigator.vendor)}function Yt(e){return Boolean(e.currentTarget&&!Dt(e.currentTarget,e.target))}function Zt(e){return e.target===e.currentTarget}function Xt(e,t){const n=new FocusEvent("blur",t),a=e.dispatchEvent(n),i={...t,bubbles:!0};return e.dispatchEvent(new FocusEvent("focusout",i)),a}function Qt(e,t){const n=new MouseEvent("click",t);return e.dispatchEvent(n)}function Jt(e,t){const n=t||e.currentTarget,a=e.relatedTarget;return!a||!Dt(n,a)}function en(e,t,n,a){const i=(e=>{if(a){const t=setTimeout(e,a);return()=>clearTimeout(t)}const t=requestAnimationFrame(e);return()=>cancelAnimationFrame(t)})(()=>{e.removeEventListener(t,r,!0),n()}),r=()=>{i(),n()};return e.addEventListener(t,r,{once:!0,capture:!0}),i}function tn(e,t,n,a=window){const i=[];try{a.document.addEventListener(e,t,n);for(const r of Array.from(a.frames))i.push(tn(e,t,n,r))}catch(e){}return()=>{try{a.document.removeEventListener(e,t,n)}catch(e){}for(const e of i)e()}}var nn={...t},an=nn.useId,rn=(nn.useDeferredValue,nn.useInsertionEffect),ln=At?e.useLayoutEffect:e.useEffect;function sn(t){const n=(0,e.useRef)(()=>{throw new Error("Cannot call an event handler while rendering.")});return rn?rn(()=>{n.current=t}):n.current=t,(0,e.useCallback)((...e)=>{var t;return null==(t=n.current)?void 0:t.call(n,...e)},[])}function on(...t){return(0,e.useMemo)(()=>{if(t.some(Boolean))return e=>{for(const n of t)Mt(n,e)}},t)}function cn(t){if(an){const e=an();return t||e}const[n,a]=(0,e.useState)(t);return ln(()=>{if(t||n)return;const e=Math.random().toString(36).slice(2,8);a(`id-${e}`)},[t,n]),t||n}function dn(t,n){const a=(0,e.useRef)(!1);(0,e.useEffect)(()=>{if(a.current)return t();a.current=!0},n),(0,e.useEffect)(()=>()=>{a.current=!1},[])}function un(e){return sn("function"==typeof e?e:()=>e)}function mn(t,n,a=[]){const i=(0,e.useCallback)(e=>(t.wrapElement&&(e=t.wrapElement(e)),n(e)),[...a,t.wrapElement]);return{...t,wrapElement:i}}var fn=!1,gn=!1,pn=0,vn=0;function hn(e){(function(e){const t=e.movementX||e.screenX-pn,n=e.movementY||e.screenY-vn;return pn=e.screenX,vn=e.screenY,t||n||!1})(e)&&(gn=!0)}function bn(){gn=!1}function wn(t){const n=e.forwardRef((e,n)=>t({...e,ref:n}));return n.displayName=t.displayName||t.name,n}function xn(t,n){return e.memo(t,n)}function yn(t,n){const{wrapElement:a,render:i,...r}=n,l=on(n.ref,function(t){return function(t){return!!t&&!!(0,e.isValidElement)(t)&&("ref"in t.props||"ref"in t)}(t)?{...t.props}.ref||t.ref:null}(i));let s;if(e.isValidElement(i)){const t={...i.props,ref:l};s=e.cloneElement(i,function(e,t){const n={...e};for(const a in t){if(!Et(t,a))continue;if("className"===a){const a="className";n[a]=e[a]?`${e[a]} ${t[a]}`:t[a];continue}if("style"===a){const a="style";n[a]=e[a]?{...e[a],...t[a]}:t[a];continue}const i=t[a];if("function"==typeof i&&a.startsWith("on")){const t=e[a];if("function"==typeof t){n[a]=(...e)=>{i(...e),t(...e)};continue}}n[a]=i}return n}(r,t))}else s=i?i(r):(0,h.jsx)(t,{...r});return a?a(s):s}function Sn(e){const t=(t={})=>e(t);return t.displayName=e.name,t}function Cn(t=[],n=[]){const a=e.createContext(void 0),i=e.createContext(void 0),r=()=>e.useContext(a),l=e=>t.reduceRight((t,n)=>(0,h.jsx)(n,{...e,children:t}),(0,h.jsx)(a.Provider,{...e}));return{context:a,scopedContext:i,useContext:r,useScopedContext:(t=!1)=>{const n=e.useContext(i),a=r();return t?n:n||a},useProviderContext:()=>{const t=e.useContext(i),n=r();if(!t||t!==n)return n},ContextProvider:l,ScopedContextProvider:e=>(0,h.jsx)(l,{...e,children:n.reduceRight((t,n)=>(0,h.jsx)(n,{...e,children:t}),(0,h.jsx)(i.Provider,{...e}))})}}var En=Cn(),jn=En.useContext,kn=(En.useScopedContext,En.useProviderContext,Cn([En.ContextProvider],[En.ScopedContextProvider])),In=kn.useContext,Vn=(kn.useScopedContext,kn.useProviderContext),Nn=kn.ContextProvider,Ln=kn.ScopedContextProvider,Fn=(0,e.createContext)(void 0),Mn=(0,e.createContext)(void 0),Pn=((0,e.createContext)(null),(0,e.createContext)(null),Cn([Nn],[Ln])),An=Pn.useContext;function On(e,t){const n=e.__unstableInternals;return Vt(n,"Invalid store"),n[t]}function Tn(e,...t){let n=e,a=n,i=Symbol(),r=Ct;const l=new Set,s=new Set,o=new Set,c=new Set,d=new Set,u=new WeakMap,m=new WeakMap,f=(e,t,n=c)=>(n.add(t),m.set(t,e),()=>{var e;null==(e=u.get(t))||e(),u.delete(t),m.delete(t),n.delete(t)}),g=(e,r,l=!1)=>{var o;if(!Et(n,e))return;const f=(g=r,p=n[e],function(e){return"function"==typeof e}(g)?g(function(e){return"function"==typeof e}(p)?p():p):g);var g,p;if(f===n[e])return;if(!l)for(const n of t)null==(o=null==n?void 0:n.setState)||o.call(n,e,f);const v=n;n={...n,[e]:f};const h=Symbol();i=h,s.add(e);const b=(t,a,i)=>{var r;const l=m.get(t);l&&!l.some(t=>i?i.has(t):t===e)||(null==(r=u.get(t))||r(),u.set(t,t(n,a)))};for(const e of c)b(e,v);queueMicrotask(()=>{if(i!==h)return;const e=n;for(const e of d)b(e,a,s);a=e,s.clear()})},p={getState:()=>n,setState:g,__unstableInternals:{setup:e=>(o.add(e),()=>o.delete(e)),init:()=>{const e=l.size,a=Symbol();l.add(a);const i=()=>{l.delete(a),l.size||r()};if(e)return i;const s=(c=n,Object.keys(c)).map(e=>jt(...t.map(t=>{var n;const a=null==(n=null==t?void 0:t.getState)?void 0:n.call(t);if(a&&Et(a,e))return zn(t,[e],t=>{g(e,t[e],!0)})})));var c;const d=[];for(const e of o)d.push(e());const u=t.map(Bn);return r=jt(...s,...d,...u),i},subscribe:(e,t)=>f(e,t),sync:(e,t)=>(u.set(t,t(n,n)),f(e,t)),batch:(e,t)=>(u.set(t,t(n,a)),f(e,t,d)),pick:e=>Tn(function(e,t){const n={};for(const a of t)Et(e,a)&&(n[a]=e[a]);return n}(n,e),p),omit:e=>Tn(function(e,t){const n={...e};for(const e of t)Et(n,e)&&delete n[e];return n}(n,e),p)}};return p}function Dn(e,...t){if(e)return On(e,"setup")(...t)}function Bn(e,...t){if(e)return On(e,"init")(...t)}function Rn(e,...t){if(e)return On(e,"subscribe")(...t)}function zn(e,...t){if(e)return On(e,"sync")(...t)}function Hn(e,...t){if(e)return On(e,"batch")(...t)}function $n(e,...t){if(e)return On(e,"omit")(...t)}function Wn(...e){var t;const n={};for(const a of e){const e=null==(t=null==a?void 0:a.getState)?void 0:t.call(a);e&&Object.assign(n,e)}const a=Tn(n,...e);return Object.assign({},...e,a)}Pn.useScopedContext,Pn.useProviderContext,Pn.ContextProvider,Pn.ScopedContextProvider;var qn=i(888),{useSyncExternalStore:Gn}=qn;function Kn(t,n=It){const a=e.useCallback(e=>t?Rn(t,null,e):()=>{},[t]),i=()=>{const e="string"==typeof n?n:null,a="function"==typeof n?n:null,i=null==t?void 0:t.getState();return a?a(i):i&&e&&Et(i,e)?i[e]:void 0};return Gn(a,i,i)}function Un(t,n){const a=e.useRef({}),i=e.useCallback(e=>t?Rn(t,null,e):()=>{},[t]),r=()=>{const e=null==t?void 0:t.getState();let i=!1;const r=a.current;for(const t in n){const a=n[t];if("function"==typeof a){const n=a(e);n!==r[t]&&(r[t]=n,i=!0)}if("string"==typeof a){if(!e)continue;if(!Et(e,a))continue;const n=e[a];n!==r[t]&&(r[t]=n,i=!0)}}return i&&(a.current={...r}),a.current};return Gn(i,r,r)}function Yn(t,n,a,i){const r=Et(n,a)?n[a]:void 0,l=i?n[i]:void 0,s=function(t){const n=(0,e.useRef)(t);return ln(()=>{n.current=t}),n}({value:r,setValue:l});ln(()=>zn(t,[a],(e,t)=>{const{value:n,setValue:i}=s.current;i&&e[a]!==t[a]&&e[a]!==n&&i(e[a])}),[t,a]),ln(()=>{if(void 0!==r)return t.setState(a,r),Hn(t,[a],()=>{void 0!==r&&t.setState(a,r)})})}function Zn(e,t,n){return function(e,t,n){return dn(t,[n.store,n.disclosure]),Yn(e,n,"open","setOpen"),Yn(e,n,"mounted","setMounted"),Yn(e,n,"animated"),Object.assign(e,{disclosure:n.disclosure})}(e,t,n)}function Xn(e,t,n){return Yn(e=function(e,t,n){return dn(t,[n.store]),Yn(e,n,"items","setItems"),e}(e,t,n),n,"activeId","setActiveId"),Yn(e,n,"includesBaseElement"),Yn(e,n,"virtualFocus"),Yn(e,n,"orientation"),Yn(e,n,"rtl"),Yn(e,n,"focusLoop"),Yn(e,n,"focusWrap"),Yn(e,n,"focusShift"),e}function Qn(e){const t=[];for(const n of e)t.push(...n);return t}function Jn(e){return e.slice().reverse()}function ea(e={}){var t;e.store;const n=null==(t=e.store)?void 0:t.getState(),a=Ft(e.items,null==n?void 0:n.items,e.defaultItems,[]),i=new Map(a.map(e=>[e.id,e])),r={items:a,renderedItems:Ft(null==n?void 0:n.renderedItems,[])},l=null==(s=e.store)?void 0:s.__unstablePrivateStore;var s;const o=Tn({items:a,renderedItems:r.renderedItems},l),c=Tn(r,e.store),d=e=>{const t=function(e,t){const n=e.map((e,t)=>[t,e]);let a=!1;return n.sort(([e,n],[i,r])=>{const l=t(n),s=t(r);return l===s?0:l&&s?function(e,t){return Boolean(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_PRECEDING)}(l,s)?(e>i&&(a=!0),-1):(e<i&&(a=!0),1):0}),a?n.map(([e,t])=>t):e}(e,e=>e.element);o.setState("renderedItems",t),c.setState("renderedItems",t)};Dn(c,()=>Bn(o)),Dn(o,()=>Hn(o,["items"],e=>{c.setState("items",e.items)})),Dn(o,()=>Hn(o,["renderedItems"],e=>{let t=!0,n=requestAnimationFrame(()=>{const{renderedItems:t}=c.getState();e.renderedItems!==t&&d(e.renderedItems)});if("function"!=typeof IntersectionObserver)return()=>cancelAnimationFrame(n);const a=function(e){var t;const n=e.find(e=>!!e.element),a=[...e].reverse().find(e=>!!e.element);let i=null==(t=null==n?void 0:n.element)?void 0:t.parentElement;for(;i&&(null==a?void 0:a.element);){if(a&&i.contains(a.element))return i;i=i.parentElement}return Ot(i).body}(e.renderedItems),i=new IntersectionObserver(()=>{t?t=!1:(cancelAnimationFrame(n),n=requestAnimationFrame(()=>d(e.renderedItems)))},{root:a});for(const t of e.renderedItems)t.element&&i.observe(t.element);return()=>{cancelAnimationFrame(n),i.disconnect()}}));const u=(e,t,n=!1)=>{let a;return t(t=>{const n=t.findIndex(({id:t})=>t===e.id),r=t.slice();if(-1!==n){a=t[n];const l={...a,...e};r[n]=l,i.set(e.id,l)}else r.push(e),i.set(e.id,e);return r}),()=>{t(t=>{if(!a)return n&&i.delete(e.id),t.filter(({id:t})=>t!==e.id);const r=t.findIndex(({id:t})=>t===e.id);if(-1===r)return t;const l=t.slice();return l[r]=a,i.set(e.id,a),l})}},m=e=>u(e,e=>o.setState("items",e),!0);return{...c,registerItem:m,renderItem:e=>jt(m(e),u(e,e=>o.setState("renderedItems",e))),item:e=>{if(!e)return null;let t=i.get(e);if(!t){const{items:n}=o.getState();t=n.find(t=>t.id===e),t&&i.set(e,t)}return t||null},__unstablePrivateStore:o}}var ta={id:null};function na(e,t){return e.find(e=>t?!e.disabled&&e.id!==t:!e.disabled)}function aa(e,t){return e.filter(e=>e.rowId===t)}function ia(e){const t=[];for(const n of e){const e=t.find(e=>{var t;return(null==(t=e[0])?void 0:t.rowId)===n.rowId});e?e.push(n):t.push([n])}return t}function ra(e){let t=0;for(const{length:n}of e)n>t&&(t=n);return t}function la(e){return{id:"__EMPTY_ITEM__",disabled:!0,rowId:e}}var sa=Ut()&&At&&!!navigator.maxTouchPoints;function oa({tag:e,...t}={}){const n=Wn(t.store,function(e,...t){if(e)return On(e,"pick")(...t)}(e,["value","rtl"])),a=null==e?void 0:e.getState(),i=null==n?void 0:n.getState(),r=Ft(t.activeId,null==i?void 0:i.activeId,t.defaultActiveId,null),l=function(e={}){var t;const n=null==(t=e.store)?void 0:t.getState(),a=ea(e),i=Ft(e.activeId,null==n?void 0:n.activeId,e.defaultActiveId),r=Tn({...a.getState(),id:Ft(e.id,null==n?void 0:n.id,`id-${Math.random().toString(36).slice(2,8)}`),activeId:i,baseElement:Ft(null==n?void 0:n.baseElement,null),includesBaseElement:Ft(e.includesBaseElement,null==n?void 0:n.includesBaseElement,null===i),moves:Ft(null==n?void 0:n.moves,0),orientation:Ft(e.orientation,null==n?void 0:n.orientation,"both"),rtl:Ft(e.rtl,null==n?void 0:n.rtl,!1),virtualFocus:Ft(e.virtualFocus,null==n?void 0:n.virtualFocus,!1),focusLoop:Ft(e.focusLoop,null==n?void 0:n.focusLoop,!1),focusWrap:Ft(e.focusWrap,null==n?void 0:n.focusWrap,!1),focusShift:Ft(e.focusShift,null==n?void 0:n.focusShift,!1)},a,e.store);Dn(r,()=>zn(r,["renderedItems","activeId"],e=>{r.setState("activeId",t=>{var n;return void 0!==t?t:null==(n=na(e.renderedItems))?void 0:n.id})}));const l=(e="next",t={})=>{var n,a;const i=r.getState(),{skip:l=0,activeId:s=i.activeId,focusShift:o=i.focusShift,focusLoop:c=i.focusLoop,focusWrap:d=i.focusWrap,includesBaseElement:u=i.includesBaseElement,renderedItems:m=i.renderedItems,rtl:f=i.rtl}=t,g="up"===e||"down"===e,p="next"===e||"down"===e,v=p?f&&!g:!f||g,h=o&&!l;let b=g?Qn(function(e,t,n){const a=ra(e);for(const i of e)for(let e=0;e<a;e+=1){const a=i[e];if(!a||n&&a.disabled){const a=0===e&&n?na(i):i[e-1];i[e]=a&&t!==a.id&&n?a:la(null==a?void 0:a.rowId)}}return e}(ia(m),s,h)):m;if(b=v?Jn(b):b,b=g?function(e){const t=ia(e),n=ra(t),a=[];for(let e=0;e<n;e+=1)for(const n of t){const t=n[e];t&&a.push({...t,rowId:t.rowId?`${e}`:void 0})}return a}(b):b,null==s)return null==(n=na(b))?void 0:n.id;const w=b.find(e=>e.id===s);if(!w)return null==(a=na(b))?void 0:a.id;const _=b.some(e=>e.rowId),x=b.indexOf(w),y=b.slice(x+1),S=aa(y,w.rowId);if(l){const e=function(e,t){return e.filter(e=>t?!e.disabled&&e.id!==t:!e.disabled)}(S,s),t=e.slice(l)[0]||e[e.length-1];return null==t?void 0:t.id}const C=c&&(g?"horizontal"!==c:"vertical"!==c),E=_&&d&&(g?"horizontal"!==d:"vertical"!==d),j=p?(!_||g)&&C&&u:!!g&&u;if(C){const e=function(e,t,n=!1){const a=e.findIndex(e=>e.id===t);return[...e.slice(a+1),...n?[ta]:[],...e.slice(0,a)]}(E&&!j?b:aa(b,w.rowId),s,j),t=na(e,s);return null==t?void 0:t.id}if(E){const e=na(j?S:y,s);return j?(null==e?void 0:e.id)||null:null==e?void 0:e.id}const k=na(S,s);return!k&&j?null:null==k?void 0:k.id};return{...a,...r,setBaseElement:e=>r.setState("baseElement",e),setActiveId:e=>r.setState("activeId",e),move:e=>{void 0!==e&&(r.setState("activeId",e),r.setState("moves",e=>e+1))},first:()=>{var e;return null==(e=na(r.getState().renderedItems))?void 0:e.id},last:()=>{var e;return null==(e=na(Jn(r.getState().renderedItems)))?void 0:e.id},next:e=>(void 0!==e&&"number"==typeof e&&(e={skip:e}),l("next",e)),previous:e=>(void 0!==e&&"number"==typeof e&&(e={skip:e}),l("previous",e)),down:e=>(void 0!==e&&"number"==typeof e&&(e={skip:e}),l("down",e)),up:e=>(void 0!==e&&"number"==typeof e&&(e={skip:e}),l("up",e))}}({...t,activeId:r,includesBaseElement:Ft(t.includesBaseElement,null==i?void 0:i.includesBaseElement,!0),orientation:Ft(t.orientation,null==i?void 0:i.orientation,"vertical"),focusLoop:Ft(t.focusLoop,null==i?void 0:i.focusLoop,!0),focusWrap:Ft(t.focusWrap,null==i?void 0:i.focusWrap,!0),virtualFocus:Ft(t.virtualFocus,null==i?void 0:i.virtualFocus,!0)}),s=function({popover:e,...t}={}){const n=Wn(t.store,$n(e,["arrowElement","anchorElement","contentElement","popoverElement","disclosureElement"])),a=null==n?void 0:n.getState(),i=function(e={}){return function(e={}){const t=Wn(e.store,$n(e.disclosure,["contentElement","disclosureElement"])),n=null==t?void 0:t.getState(),a=Ft(e.open,null==n?void 0:n.open,e.defaultOpen,!1),i=Ft(e.animated,null==n?void 0:n.animated,!1),r=Tn({open:a,animated:i,animating:!!i&&a,mounted:a,contentElement:Ft(null==n?void 0:n.contentElement,null),disclosureElement:Ft(null==n?void 0:n.disclosureElement,null)},t);return Dn(r,()=>zn(r,["animated","animating"],e=>{e.animated||r.setState("animating",!1)})),Dn(r,()=>Rn(r,["open"],()=>{r.getState().animated&&r.setState("animating",!0)})),Dn(r,()=>zn(r,["open","animating"],e=>{r.setState("mounted",e.open||e.animating)})),{...r,disclosure:e.disclosure,setOpen:e=>r.setState("open",e),show:()=>r.setState("open",!0),hide:()=>r.setState("open",!1),toggle:()=>r.setState("open",e=>!e),stopAnimation:()=>r.setState("animating",!1),setContentElement:e=>r.setState("contentElement",e),setDisclosureElement:e=>r.setState("disclosureElement",e)}}(e)}({...t,store:n}),r=Ft(t.placement,null==a?void 0:a.placement,"bottom"),l=Tn({...i.getState(),placement:r,currentPlacement:r,anchorElement:Ft(null==a?void 0:a.anchorElement,null),popoverElement:Ft(null==a?void 0:a.popoverElement,null),arrowElement:Ft(null==a?void 0:a.arrowElement,null),rendered:Symbol("rendered")},i,n);return{...i,...l,setAnchorElement:e=>l.setState("anchorElement",e),setPopoverElement:e=>l.setState("popoverElement",e),setArrowElement:e=>l.setState("arrowElement",e),render:()=>l.setState("rendered",Symbol("rendered"))}}({...t,placement:Ft(t.placement,null==i?void 0:i.placement,"bottom-start")}),o=Ft(t.value,null==i?void 0:i.value,t.defaultValue,""),c=Ft(t.selectedValue,null==i?void 0:i.selectedValue,null==a?void 0:a.values,t.defaultSelectedValue,""),d=Array.isArray(c),u={...l.getState(),...s.getState(),value:o,selectedValue:c,resetValueOnSelect:Ft(t.resetValueOnSelect,null==i?void 0:i.resetValueOnSelect,d),resetValueOnHide:Ft(t.resetValueOnHide,null==i?void 0:i.resetValueOnHide,d&&!e),activeValue:null==i?void 0:i.activeValue},m=Tn(u,l,s,n);return sa&&Dn(m,()=>zn(m,["virtualFocus"],()=>{m.setState("virtualFocus",!1)})),Dn(m,()=>{if(e)return jt(zn(m,["selectedValue"],t=>{Array.isArray(t.selectedValue)&&e.setValues(t.selectedValue)}),zn(e,["values"],e=>{m.setState("selectedValue",e.values)}))}),Dn(m,()=>zn(m,["resetValueOnHide","mounted"],e=>{e.resetValueOnHide&&(e.mounted||m.setState("value",o))})),Dn(m,()=>zn(m,["open"],e=>{e.open||(m.setState("activeId",r),m.setState("moves",0))})),Dn(m,()=>zn(m,["moves","activeId"],(e,t)=>{e.moves===t.moves&&m.setState("activeValue",void 0)})),Dn(m,()=>Hn(m,["moves","renderedItems"],(e,t)=>{if(e.moves===t.moves)return;const{activeId:n}=m.getState(),a=l.item(n);m.setState("activeValue",null==a?void 0:a.value)})),{...s,...l,...m,tag:e,setValue:e=>m.setState("value",e),resetValue:()=>m.setState("value",u.value),setSelectedValue:e=>m.setState("selectedValue",e)}}function ca(t={}){t=function(e){const t=An();return function(e){return{id:cn(e.id),...e}}(e={...e,tag:void 0!==e.tag?e.tag:t})}(t);const[n,a]=function(t,n){const[a,i]=e.useState(()=>t(n));ln(()=>Bn(a),[a]);const r=e.useCallback(e=>Kn(a,e),[a]);return[e.useMemo(()=>({...a,useState:r}),[a,r]),sn(()=>{i(e=>t({...n,...e.getState()}))})]}(oa,t);return function(e,t,n){return dn(t,[n.tag]),Yn(e,n,"value","setValue"),Yn(e,n,"selectedValue","setSelectedValue"),Yn(e,n,"resetValueOnHide"),Yn(e,n,"resetValueOnSelect"),Object.assign(Xn(function(e,t,n){return dn(t,[n.popover]),Yn(e,n,"placement"),Zn(e,t,n)}(e,t,n),t,n),{tag:n.tag})}(n,a,t)}var da=Cn(),ua=(da.useContext,da.useScopedContext,da.useProviderContext),ma=Cn([da.ContextProvider],[da.ScopedContextProvider]),fa=(ma.useContext,ma.useScopedContext,ma.useProviderContext,ma.ContextProvider),ga=ma.ScopedContextProvider,pa=((0,e.createContext)(void 0),(0,e.createContext)(void 0),Cn([fa],[ga])),va=(pa.useContext,pa.useScopedContext,pa.useProviderContext),ha=pa.ContextProvider,ba=pa.ScopedContextProvider,wa=(0,e.createContext)(void 0),_a=Cn([ha,Nn],[ba,Ln]),xa=_a.useContext,ya=_a.useScopedContext,Sa=_a.useProviderContext,Ca=_a.ContextProvider,Ea=_a.ScopedContextProvider,ja=(0,e.createContext)(void 0),ka=(0,e.createContext)(!1);function Ia(e={}){const t=ca(e);return(0,h.jsx)(Ca,{value:t,children:e.children})}var Va=Sn(function({store:e,...t}){const n=Sa();Vt(e=e||n,!1);const a=e.useState(e=>{var t;return null==(t=e.baseElement)?void 0:t.id});return Lt(t={htmlFor:a,...t})}),Na=xn(wn(function(e){return yn("label",Va(e))}));function La(e,t){return t&&e.item(t)||null}var Fa=Symbol("FOCUS_SILENTLY");function Ma(e,t,n){if(!t)return!1;if(t===n)return!1;const a=e.item(t.id);return!(!a||n&&a.element===n)}var Pa=(0,e.createContext)(!0),Aa="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], summary, iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false'])";function Oa(e){return!!e.matches(Aa)&&!!function(e){if("function"==typeof e.checkVisibility)return e.checkVisibility();const t=e;return t.offsetWidth>0||t.offsetHeight>0||e.getClientRects().length>0}(e)&&!e.closest("[inert]")}function Ta(e){const t=Tt(e);if(!t)return!1;if(t===e)return!0;const n=t.getAttribute("aria-activedescendant");return!!n&&n===e.id}function Da(e){const t=Tt(e);if(!t)return!1;if(Dt(e,t))return!0;const n=t.getAttribute("aria-activedescendant");return!!n&&"id"in e&&(n===e.id||!!e.querySelector(`#${CSS.escape(n)}`))}var Ba=Ut(),Ra=["text","search","url","tel","email","password","number","date","month","week","time","datetime","datetime-local"],za=Symbol("safariFocusAncestor");function Ha(e,t){e&&(e[za]=t)}function $a(e){return!("input"!==e.tagName.toLowerCase()||!e.type||"radio"!==e.type&&"checkbox"!==e.type)}function Wa(e,t,n,a,i){return e?t?n&&!a?-1:void 0:n?i:i||0:i}function qa(e,t){return sn(n=>{null==e||e(n),n.defaultPrevented||t&&(n.stopPropagation(),n.preventDefault())})}var Ga=!1,Ka=!0;function Ua(e){const t=e.target;t&&"hasAttribute"in t&&(t.hasAttribute("data-focus-visible")||(Ka=!1))}function Ya(e){e.metaKey||e.ctrlKey||e.altKey||(Ka=!0)}var Za=Sn(function({focusable:t=!0,accessibleWhenDisabled:n,autoFocus:a,onFocusVisible:i,...r}){const l=(0,e.useRef)(null);(0,e.useEffect)(()=>{t&&(Ga||(tn("mousedown",Ua,!0),tn("keydown",Ya,!0),Ga=!0))},[t]),Ba&&(0,e.useEffect)(()=>{if(!t)return;const e=l.current;if(!e)return;if(!$a(e))return;const n=function(e){return"labels"in e?e.labels:null}(e);if(!n)return;const a=()=>queueMicrotask(()=>e.focus());for(const e of n)e.addEventListener("mouseup",a);return()=>{for(const e of n)e.removeEventListener("mouseup",a)}},[t]);const s=t&&Nt(r),o=!!s&&!n,[c,d]=(0,e.useState)(!1);(0,e.useEffect)(()=>{t&&o&&c&&d(!1)},[t,o,c]),(0,e.useEffect)(()=>{if(!t)return;if(!c)return;const e=l.current;if(!e)return;if("undefined"==typeof IntersectionObserver)return;const n=new IntersectionObserver(()=>{Oa(e)||d(!1)});return n.observe(e),()=>n.disconnect()},[t,c]);const u=qa(r.onKeyPressCapture,s),m=qa(r.onMouseDownCapture,s),f=qa(r.onClickCapture,s),g=r.onMouseDown,p=sn(e=>{if(null==g||g(e),e.defaultPrevented)return;if(!t)return;const n=e.currentTarget;if(!Ba)return;if(Yt(e))return;if(!Bt(n)&&!$a(n))return;let a=!1;const i=()=>{a=!0};n.addEventListener("focusin",i,{capture:!0,once:!0});const r=function(e){for(;e&&!Oa(e);)e=e.closest(Aa);return e||null}(n.parentElement);Ha(r,!0),en(n,"mouseup",()=>{n.removeEventListener("focusin",i,!0),Ha(r,!1),a||function(e){!Da(e)&&Oa(e)&&e.focus()}(n)})}),v=(e,n)=>{if(n&&(e.currentTarget=n),!t)return;const a=e.currentTarget;a&&Ta(a)&&(null==i||i(e),e.defaultPrevented||(a.dataset.focusVisible="true",d(!0)))},h=r.onKeyDownCapture,b=sn(e=>{if(null==h||h(e),e.defaultPrevented)return;if(!t)return;if(c)return;if(e.metaKey)return;if(e.altKey)return;if(e.ctrlKey)return;if(!Zt(e))return;const n=e.currentTarget;en(n,"focusout",()=>v(e,n))}),w=r.onFocusCapture,_=sn(e=>{if(null==w||w(e),e.defaultPrevented)return;if(!t)return;if(!Zt(e))return void d(!1);const n=e.currentTarget;Ka||function(e){const{tagName:t,readOnly:n,type:a}=e;return"TEXTAREA"===t&&!n||"SELECT"===t&&!n||("INPUT"!==t||n?!!e.isContentEditable||!("combobox"!==e.getAttribute("role")||!e.dataset.name):Ra.includes(a))}(e.target)?en(e.target,"focusout",()=>v(e,n)):d(!1)}),x=r.onBlur,y=sn(e=>{null==x||x(e),t&&Jt(e)&&(e.currentTarget.removeAttribute("data-focus-visible"),d(!1))}),S=(0,e.useContext)(Pa),C=sn(e=>{t&&a&&e&&S&&queueMicrotask(()=>{Ta(e)||Oa(e)&&e.focus()})}),E=function(t,n){const a=e=>{if("string"==typeof e)return e},[i,r]=(0,e.useState)(()=>a(n));return ln(()=>{const e=t&&"current"in t?t.current:t;r((null==e?void 0:e.tagName.toLowerCase())||a(n))},[t,n]),i}(l),j=t&&function(e){return!e||"button"===e||"summary"===e||"input"===e||"select"===e||"textarea"===e||"a"===e}(E),k=t&&function(e){return!e||"button"===e||"input"===e||"select"===e||"textarea"===e}(E),I=r.style,V=(0,e.useMemo)(()=>o?{pointerEvents:"none",...I}:I,[o,I]);return Lt(r={"data-focus-visible":t&&c||void 0,"data-autofocus":a||void 0,"aria-disabled":s||void 0,...r,ref:on(l,C,r.ref),style:V,tabIndex:Wa(t,o,j,k,r.tabIndex),disabled:!(!k||!o)||void 0,contentEditable:s?void 0:r.contentEditable,onKeyPressCapture:u,onClickCapture:f,onMouseDownCapture:m,onMouseDown:p,onKeyDownCapture:b,onFocusCapture:_,onBlur:y})});function Xa(e,t,n){return sn(a=>{var i;if(null==t||t(a),a.defaultPrevented)return;if(a.isPropagationStopped())return;if(!Zt(a))return;if(function(e){return"Shift"===e.key||"Control"===e.key||"Alt"===e.key||"Meta"===e.key}(a))return;if(function(e){const t=e.target;return!(t&&!zt(t)||1!==e.key.length||e.ctrlKey||e.metaKey)}(a))return;const r=e.getState(),l=null==(i=La(e,r.activeId))?void 0:i.element;if(!l)return;const{view:s,...o}=a;l!==(null==n?void 0:n.current)&&l.focus(),function(e,t,n){const a=new KeyboardEvent(t,n);return e.dispatchEvent(a)}(l,a.type,o)||a.preventDefault(),a.currentTarget.contains(l)&&a.stopPropagation()})}wn(function(e){return yn("div",Za(e))});var Qa=Sn(function({store:t,composite:n=!0,focusOnMove:a=n,moveOnKeyPress:i=!0,...r}){const l=Vn();Vt(t=t||l,!1);const s=(0,e.useRef)(null),o=(0,e.useRef)(null),c=function(t){const[n,a]=(0,e.useState)(!1),i=(0,e.useCallback)(()=>a(!0),[]),r=t.useState(e=>La(t,e.activeId));return(0,e.useEffect)(()=>{const e=null==r?void 0:r.element;n&&e&&(a(!1),e.focus({preventScroll:!0}))},[r,n]),i}(t),d=t.useState("moves"),[,u]=function(t){const[n,a]=(0,e.useState)(null);return ln(()=>{if(null==n)return;if(!t)return;let e=null;return t(t=>(e=t,n)),()=>{t(e)}},[n,t]),[n,a]}(n?t.setBaseElement:null);(0,e.useEffect)(()=>{var e;if(!t)return;if(!d)return;if(!n)return;if(!a)return;const{activeId:i}=t.getState(),r=null==(e=La(t,i))?void 0:e.element;var l;r&&("scrollIntoView"in(l=r)?(l.focus({preventScroll:!0}),l.scrollIntoView({block:"nearest",inline:"nearest"})):l.focus())},[t,d,n,a]),ln(()=>{if(!t)return;if(!d)return;if(!n)return;const{baseElement:e,activeId:a}=t.getState();if(null!==a)return;if(!e)return;const i=o.current;o.current=null,i&&Xt(i,{relatedTarget:e}),Ta(e)||e.focus()},[t,d,n]);const m=t.useState("activeId"),f=t.useState("virtualFocus");ln(()=>{var e;if(!t)return;if(!n)return;if(!f)return;const a=o.current;if(o.current=null,!a)return;const i=(null==(e=La(t,m))?void 0:e.element)||Tt(a);i!==a&&Xt(a,{relatedTarget:i})},[t,m,f,n]);const g=Xa(t,r.onKeyDownCapture,o),p=Xa(t,r.onKeyUpCapture,o),v=r.onFocusCapture,b=sn(e=>{if(null==v||v(e),e.defaultPrevented)return;if(!t)return;const{virtualFocus:n}=t.getState();if(!n)return;const a=e.relatedTarget,i=function(e){const t=e[Fa];return delete e[Fa],t}(e.currentTarget);Zt(e)&&i&&(e.stopPropagation(),o.current=a)}),w=r.onFocus,_=sn(e=>{if(null==w||w(e),e.defaultPrevented)return;if(!n)return;if(!t)return;const{relatedTarget:a}=e,{virtualFocus:i}=t.getState();i?Zt(e)&&!Ma(t,a)&&queueMicrotask(c):Zt(e)&&t.setActiveId(null)}),x=r.onBlurCapture,y=sn(e=>{var n;if(null==x||x(e),e.defaultPrevented)return;if(!t)return;const{virtualFocus:a,activeId:i}=t.getState();if(!a)return;const r=null==(n=La(t,i))?void 0:n.element,l=e.relatedTarget,s=Ma(t,l),c=o.current;o.current=null,Zt(e)&&s?(l===r?c&&c!==l&&Xt(c,e):r?Xt(r,e):c&&Xt(c,e),e.stopPropagation()):!Ma(t,e.target)&&r&&Xt(r,e)}),S=r.onKeyDown,C=un(i),E=sn(e=>{var n;if(null==S||S(e),e.nativeEvent.isComposing)return;if(e.defaultPrevented)return;if(!t)return;if(!Zt(e))return;const{orientation:a,renderedItems:i,activeId:r}=t.getState(),l=La(t,r);if(null==(n=null==l?void 0:l.element)?void 0:n.isConnected)return;const s="horizontal"!==a,o="vertical"!==a,c=i.some(e=>!!e.rowId);if(("ArrowLeft"===e.key||"ArrowRight"===e.key||"Home"===e.key||"End"===e.key)&&zt(e.currentTarget))return;const d={ArrowUp:(c||s)&&(()=>{if(c){const e=function(e){return e.find(e=>!e.disabled)}(Qn(Jn(function(e){const t=[];for(const n of e){const e=t.find(e=>{var t;return(null==(t=e[0])?void 0:t.rowId)===n.rowId});e?e.push(n):t.push([n])}return t}(i))));return null==e?void 0:e.id}return null==t?void 0:t.last()}),ArrowRight:(c||o)&&t.first,ArrowDown:(c||s)&&t.first,ArrowLeft:(c||o)&&t.last,Home:t.first,End:t.last,PageUp:t.first,PageDown:t.last},u=d[e.key];if(u){const n=u();if(void 0!==n){if(!C(e))return;e.preventDefault(),t.move(n)}}});r=mn(r,e=>(0,h.jsx)(Nn,{value:t,children:e}),[t]);const j=t.useState(e=>{var a;if(t&&n&&e.virtualFocus)return null==(a=La(t,e.activeId))?void 0:a.id});r={"aria-activedescendant":j,...r,ref:on(s,u,r.ref),onKeyDownCapture:g,onKeyUpCapture:p,onFocusCapture:b,onFocus:_,onBlurCapture:y,onKeyDown:E};const k=t.useState(e=>n&&(e.virtualFocus||null===e.activeId));return Za({focusable:k,...r})}),Ja=(wn(function(e){return yn("div",Qa(e))}),Sn(function({store:e,...t}){const n=va();return e=e||n,{...t,ref:on(null==e?void 0:e.setAnchorElement,t.ref)}}));function ei(e,t,n){if(!n)return!1;const a=e.find(e=>!e.disabled&&e.value);return(null==a?void 0:a.value)===t}function ti(e,t){return!!t&&null!=e&&(e=kt(e),t.length>e.length&&0===t.toLowerCase().indexOf(e.toLowerCase()))}wn(function(e){return yn("div",Ja(e))});var ni=Sn(function({store:t,focusable:n=!0,autoSelect:a=!1,getAutoSelectId:i,setValueOnChange:r,showMinLength:l=0,showOnChange:s,showOnMouseDown:o,showOnClick:c=o,showOnKeyDown:d,showOnKeyPress:u=d,blurActiveItemOnClick:m,setValueOnClick:f=!0,moveOnKeyPress:g=!0,autoComplete:p="list",...v}){const h=Sa();Vt(t=t||h,!1);const b=(0,e.useRef)(null),[w,_]=(0,e.useReducer)(()=>[],[]),x=(0,e.useRef)(!1),y=(0,e.useRef)(!1),S=t.useState(e=>e.virtualFocus&&a),C="inline"===p||"both"===p,[E,j]=(0,e.useState)(C);!function(t,n){const a=(0,e.useRef)(!1);ln(()=>{a.current?C&&j(!0):a.current=!0},n),ln(()=>()=>{a.current=!1},[])}(0,[C]);const k=t.useState("value"),I=(0,e.useRef)(void 0);(0,e.useEffect)(()=>zn(t,["selectedValue","activeId"],(e,t)=>{I.current=t.selectedValue}),[]);const V=t.useState(e=>{var t;if(C&&E){if(e.activeValue&&Array.isArray(e.selectedValue)){if(e.selectedValue.includes(e.activeValue))return;if(null==(t=I.current)?void 0:t.includes(e.activeValue))return}return e.activeValue}}),N=t.useState("renderedItems"),L=t.useState("open"),F=t.useState("contentElement"),M=(0,e.useMemo)(()=>{if(!C)return k;if(!E)return k;if(ei(N,V,S)){if(ti(k,V)){const e=(null==V?void 0:V.slice(k.length))||"";return k+e}return k}return V||k},[C,E,N,V,S,k]);(0,e.useEffect)(()=>{const e=b.current;if(!e)return;const t=()=>j(!0);return e.addEventListener("combobox-item-move",t),()=>{e.removeEventListener("combobox-item-move",t)}},[]),(0,e.useEffect)(()=>{if(!C)return;if(!E)return;if(!V)return;if(!ei(N,V,S))return;if(!ti(k,V))return;let e=Ct;return queueMicrotask(()=>{const t=b.current;if(!t)return;const{start:n,end:a}=$t(t),i=k.length,r=V.length;Gt(t,i,r),e=()=>{if(!Ta(t))return;const{start:e,end:l}=$t(t);e===i&&l===r&&Gt(t,n,a)}}),()=>e()},[w,C,E,V,N,S,k]);const P=(0,e.useRef)(null),A=sn(i),O=(0,e.useRef)(null);(0,e.useEffect)(()=>{if(!L)return;if(!F)return;const e=qt(F);if(!e)return;P.current=e;const n=()=>{x.current=!1},a=()=>{if(!t)return;if(!x.current)return;const{activeId:e}=t.getState();null!==e&&e!==O.current&&(x.current=!1)},i={passive:!0,capture:!0};return e.addEventListener("wheel",n,i),e.addEventListener("touchmove",n,i),e.addEventListener("scroll",a,i),()=>{e.removeEventListener("wheel",n,!0),e.removeEventListener("touchmove",n,!0),e.removeEventListener("scroll",a,!0)}},[L,F,t]),ln(()=>{k&&(y.current||(x.current=!0))},[k]),ln(()=>{"always"!==S&&L||(x.current=L)},[S,L]);const T=t.useState("resetValueOnSelect");dn(()=>{var e,n;const a=x.current;if(!t)return;if(!L)return;if(!a&&!T)return;const{baseElement:i,contentElement:r,activeId:l}=t.getState();if(!i||Ta(i)){if(null==r?void 0:r.hasAttribute("data-placing")){const e=new MutationObserver(_);return e.observe(r,{attributeFilter:["data-placing"]}),()=>e.disconnect()}if(S&&a){const n=A(N),a=void 0!==n?n:null!=(e=function(e){const t=e.find(e=>{var t;return!e.disabled&&"tab"!==(null==(t=e.element)?void 0:t.getAttribute("role"))});return null==t?void 0:t.id}(N))?e:t.first();O.current=a,t.move(null!=a?a:null)}else{const e=null==(n=t.item(l||t.first()))?void 0:n.element;e&&"scrollIntoView"in e&&e.scrollIntoView({block:"nearest",inline:"nearest"})}}},[t,L,w,k,S,T,A,N]),(0,e.useEffect)(()=>{if(!C)return;const e=b.current;if(!e)return;const n=[e,F].filter(e=>!!e),a=e=>{n.every(t=>Jt(e,t))&&(null==t||t.setValue(M))};for(const e of n)e.addEventListener("focusout",a);return()=>{for(const e of n)e.removeEventListener("focusout",a)}},[C,F,t,M]);const D=e=>e.currentTarget.value.length>=l,B=v.onChange,R=un(null!=s?s:D),z=un(null!=r?r:!t.tag),H=sn(e=>{if(null==B||B(e),e.defaultPrevented)return;if(!t)return;const n=e.currentTarget,{value:a,selectionStart:i,selectionEnd:r}=n,l=e.nativeEvent;if(x.current=!0,function(e){return"input"===e.type}(l)&&(l.isComposing&&(x.current=!1,y.current=!0),C)){const e="insertText"===l.inputType||"insertCompositionText"===l.inputType,t=i===a.length;j(e&&t)}if(z(e)){const e=a===t.getState().value;t.setValue(a),queueMicrotask(()=>{Gt(n,i,r)}),C&&S&&e&&_()}R(e)&&t.show(),S&&x.current||t.setActiveId(null)}),$=v.onCompositionEnd,W=sn(e=>{x.current=!0,y.current=!1,null==$||$(e),e.defaultPrevented||S&&_()}),q=v.onMouseDown,G=un(null!=m?m:()=>!!(null==t?void 0:t.getState().includesBaseElement)),K=un(f),U=un(null!=c?c:D),Y=sn(e=>{null==q||q(e),e.defaultPrevented||e.button||e.ctrlKey||t&&(G(e)&&t.setActiveId(null),K(e)&&t.setValue(M),U(e)&&en(e.currentTarget,"mouseup",t.show))}),Z=v.onKeyDown,X=un(null!=u?u:D),Q=sn(e=>{if(null==Z||Z(e),e.repeat||(x.current=!1),e.defaultPrevented)return;if(e.ctrlKey)return;if(e.altKey)return;if(e.shiftKey)return;if(e.metaKey)return;if(!t)return;const{open:n}=t.getState();n||"ArrowUp"!==e.key&&"ArrowDown"!==e.key||X(e)&&(e.preventDefault(),t.show())}),J=v.onBlur,ee=sn(e=>{x.current=!1,null==J||J(e),e.defaultPrevented}),te=cn(v.id),ne=function(e){return"inline"===e||"list"===e||"both"===e||"none"===e}(p)?p:void 0,ae=t.useState(e=>null===e.activeId);return v={id:te,role:"combobox","aria-autocomplete":ne,"aria-haspopup":Wt(F,"listbox"),"aria-expanded":L,"aria-controls":null==F?void 0:F.id,"data-active-item":ae||void 0,value:M,...v,ref:on(b,v.ref),onChange:H,onCompositionEnd:W,onMouseDown:Y,onKeyDown:Q,onBlur:ee},v=Qa({store:t,focusable:n,...v,moveOnKeyPress:e=>!function(e,...t){const n="function"==typeof e?e(...t):e;return null!=n&&!n}(g,e)&&(C&&j(!0),!0)}),v=Ja({store:t,...v}),{autoComplete:"off",...v}}),ai=wn(function(e){return yn("input",ni(e))});const ii=window.ReactDOM;function ri(e,t){const n=setTimeout(t,e);return()=>clearTimeout(n)}function li(...e){return e.join(", ").split(", ").reduce((e,t)=>{const n=t.endsWith("ms")?1:1e3,a=Number.parseFloat(t||"0s")*n;return a>e?a:e},0)}function si(e,t,n){return!(n||!1===t||e&&!t)}var oi=Sn(function({store:t,alwaysVisible:n,...a}){const i=ua();Vt(t=t||i,!1);const r=(0,e.useRef)(null),l=cn(a.id),[s,o]=(0,e.useState)(null),c=t.useState("open"),d=t.useState("mounted"),u=t.useState("animated"),m=t.useState("contentElement"),f=Kn(t.disclosure,"contentElement");ln(()=>{r.current&&(null==t||t.setContentElement(r.current))},[t]),ln(()=>{let e;return null==t||t.setState("animated",t=>(e=t,!0)),()=>{void 0!==e&&(null==t||t.setState("animated",e))}},[t]),ln(()=>{if(u){if(null==m?void 0:m.isConnected)return function(e){let t=requestAnimationFrame(()=>{t=requestAnimationFrame(e)});return()=>cancelAnimationFrame(t)}(()=>{o(c?"enter":d?"leave":null)});o(null)}},[u,m,c,d]),ln(()=>{if(!t)return;if(!u)return;if(!s)return;if(!m)return;const e=()=>null==t?void 0:t.setState("animating",!1),n=()=>(0,ii.flushSync)(e);if("leave"===s&&c)return;if("enter"===s&&!c)return;if("number"==typeof u)return ri(u,n);const{transitionDuration:a,animationDuration:i,transitionDelay:r,animationDelay:l}=getComputedStyle(m),{transitionDuration:o="0",animationDuration:d="0",transitionDelay:g="0",animationDelay:p="0"}=f?getComputedStyle(f):{},v=li(r,l,g,p)+li(a,i,o,d);return v?ri(Math.max(v-1e3/60,0),n):("enter"===s&&t.setState("animated",!1),void e())},[t,u,m,f,c,s]),a=mn(a,e=>(0,h.jsx)(ga,{value:t,children:e}),[t]);const g=si(d,a.hidden,n),p=a.style,v=(0,e.useMemo)(()=>g?{...p,display:"none"}:p,[g,p]);return Lt(a={id:l,"data-open":c||void 0,"data-enter":"enter"===s||void 0,"data-leave":"leave"===s||void 0,hidden:g,...a,ref:on(l?t.setContentElement:null,r,a.ref),style:v})}),ci=wn(function(e){return yn("div",oi(e))}),di=(wn(function({unmountOnHide:e,...t}){const n=ua();return!1===Kn(t.store||n,t=>!e||(null==t?void 0:t.mounted))?null:(0,h.jsx)(ci,{...t})}),Sn(function({store:t,alwaysVisible:n,...a}){const i=ya(!0),r=xa(),l=!!(t=t||r)&&t===i;Vt(t,!1);const s=(0,e.useRef)(null),o=cn(a.id),c=t.useState("mounted"),d=si(c,a.hidden,n),u=d?{...a.style,display:"none"}:a.style,m=t.useState(e=>Array.isArray(e.selectedValue)),f=function(t,n,a){const i=function(t){const[n]=(0,e.useState)(t);return n}(a),[r,l]=(0,e.useState)(i);return(0,e.useEffect)(()=>{const e=t&&"current"in t?t.current:t;if(!e)return;const a=()=>{const t=e.getAttribute(n);l(null==t?i:t)},r=new MutationObserver(a);return r.observe(e,{attributeFilter:[n]}),a(),()=>r.disconnect()},[t,n,i]),r}(s,"role",a.role),g=("listbox"===f||"tree"===f||"grid"===f)&&m||void 0,[p,v]=(0,e.useState)(!1),b=t.useState("contentElement");ln(()=>{if(!c)return;const e=s.current;if(!e)return;if(b!==e)return;const t=()=>{v(!!e.querySelector("[role='listbox']"))},n=new MutationObserver(t);return n.observe(e,{subtree:!0,childList:!0,attributeFilter:["role"]}),t(),()=>n.disconnect()},[c,b]),p||(a={role:"listbox","aria-multiselectable":g,...a}),a=mn(a,e=>(0,h.jsx)(Ea,{value:t,children:(0,h.jsx)(wa.Provider,{value:f,children:e})}),[t,f]);const w=!o||i&&l?null:t.setContentElement;return Lt(a={id:o,hidden:d,...a,ref:on(w,s,a.ref),style:u})})),ui=wn(function(e){return yn("div",di(e))});function mi(e){const t=e.relatedTarget;return(null==t?void 0:t.nodeType)===Node.ELEMENT_NODE?t:null}var fi=Symbol("composite-hover"),gi=Sn(function({store:t,focusOnHover:n=!0,blurOnHoverEnd:a=!!n,...i}){const r=In();Vt(t=t||r,!1);const l=((0,e.useEffect)(()=>{fn||(tn("mousemove",hn,!0),tn("mousedown",bn,!0),tn("mouseup",bn,!0),tn("keydown",bn,!0),tn("scroll",bn,!0),fn=!0)},[]),sn(()=>gn)),s=i.onMouseMove,o=un(n),c=sn(e=>{if(null==s||s(e),!e.defaultPrevented&&l()&&o(e)){if(!Da(e.currentTarget)){const e=null==t?void 0:t.getState().baseElement;e&&!Ta(e)&&e.focus()}null==t||t.setActiveId(e.currentTarget.id)}}),d=i.onMouseLeave,u=un(a),m=sn(e=>{var n;null==d||d(e),e.defaultPrevented||l()&&(function(e){const t=mi(e);return!!t&&Dt(e.currentTarget,t)}(e)||function(e){let t=mi(e);if(!t)return!1;do{if(Et(t,fi)&&t[fi])return!0;t=t.parentElement}while(t);return!1}(e)||o(e)&&u(e)&&(null==t||t.setActiveId(null),null==(n=null==t?void 0:t.getState().baseElement)||n.focus()))}),f=(0,e.useCallback)(e=>{e&&(e[fi]=!0)},[]);return Lt(i={...i,ref:on(f,i.ref),onMouseMove:c,onMouseLeave:m})}),pi=(xn(wn(function(e){return yn("div",gi(e))})),Sn(function({store:t,shouldRegisterItem:n=!0,getItem:a=It,element:i,...r}){const l=jn();t=t||l;const s=cn(r.id),o=(0,e.useRef)(i);return(0,e.useEffect)(()=>{const e=o.current;if(!s)return;if(!e)return;if(!n)return;const i=a({id:s,element:e});return null==t?void 0:t.renderItem(i)},[s,n,a,t]),Lt(r={...r,ref:on(o,r.ref)})}));function vi(e){if(!e.isTrusted)return!1;const t=e.currentTarget;return"Enter"===e.key?Bt(t)||"SUMMARY"===t.tagName||"A"===t.tagName:" "===e.key&&(Bt(t)||"SUMMARY"===t.tagName||"INPUT"===t.tagName||"SELECT"===t.tagName)}wn(function(e){return yn("div",pi(e))});var hi=Symbol("command"),bi=Sn(function({clickOnEnter:t=!0,clickOnSpace:n=!0,...a}){const i=(0,e.useRef)(null),[r,l]=(0,e.useState)(!1);(0,e.useEffect)(()=>{i.current&&l(Bt(i.current))},[]);const[s,o]=(0,e.useState)(!1),c=(0,e.useRef)(!1),d=Nt(a),[u,m]=function(t,n,a){const i=t.onLoadedMetadataCapture,r=(0,e.useMemo)(()=>Object.assign(()=>{},{...i,[n]:a}),[i,n,a]);return[null==i?void 0:i[n],{onLoadedMetadataCapture:r}]}(a,hi,!0),f=a.onKeyDown,g=sn(e=>{null==f||f(e);const a=e.currentTarget;if(e.defaultPrevented)return;if(u)return;if(d)return;if(!Zt(e))return;if(zt(a))return;if(a.isContentEditable)return;const i=t&&"Enter"===e.key,r=n&&" "===e.key,l="Enter"===e.key&&!t,s=" "===e.key&&!n;if(l||s)e.preventDefault();else if(i||r){const t=vi(e);if(i){if(!t){e.preventDefault();const{view:t,...n}=e,i=()=>Qt(a,n);At&&/firefox\//i.test(navigator.userAgent)?en(a,"keyup",i):queueMicrotask(i)}}else r&&(c.current=!0,t||(e.preventDefault(),o(!0)))}}),p=a.onKeyUp,v=sn(e=>{if(null==p||p(e),e.defaultPrevented)return;if(u)return;if(d)return;if(e.metaKey)return;const t=n&&" "===e.key;if(c.current&&t&&(c.current=!1,!vi(e))){e.preventDefault(),o(!1);const t=e.currentTarget,{view:n,...a}=e;queueMicrotask(()=>Qt(t,a))}});return a={"data-active":s||void 0,type:r?"button":void 0,...m,...a,ref:on(i,a.ref),onKeyDown:g,onKeyUp:v},Za(a)});function wi(e,t=!1){const{top:n}=e.getBoundingClientRect();return t?n+e.clientHeight:n}function _i(e,t,n,a=!1){var i;if(!t)return;if(!n)return;const{renderedItems:r}=t.getState(),l=qt(e);if(!l)return;const s=function(e,t=!1){const n=e.clientHeight,{top:a}=e.getBoundingClientRect(),i=1.5*Math.max(.875*n,n-40),r=t?n-i+a:i+a;return"HTML"===e.tagName?r+e.scrollTop:r}(l,a);let o,c;for(let e=0;e<r.length;e+=1){const r=o;if(o=n(e),!o)break;if(o===r)continue;const l=null==(i=La(t,o))?void 0:i.element;if(!l)continue;const d=wi(l,a)-s,u=Math.abs(d);if(a&&d<=0||!a&&d>=0){void 0!==c&&c<u&&(o=r);break}c=u}return o}wn(function(e){return yn("button",bi(e))});var xi=Sn(function({store:t,rowId:n,preventScrollOnKeyDown:a=!1,moveOnKeyPress:i=!0,tabbable:r=!1,getItem:l,"aria-setsize":s,"aria-posinset":o,...c}){const d=In();t=t||d;const u=cn(c.id),m=(0,e.useRef)(null),f=(0,e.useContext)(Mn),g=Nt(c)&&!c.accessibleWhenDisabled,{rowId:p,baseElement:v,isActiveItem:b,ariaSetSize:w,ariaPosInSet:_,isTabbable:x}=Un(t,{rowId:e=>n||(e&&(null==f?void 0:f.baseElement)&&f.baseElement===e.baseElement?f.id:void 0),baseElement:e=>(null==e?void 0:e.baseElement)||void 0,isActiveItem:e=>!!e&&e.activeId===u,ariaSetSize:e=>null!=s?s:e&&(null==f?void 0:f.ariaSetSize)&&f.baseElement===e.baseElement?f.ariaSetSize:void 0,ariaPosInSet(e){if(null!=o)return o;if(!e)return;if(!(null==f?void 0:f.ariaPosInSet))return;if(f.baseElement!==e.baseElement)return;const t=e.renderedItems.filter(e=>e.rowId===p);return f.ariaPosInSet+t.findIndex(e=>e.id===u)},isTabbable(e){if(!(null==e?void 0:e.renderedItems.length))return!0;if(e.virtualFocus)return!1;if(r)return!0;if(null===e.activeId)return!1;const n=null==t?void 0:t.item(e.activeId);return!!(null==n?void 0:n.disabled)||!(null==n?void 0:n.element)||e.activeId===u}}),y=(0,e.useCallback)(e=>{var t;const n={...e,id:u||e.id,rowId:p,disabled:!!g,children:null==(t=e.element)?void 0:t.textContent};return l?l(n):n},[u,p,g,l]),S=c.onFocus,C=(0,e.useRef)(!1),E=sn(e=>{if(null==S||S(e),e.defaultPrevented)return;if(Yt(e))return;if(!u)return;if(!t)return;if(function(e,t){return!Zt(e)&&Ma(t,e.target)}(e,t))return;const{virtualFocus:n,baseElement:a}=t.getState();var i;(t.setActiveId(u),Ht(e.currentTarget)&&function(e,t=!1){if(zt(e))e.setSelectionRange(t?e.value.length:0,e.value.length);else if(e.isContentEditable){const n=Ot(e).getSelection();null==n||n.selectAllChildren(e),t&&(null==n||n.collapseToEnd())}}(e.currentTarget),n)&&(Zt(e)&&(Ht(i=e.currentTarget)||"INPUT"===i.tagName&&!Bt(i)||(null==a?void 0:a.isConnected)&&(Ut()&&e.currentTarget.hasAttribute("data-autofocus")&&e.currentTarget.scrollIntoView({block:"nearest",inline:"nearest"}),C.current=!0,e.relatedTarget===a||Ma(t,e.relatedTarget)?function(e){e[Fa]=!0,e.focus({preventScroll:!0})}(a):a.focus())))}),j=c.onBlurCapture,k=sn(e=>{if(null==j||j(e),e.defaultPrevented)return;const n=null==t?void 0:t.getState();(null==n?void 0:n.virtualFocus)&&C.current&&(C.current=!1,e.preventDefault(),e.stopPropagation())}),I=c.onKeyDown,V=un(a),N=un(i),L=sn(e=>{if(null==I||I(e),e.defaultPrevented)return;if(!Zt(e))return;if(!t)return;const{currentTarget:n}=e,a=t.getState(),i=t.item(u),r=!!(null==i?void 0:i.rowId),l="horizontal"!==a.orientation,s="vertical"!==a.orientation,o=()=>!(!r&&!s&&a.baseElement&&zt(a.baseElement)),c={ArrowUp:(r||l)&&t.up,ArrowRight:(r||s)&&t.next,ArrowDown:(r||l)&&t.down,ArrowLeft:(r||s)&&t.previous,Home:()=>{if(o())return!r||e.ctrlKey?null==t?void 0:t.first():null==t?void 0:t.previous(-1)},End:()=>{if(o())return!r||e.ctrlKey?null==t?void 0:t.last():null==t?void 0:t.next(-1)},PageUp:()=>_i(n,t,null==t?void 0:t.up,!0),PageDown:()=>_i(n,t,null==t?void 0:t.down)}[e.key];if(c){if(Ht(n)){const t=$t(n),a=s&&"ArrowLeft"===e.key,i=s&&"ArrowRight"===e.key,r=l&&"ArrowUp"===e.key,o=l&&"ArrowDown"===e.key;if(i||o){const{length:e}=function(e){if(zt(e))return e.value;if(e.isContentEditable){const t=Ot(e).createRange();return t.selectNodeContents(e),t.toString()}return""}(n);if(t.end!==e)return}else if((a||r)&&0!==t.start)return}const a=c();if(V(e)||void 0!==a){if(!N(e))return;e.preventDefault(),t.move(a)}}}),F=(0,e.useMemo)(()=>({id:u,baseElement:v}),[u,v]);return c=mn(c,e=>(0,h.jsx)(Fn.Provider,{value:F,children:e}),[F]),c={id:u,"data-active-item":b||void 0,...c,ref:on(m,c.ref),tabIndex:x?c.tabIndex:-1,onFocus:E,onBlurCapture:k,onKeyDown:L},c=bi(c),c=pi({store:t,...c,getItem:y,shouldRegisterItem:!!u&&c.shouldRegisterItem}),Lt({...c,"aria-setsize":w,"aria-posinset":_})});function yi(e){var t;return null!=(t={menu:"menuitem",listbox:"option",tree:"treeitem"}[e])?t:"option"}xn(wn(function(e){return yn("button",xi(e))}));var Si=Sn(function({store:t,value:n,hideOnClick:a,setValueOnClick:i,selectValueOnClick:r=!0,resetValueOnSelect:l,focusOnHover:s=!1,moveOnKeyPress:o=!0,getItem:c,...d}){var u;const m=ya();Vt(t=t||m,!1);const{resetValueOnSelectState:f,multiSelectable:g,selected:p}=Un(t,{resetValueOnSelectState:"resetValueOnSelect",multiSelectable:e=>Array.isArray(e.selectedValue),selected:e=>function(e,t){if(null!=t)return null!=e&&(Array.isArray(e)?e.includes(t):e===t)}(e.selectedValue,n)}),v=(0,e.useCallback)(e=>{const t={...e,value:n};return c?c(t):t},[n,c]);i=null!=i?i:!g,a=null!=a?a:null!=n&&!g;const b=d.onClick,w=un(i),_=un(r),x=un(null!=(u=null!=l?l:f)?u:g),y=un(a),S=sn(e=>{null==b||b(e),e.defaultPrevented||function(e){const t=e.currentTarget;if(!t)return!1;const n=t.tagName.toLowerCase();return!!e.altKey&&("a"===n||"button"===n&&"submit"===t.type||"input"===n&&"submit"===t.type)}(e)||function(e){const t=e.currentTarget;if(!t)return!1;const n=Kt();if(n&&!e.metaKey)return!1;if(!n&&!e.ctrlKey)return!1;const a=t.tagName.toLowerCase();return"a"===a||"button"===a&&"submit"===t.type||"input"===a&&"submit"===t.type}(e)||(null!=n&&(_(e)&&(x(e)&&(null==t||t.resetValue()),null==t||t.setSelectedValue(e=>Array.isArray(e)?e.includes(n)?e.filter(e=>e!==n):[...e,n]:n)),w(e)&&(null==t||t.setValue(n))),y(e)&&(null==t||t.hide()))}),C=d.onKeyDown,E=sn(e=>{if(null==C||C(e),e.defaultPrevented)return;const n=null==t?void 0:t.getState().baseElement;n&&(Ta(n)||(1===e.key.length||"Backspace"===e.key||"Delete"===e.key)&&(queueMicrotask(()=>n.focus()),zt(n)&&(null==t||t.setValue(n.value))))});g&&null!=p&&(d={"aria-selected":p,...d}),d=mn(d,e=>(0,h.jsx)(ja.Provider,{value:n,children:(0,h.jsx)(ka.Provider,{value:null!=p&&p,children:e})}),[n,p]),d={role:yi((0,e.useContext)(wa)),children:n,...d,onClick:S,onKeyDown:E};const j=un(o);return d=xi({store:t,...d,getItem:v,moveOnKeyPress:e=>{if(!j(e))return!1;const n=new Event("combobox-item-move"),a=null==t?void 0:t.getState().baseElement;return null==a||a.dispatchEvent(n),!0}}),gi({store:t,focusOnHover:s,...d})}),Ci=xn(wn(function(e){return yn("div",Si(e))}));function Ei(e){return kt(e).toLowerCase()}var ji=Sn(function({store:t,value:n,userValue:a,...i}){const r=ya();t=t||r;const l=(0,e.useContext)(ja),s=null!=n?n:l,o=Kn(t,e=>null!=a?a:null==e?void 0:e.value);return Lt(i={children:(0,e.useMemo)(()=>{if(s)return o?function(e,t){if(!e)return e;if(!t)return e;const n=(a=t,Array.isArray(a)?a:void 0!==a?[a]:[]).filter(Boolean).map(Ei);var a;const i=[],r=(e,t=!1)=>(0,h.jsx)("span",{"data-autocomplete-value":t?"":void 0,"data-user-value":t?void 0:"",children:e},i.length),l=function(e){return e.sort(([e],[t])=>e-t)}(function(e){return e.filter(([e,t],n,a)=>!a.some(([a,i],r)=>r!==n&&a<=e&&a+i>=e+t))}(function(e,t){const n=[];for(const a of t){let t=0;const i=a.length;for(;-1!==e.indexOf(a,t);){const r=e.indexOf(a,t);-1!==r&&n.push([r,i]),t=r+1}}return n}(Ei(e),new Set(n))));if(!l.length)return i.push(r(e,!0)),i;const[s]=l[0],o=[e.slice(0,s),...l.flatMap(([t,n],a)=>{var i;const r=e.slice(t,t+n),s=null==(i=l[a+1])?void 0:i[0];return[r,e.slice(t+n,s)]})];return o.forEach((e,t)=>{e&&i.push(r(e,t%2==0))}),i}(s,o):s},[s,o]),...i})}),ki=wn(function(e){return yn("span",ji(e))}),Ii=i(731),Vi=(0,h.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,h.jsx)(v.Path,{d:"M13 5c-3.3 0-6 2.7-6 6 0 1.4.5 2.7 1.3 3.7l-3.8 3.8 1.1 1.1 3.8-3.8c1 .8 2.3 1.3 3.7 1.3 3.3 0 6-2.7 6-6S16.3 5 13 5zm0 10.5c-2.5 0-4.5-2-4.5-4.5s2-4.5 4.5-4.5 4.5 2 4.5 4.5-2 4.5-4.5 4.5z"})}),Ni=[],Li=(e,t)=>e.singleSelection?t?.value:Array.isArray(t?.value)?t.value:!Array.isArray(t?.value)&&t?.value?[t.value]:Ni,Fi=[];function Mi({elements:e,getElements:t}){const a=Array.isArray(e)&&e.length>0?e:Fi,[i,r]=(0,n.useState)(a),[l,s]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{if(!t)return void r(a);let e=!1;return s(!0),t().then(t=>{if(!e){const e=Array.isArray(t)&&t.length>0?t:a;r(e)}}).catch(()=>{e||r(a)}).finally(()=>{e||s(!1)}),()=>{e=!0}},[t,a]),{elements:i,isLoading:l}}function Pi(e=""){return Ii(e.trim().toLowerCase())}var Ai=(e,t,n)=>e.singleSelection?n:Array.isArray(t?.value)?t.value.includes(n)?t.value.filter(e=>e!==n):[...t.value,n]:[n];function Oi(e,t){return`${e}-${t}`}var Ti=({selected:e})=>(0,h.jsx)("span",{className:ae("dataviews-filters__search-widget-listitem-multi-selection",{"is-selected":e}),children:e&&(0,h.jsx)(r.Icon,{icon:$e})}),Di=({selected:e})=>(0,h.jsx)("span",{className:ae("dataviews-filters__search-widget-listitem-single-selection",{"is-selected":e})});function Bi({view:e,filter:t,onChangeView:i}){const l=(0,g.useInstanceId)(Bi,"dataviews-filter-list-box"),[s,o]=(0,n.useState)(1===t.operators?.length?void 0:null),c=e.filters?.find(e=>e.field===t.field),d=Li(t,c);return(0,h.jsx)(r.Composite,{virtualFocus:!0,focusLoop:!0,activeId:s,setActiveId:o,role:"listbox",className:"dataviews-filters__search-widget-listbox","aria-label":(0,a.sprintf)(
/* translators: List of items for a filter. 1: Filter name. e.g.: "List of: Author". */
/* translators: List of items for a filter. 1: Filter name. e.g.: "List of: Author". */
(0,a.__)("List of: %1$s"),t.name),onFocusVisible:()=>{!s&&t.elements.length&&o(Oi(l,t.elements[0].value))},render:(0,h.jsx)(r.Composite.Typeahead,{}),children:t.elements.map(n=>(0,h.jsxs)(r.Composite.Hover,{render:(0,h.jsx)(r.Composite.Item,{id:Oi(l,n.value),render:(0,h.jsx)("div",{"aria-label":n.label,role:"option",className:"dataviews-filters__search-widget-listitem"}),onClick:()=>{const a=c?[...(e.filters??[]).map(e=>e.field===t.field?{...e,operator:c.operator||t.operators[0],value:Ai(t,c,n.value)}:e)]:[...e.filters??[],{field:t.field,operator:t.operators[0],value:Ai(t,c,n.value)}];i({...e,page:1,filters:a})}}),children:[t.singleSelection&&(0,h.jsx)(Di,{selected:d===n.value}),!t.singleSelection&&(0,h.jsx)(Ti,{selected:d.includes(n.value)}),(0,h.jsx)("span",{children:n.label})]},n.value))})}function Ri({view:e,filter:t,onChangeView:i}){const[l,s]=(0,n.useState)(""),o=(0,n.useDeferredValue)(l),c=e.filters?.find(e=>e.field===t.field),d=Li(t,c),u=(0,n.useMemo)(()=>{const e=Pi(o);return t.elements.filter(t=>Pi(t.label).includes(e))},[t.elements,o]);return(0,h.jsxs)(Ia,{selectedValue:d,setSelectedValue:n=>{const a=c?[...(e.filters??[]).map(e=>e.field===t.field?{...e,operator:c.operator||t.operators[0],value:n}:e)]:[...e.filters??[],{field:t.field,operator:t.operators[0],value:n}];i({...e,page:1,filters:a})},setValue:s,children:[(0,h.jsxs)("div",{className:"dataviews-filters__search-widget-filter-combobox__wrapper",children:[(0,h.jsx)(Na,{render:(0,h.jsx)(r.VisuallyHidden,{children:(0,a.__)("Search items")}),children:(0,a.__)("Search items")}),(0,h.jsx)(ai,{autoSelect:"always",placeholder:(0,a.__)("Search"),className:"dataviews-filters__search-widget-filter-combobox__input"}),(0,h.jsx)("div",{className:"dataviews-filters__search-widget-filter-combobox__icon",children:(0,h.jsx)(r.Icon,{icon:Vi})})]}),(0,h.jsxs)(ui,{className:"dataviews-filters__search-widget-filter-combobox-list",alwaysVisible:!0,children:[u.map(e=>(0,h.jsxs)(Ci,{resetValueOnSelect:!1,value:e.value,className:"dataviews-filters__search-widget-listitem",hideOnClick:!1,setValueOnClick:!1,focusOnHover:!0,children:[t.singleSelection&&(0,h.jsx)(Di,{selected:d===e.value}),!t.singleSelection&&(0,h.jsx)(Ti,{selected:d.includes(e.value)}),(0,h.jsxs)("span",{children:[(0,h.jsx)(ki,{className:"dataviews-filters__search-widget-filter-combobox-item-value",value:e.label}),!!e.description&&(0,h.jsx)("span",{className:"dataviews-filters__search-widget-listitem-description",children:e.description})]})]},e.value)),!u.length&&(0,h.jsx)("p",{children:(0,a.__)("No results found")})]})]})}function zi(e){const{elements:t,isLoading:n}=Mi({elements:e.filter.elements,getElements:e.filter.getElements});if(n)return(0,h.jsx)("div",{className:"dataviews-filters__search-widget-no-elements",children:(0,h.jsx)(r.Spinner,{})});if(0===t.length)return(0,h.jsx)("div",{className:"dataviews-filters__search-widget-no-elements",children:(0,a.__)("No elements found")});const i=t.length>10?Ri:Bi;return(0,h.jsx)(i,{...e,filter:{...e.filter,elements:t}})}var Hi=i(252);function $i({filter:e,view:t,onChangeView:a,fields:i}){const l=t.filters?.find(t=>t.field===e.field),s=Li(e,l),o=(0,n.useMemo)(()=>{const t=i.find(t=>t.id===e.field);return t?{...t,isValid:{},getValue:({item:e})=>e[t.id],setValue:({value:e})=>({[t.id]:e})}:t},[i,e.field]),c=(0,n.useMemo)(()=>(t.filters??[]).reduce((e,t)=>(e[t.field]=t.value,e),{}),[t.filters]),d=(0,g.useEvent)(n=>{if(!o||!l)return;const i=o.getValue({item:n});Hi(i,s)||a({...t,filters:(t.filters??[]).map(t=>t.field===e.field?{...t,operator:l.operator||e.operators[0],value:""===i?void 0:i}:t)})});return o&&o.Edit&&l?(0,h.jsx)(r.Flex,{className:"dataviews-filters__user-input-widget",gap:2.5,direction:"column",children:(0,h.jsx)(o.Edit,{hideLabelFromVision:!0,data:c,field:o,operator:l.operator,onChange:d})}):null}var Wi={Name:(0,h.jsx)("span",{className:"dataviews-filters__summary-filter-text-name"}),Value:(0,h.jsx)("span",{className:"dataviews-filters__summary-filter-text-value"})},qi=[{name:_,
/* translators: DataViews operator name */
label:(0,a.__)("Includes"),filterText:(e,t)=>(0,n.createInterpolateElement)((0,a.sprintf)(
/* translators: 1: Filter name (e.g. "Author"). 2: Filter value (e.g. "Admin"): "Author is any: Admin, Editor". */
/* translators: 1: Filter name (e.g. "Author"). 2: Filter value (e.g. "Admin"): "Author is any: Admin, Editor". */
(0,a.__)("<Name>%1$s includes: </Name><Value>%2$s</Value>"),e.name,t.map(e=>e.label).join(", ")),Wi),selection:"multi"},{name:x,
/* translators: DataViews operator name */
label:(0,a.__)("Is none of"),filterText:(e,t)=>(0,n.createInterpolateElement)((0,a.sprintf)(
/* translators: 1: Filter name (e.g. "Author"). 2: Filter value (e.g. "Admin"): "Author is none of: Admin, Editor". */
/* translators: 1: Filter name (e.g. "Author"). 2: Filter value (e.g. "Admin"): "Author is none of: Admin, Editor". */
(0,a.__)("<Name>%1$s is none of: </Name><Value>%2$s</Value>"),e.name,t.map(e=>e.label).join(", ")),Wi),selection:"multi"},{name:y,
/* translators: DataViews operator name */
label:(0,a.__)("Includes all"),filterText:(e,t)=>(0,n.createInterpolateElement)((0,a.sprintf)(
/* translators: 1: Filter name (e.g. "Author"). 2: Filter value (e.g. "Admin"): "Author includes all: Admin, Editor". */
/* translators: 1: Filter name (e.g. "Author"). 2: Filter value (e.g. "Admin"): "Author includes all: Admin, Editor". */
(0,a.__)("<Name>%1$s includes all: </Name><Value>%2$s</Value>"),e.name,t.map(e=>e.label).join(", ")),Wi),selection:"multi"},{name:S,
/* translators: DataViews operator name */
label:(0,a.__)("Is none of"),filterText:(e,t)=>(0,n.createInterpolateElement)((0,a.sprintf)(
/* translators: 1: Filter name (e.g. "Author"). 2: Filter value (e.g. "Admin"): "Author is none of: Admin, Editor". */
/* translators: 1: Filter name (e.g. "Author"). 2: Filter value (e.g. "Admin"): "Author is none of: Admin, Editor". */
(0,a.__)("<Name>%1$s is none of: </Name><Value>%2$s</Value>"),e.name,t.map(e=>e.label).join(", ")),Wi),selection:"multi"},{name:C,
/* translators: DataViews operator name */
label:(0,a.__)("Between (inc)"),filterText:(e,t)=>(0,n.createInterpolateElement)((0,a.sprintf)(
/* translators: 1: Filter name (e.g. "Item count"). 2: Filter value min. 3: Filter value max. e.g.: "Item count between (inc): 10 and 180". */
/* translators: 1: Filter name (e.g. "Item count"). 2: Filter value min. 3: Filter value max. e.g.: "Item count between (inc): 10 and 180". */
(0,a.__)("<Name>%1$s between (inc): </Name><Value>%2$s and %3$s</Value>"),e.name,t[0].label[0],t[0].label[1]),Wi),selection:"custom"},{name:E,
/* translators: DataViews operator name */
label:(0,a.__)("In the past"),filterText:(e,t)=>(0,n.createInterpolateElement)((0,a.sprintf)(
/* translators: 1: Filter name (e.g. "Date"). 2: Filter value (e.g. "7 days"): "Date is in the past: 7 days". */
/* translators: 1: Filter name (e.g. "Date"). 2: Filter value (e.g. "7 days"): "Date is in the past: 7 days". */
(0,a.__)("<Name>%1$s is in the past: </Name><Value>%2$s</Value>"),e.name,`${t[0].value.value} ${t[0].value.unit}`),Wi),selection:"custom"},{name:j,
/* translators: DataViews operator name */
label:(0,a.__)("Over"),filterText:(e,t)=>(0,n.createInterpolateElement)((0,a.sprintf)(
/* translators: 1: Filter name (e.g. "Date"). 2: Filter value (e.g. "7 days"): "Date is over: 7 days". */
/* translators: 1: Filter name (e.g. "Date"). 2: Filter value (e.g. "7 days"): "Date is over: 7 days". */
(0,a.__)("<Name>%1$s is over: </Name><Value>%2$s</Value>"),e.name,`${t[0].value.value} ${t[0].value.unit}`),Wi),selection:"custom"},{name:k,
/* translators: DataViews operator name */
label:(0,a.__)("Is"),filterText:(e,t)=>(0,n.createInterpolateElement)((0,a.sprintf)(
/* translators: 1: Filter name (e.g. "Author"). 2: Filter value (e.g. "Admin"): "Author is: Admin". */
/* translators: 1: Filter name (e.g. "Author"). 2: Filter value (e.g. "Admin"): "Author is: Admin". */
(0,a.__)("<Name>%1$s is: </Name><Value>%2$s</Value>"),e.name,t[0].label),Wi),selection:"single"},{name:I,
/* translators: DataViews operator name */
label:(0,a.__)("Is not"),filterText:(e,t)=>(0,n.createInterpolateElement)((0,a.sprintf)(
/* translators: 1: Filter name (e.g. "Author"). 2: Filter value (e.g. "Admin"): "Author is not: Admin". */
/* translators: 1: Filter name (e.g. "Author"). 2: Filter value (e.g. "Admin"): "Author is not: Admin". */
(0,a.__)("<Name>%1$s is not: </Name><Value>%2$s</Value>"),e.name,t[0].label),Wi),selection:"single"},{name:V,
/* translators: DataViews operator name */
label:(0,a.__)("Less than"),filterText:(e,t)=>(0,n.createInterpolateElement)((0,a.sprintf)(
/* translators: 1: Filter name (e.g. "Count"). 2: Filter value (e.g. "10"): "Count is less than: 10". */
/* translators: 1: Filter name (e.g. "Count"). 2: Filter value (e.g. "10"): "Count is less than: 10". */
(0,a.__)("<Name>%1$s is less than: </Name><Value>%2$s</Value>"),e.name,t[0].label),Wi),selection:"single"},{name:N,
/* translators: DataViews operator name */
label:(0,a.__)("Greater than"),filterText:(e,t)=>(0,n.createInterpolateElement)((0,a.sprintf)(
/* translators: 1: Filter name (e.g. "Count"). 2: Filter value (e.g. "10"): "Count is greater than: 10". */
/* translators: 1: Filter name (e.g. "Count"). 2: Filter value (e.g. "10"): "Count is greater than: 10". */
(0,a.__)("<Name>%1$s is greater than: </Name><Value>%2$s</Value>"),e.name,t[0].label),Wi),selection:"single"},{name:L,
/* translators: DataViews operator name */
label:(0,a.__)("Less than or equal"),filterText:(e,t)=>(0,n.createInterpolateElement)((0,a.sprintf)(
/* translators: 1: Filter name (e.g. "Count"). 2: Filter value (e.g. "10"): "Count is less than or equal to: 10". */
/* translators: 1: Filter name (e.g. "Count"). 2: Filter value (e.g. "10"): "Count is less than or equal to: 10". */
(0,a.__)("<Name>%1$s is less than or equal to: </Name><Value>%2$s</Value>"),e.name,t[0].label),Wi),selection:"single"},{name:F,
/* translators: DataViews operator name */
label:(0,a.__)("Greater than or equal"),filterText:(e,t)=>(0,n.createInterpolateElement)((0,a.sprintf)(
/* translators: 1: Filter name (e.g. "Count"). 2: Filter value (e.g. "10"): "Count is greater than or equal to: 10". */
/* translators: 1: Filter name (e.g. "Count"). 2: Filter value (e.g. "10"): "Count is greater than or equal to: 10". */
(0,a.__)("<Name>%1$s is greater than or equal to: </Name><Value>%2$s</Value>"),e.name,t[0].label),Wi),selection:"single"},{name:M,
/* translators: DataViews operator name */
label:(0,a.__)("Before"),filterText:(e,t)=>(0,n.createInterpolateElement)((0,a.sprintf)(
/* translators: 1: Filter name (e.g. "Date"). 2: Filter value (e.g. "2024-01-01"): "Date is before: 2024-01-01". */
/* translators: 1: Filter name (e.g. "Date"). 2: Filter value (e.g. "2024-01-01"): "Date is before: 2024-01-01". */
(0,a.__)("<Name>%1$s is before: </Name><Value>%2$s</Value>"),e.name,t[0].label),Wi),selection:"single"},{name:P,
/* translators: DataViews operator name */
label:(0,a.__)("After"),filterText:(e,t)=>(0,n.createInterpolateElement)((0,a.sprintf)(
/* translators: 1: Filter name (e.g. "Date"). 2: Filter value (e.g. "2024-01-01"): "Date is after: 2024-01-01". */
/* translators: 1: Filter name (e.g. "Date"). 2: Filter value (e.g. "2024-01-01"): "Date is after: 2024-01-01". */
(0,a.__)("<Name>%1$s is after: </Name><Value>%2$s</Value>"),e.name,t[0].label),Wi),selection:"single"},{name:A,
/* translators: DataViews operator name */
label:(0,a.__)("Before (inc)"),filterText:(e,t)=>(0,n.createInterpolateElement)((0,a.sprintf)(
/* translators: 1: Filter name (e.g. "Date"). 2: Filter value (e.g. "2024-01-01"): "Date is on or before: 2024-01-01". */
/* translators: 1: Filter name (e.g. "Date"). 2: Filter value (e.g. "2024-01-01"): "Date is on or before: 2024-01-01". */
(0,a.__)("<Name>%1$s is on or before: </Name><Value>%2$s</Value>"),e.name,t[0].label),Wi),selection:"single"},{name:O,
/* translators: DataViews operator name */
label:(0,a.__)("After (inc)"),filterText:(e,t)=>(0,n.createInterpolateElement)((0,a.sprintf)(
/* translators: 1: Filter name (e.g. "Date"). 2: Filter value (e.g. "2024-01-01"): "Date is on or after: 2024-01-01". */
/* translators: 1: Filter name (e.g. "Date"). 2: Filter value (e.g. "2024-01-01"): "Date is on or after: 2024-01-01". */
(0,a.__)("<Name>%1$s is on or after: </Name><Value>%2$s</Value>"),e.name,t[0].label),Wi),selection:"single"},{name:T,
/* translators: DataViews operator name */
label:(0,a.__)("Contains"),filterText:(e,t)=>(0,n.createInterpolateElement)((0,a.sprintf)(
/* translators: 1: Filter name (e.g. "Title"). 2: Filter value (e.g. "Hello"): "Title contains: Hello". */
/* translators: 1: Filter name (e.g. "Title"). 2: Filter value (e.g. "Hello"): "Title contains: Hello". */
(0,a.__)("<Name>%1$s contains: </Name><Value>%2$s</Value>"),e.name,t[0].label),Wi),selection:"single"},{name:D,
/* translators: DataViews operator name */
label:(0,a.__)("Doesn't contain"),filterText:(e,t)=>(0,n.createInterpolateElement)((0,a.sprintf)(
/* translators: 1: Filter name (e.g. "Title"). 2: Filter value (e.g. "Hello"): "Title doesn't contain: Hello". */
/* translators: 1: Filter name (e.g. "Title"). 2: Filter value (e.g. "Hello"): "Title doesn't contain: Hello". */
(0,a.__)("<Name>%1$s doesn't contain: </Name><Value>%2$s</Value>"),e.name,t[0].label),Wi),selection:"single"},{name:B,
/* translators: DataViews operator name */
label:(0,a.__)("Starts with"),filterText:(e,t)=>(0,n.createInterpolateElement)((0,a.sprintf)(
/* translators: 1: Filter name (e.g. "Title"). 2: Filter value (e.g. "Hello"): "Title starts with: Hello". */
/* translators: 1: Filter name (e.g. "Title"). 2: Filter value (e.g. "Hello"): "Title starts with: Hello". */
(0,a.__)("<Name>%1$s starts with: </Name><Value>%2$s</Value>"),e.name,t[0].label),Wi),selection:"single"},{name:R,
/* translators: DataViews operator name */
label:(0,a.__)("On"),filterText:(e,t)=>(0,n.createInterpolateElement)((0,a.sprintf)(
/* translators: 1: Filter name (e.g. "Date"). 2: Filter value (e.g. "2024-01-01"): "Date is: 2024-01-01". */
/* translators: 1: Filter name (e.g. "Date"). 2: Filter value (e.g. "2024-01-01"): "Date is: 2024-01-01". */
(0,a.__)("<Name>%1$s is: </Name><Value>%2$s</Value>"),e.name,t[0].label),Wi),selection:"single"},{name:z,
/* translators: DataViews operator name */
label:(0,a.__)("Not on"),filterText:(e,t)=>(0,n.createInterpolateElement)((0,a.sprintf)(
/* translators: 1: Filter name (e.g. "Date"). 2: Filter value (e.g. "2024-01-01"): "Date is not: 2024-01-01". */
/* translators: 1: Filter name (e.g. "Date"). 2: Filter value (e.g. "2024-01-01"): "Date is not: 2024-01-01". */
(0,a.__)("<Name>%1$s is not: </Name><Value>%2$s</Value>"),e.name,t[0].label),Wi),selection:"single"}],Gi=e=>qi.find(t=>t.name===e),Ki="Enter",Ui=" ",Yi=({activeElements:e,filterInView:t,filter:n})=>{if(void 0===e||0===e.length)return n.name;const i=Gi(t?.operator);return void 0!==i?i.filterText(n,e):(0,a.sprintf)(
/* translators: 1: Filter name e.g.: "Unknown status for Author". */
/* translators: 1: Filter name e.g.: "Unknown status for Author". */
(0,a.__)("Unknown status for %1$s"),n.name)};function Zi({filter:e,view:t,onChangeView:n}){const i=e.operators?.map(e=>({value:e,label:Gi(e)?.label||e})),l=t.filters?.find(t=>t.field===e.field),s=l?.operator||e.operators[0];return i.length>1&&(0,h.jsxs)(p.Stack,{direction:"row",gap:"xs",justify:"flex-start",className:"dataviews-filters__summary-operators-container",align:"center",children:[(0,h.jsx)(r.FlexItem,{className:"dataviews-filters__summary-operators-filter-name",children:e.name}),(0,h.jsx)(r.SelectControl,{className:"dataviews-filters__summary-operators-filter-select",label:(0,a.__)("Conditions"),value:s,options:i,onChange:a=>{const i=a,r=l?.operator,s=l?[...(t.filters??[]).map(t=>{if(t.field===e.field){const e=Gi(r)?.selection,n=Gi(i)?.selection,a=e!==n||[e,n].includes("custom");return{...t,value:a?void 0:t.value,operator:i}}return t})]:[...t.filters??[],{field:e.field,operator:i,value:void 0}];n({...t,page:1,filters:s})},size:"small",variant:"minimal",hideLabelFromVision:!0})]})}function Xi({addFilterRef:e,openedFilter:t,fields:i,...l}){const s=(0,n.useRef)(null),{filter:o,view:c,onChangeView:d}=l,u=c.filters?.find(e=>e.field===o.field);let m=[];const f=(0,n.useMemo)(()=>{const e=i.find(e=>e.id===o.field);return e?{...e,getValue:({item:t})=>t[e.id]}:e},[i,o.field]),{elements:g}=Mi({elements:o.elements,getElements:o.getElements});if(g.length>0)m=g.filter(e=>o.singleSelection?e.value===u?.value:u?.value?.includes(e.value));else if(Array.isArray(u?.value)){const e=u.value.map(e=>{const t=f?.getValueFormatted({item:{[f.id]:e},field:f});return t||String(e)});m=[{value:u.value,label:e}]}else if("object"==typeof u?.value)m=[{value:u.value,label:u.value}];else if(void 0!==u?.value){const e=void 0!==f?f.getValueFormatted({item:{[f.id]:u.value},field:f}):String(u.value);m=[{value:u.value,label:e}]}const v=o.isPrimary,b=u?.isLocked,w=!b&&void 0!==u?.value,_=!b&&(!v||w);return(0,h.jsx)(r.Dropdown,{defaultOpen:t===o.field,contentClassName:"dataviews-filters__summary-popover",popoverProps:{placement:"bottom-start",role:"dialog"},onClose:()=>{s.current?.focus()},renderToggle:({isOpen:t,onToggle:n})=>(0,h.jsxs)("div",{className:"dataviews-filters__summary-chip-container",children:[(0,h.jsx)(r.Tooltip,{text:(0,a.sprintf)(
/* translators: 1: Filter name. */
/* translators: 1: Filter name. */
(0,a.__)("Filter by: %1$s"),o.name.toLowerCase()),placement:"top",children:(0,h.jsx)("div",{className:ae("dataviews-filters__summary-chip",{"has-reset":_,"has-values":w,"is-not-clickable":b}),role:"button",tabIndex:b?-1:0,onClick:()=>{b||n()},onKeyDown:e=>{!b&&[Ki,Ui].includes(e.key)&&(n(),e.preventDefault())},"aria-disabled":b,"aria-pressed":t,"aria-expanded":t,ref:s,children:(0,h.jsx)(Yi,{activeElements:m,filterInView:u,filter:o})})}),_&&(0,h.jsx)(r.Tooltip,{text:v?(0,a.__)("Reset"):(0,a.__)("Remove"),placement:"top",children:(0,h.jsx)("button",{className:ae("dataviews-filters__summary-chip-remove",{"has-values":w}),onClick:()=>{d({...c,page:1,filters:c.filters?.filter(e=>e.field!==o.field)}),v?s.current?.focus():e.current?.focus()},children:(0,h.jsx)(r.Icon,{icon:_e})})})]}),renderContent:()=>(0,h.jsxs)(p.Stack,{direction:"column",justify:"flex-start",children:[(0,h.jsx)(Zi,{...l}),l.filter.hasElements?(0,h.jsx)(zi,{...l,filter:{...l.filter,elements:g}}):(0,h.jsx)($i,{...l,fields:i})]})})}function Qi({filters:e,view:t,onChangeView:n}){const i=!t.search&&!t.filters?.some(t=>{return!(t.isLocked||void 0===t.value&&(n=t.field,e.some(e=>e.field===n&&e.isPrimary)));var n});return(0,h.jsx)(r.Button,{disabled:i,accessibleWhenDisabled:!0,size:"compact",variant:"tertiary",className:"dataviews-filters__reset-button",onClick:()=>{n({...t,page:1,search:"",filters:t.filters?.filter(e=>!!e.isLocked)||[]})},children:(0,a.__)("Reset")})}var Ji=function(e,t){return(0,n.useMemo)(()=>{const n=[];return e.forEach(e=>{if(!1===e.filterBy||!e.hasElements&&!e.Edit)return;const a=e.filterBy.operators,i=!!e.filterBy?.isPrimary,r=t.filters?.some(t=>t.field===e.id&&!!t.isLocked)??!1;n.push({field:e.id,name:e.label,elements:e.elements,getElements:e.getElements,hasElements:e.hasElements,singleSelection:a.some(e=>{return t=e,qi.filter(e=>"single"===e.selection).some(e=>e.name===t);var t}),operators:a,isVisible:r||i||!!t.filters?.some(t=>{return t.field===e.id&&(n=t.operator,qi.some(e=>e.name===n));var n}),isPrimary:i,isLocked:r})}),n.sort((e,t)=>e.isLocked&&!t.isLocked?-1:!e.isLocked&&t.isLocked?1:e.isPrimary&&!t.isPrimary?-1:!e.isPrimary&&t.isPrimary?1:e.name.localeCompare(t.name)),n},[e,t])},er=(0,n.memo)(function({className:e}){const{fields:t,view:a,onChangeView:i,openedFilter:r,setOpenedFilter:l}=(0,n.useContext)(Z),s=(0,n.useRef)(null),o=Ji(t,a),c=(0,h.jsx)(xt,{filters:o,view:a,onChangeView:i,ref:s,setOpenedFilter:l},"add-filter"),d=o.filter(e=>e.isVisible);if(0===d.length)return null;const u=[...d.map(e=>(0,h.jsx)(Xi,{filter:e,view:a,fields:t,onChangeView:i,addFilterRef:s,openedFilter:r},e.field)),c];return u.push((0,h.jsx)(Qi,{filters:o,view:a,onChangeView:i},"reset-filters")),(0,h.jsx)(p.Stack,{direction:"row",justify:"flex-start",gap:"xs",style:{width:"fit-content"},wrap:"wrap",className:e,children:u})}),tr=function(e){const{isShowingFilter:t}=(0,n.useContext)(Z);return t?(0,h.jsx)(er,{...e}):null};function nr({className:e}){const{actions:t=[],data:i,fields:r,getItemId:l,getItemLevel:s,isLoading:o,view:c,onChangeView:d,selection:u,onChangeSelection:m,setOpenedFilter:f,onClickItem:g,isItemClickable:p,renderItemLink:v,defaultLayouts:b,empty:w=(0,h.jsx)("p",{children:(0,a.__)("No results")})}=(0,n.useContext)(Z),_=bt.find(e=>e.type===c.type&&b[e.type])?.component;return(0,h.jsx)(_,{className:e,actions:t,data:i,fields:r,getItemId:l,getItemLevel:s,isLoading:o,onChangeView:d,onChangeSelection:m,selection:u,setOpenedFilter:f,onClickItem:g,renderItemLink:v,isItemClickable:p,view:c,empty:w})}var ar=(0,h.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,h.jsx)(v.Path,{d:"M6.6 6L5.4 7l4.5 5-4.5 5 1.1 1 5.5-6-5.4-6zm6 0l-1.1 1 4.5 5-4.5 5 1.1 1 5.5-6-5.5-6z"})}),ir=(0,h.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,h.jsx)(v.Path,{d:"M11.6 7l-1.1-1L5 12l5.5 6 1.1-1L7 12l4.6-5zm6 0l-1.1-1-5.5 6 5.5 6 1.1-1-4.6-5 4.6-5z"})});function rr(){const{view:e,onChangeView:t,paginationInfo:{totalItems:i=0,totalPages:l}}=(0,n.useContext)(Z);if(!i||!l||e.infiniteScrollEnabled)return null;const s=e.page??1,o=Array.from(Array(l)).map((e,t)=>{const n=t+1;return{value:n.toString(),label:n.toString(),"aria-label":s===n?(0,a.sprintf)(
// translators: 1: current page number. 2: total number of pages.
// translators: 1: current page number. 2: total number of pages.
(0,a.__)("Page %1$d of %2$d"),s,l):n.toString()}});return!!i&&1!==l&&(0,h.jsxs)(p.Stack,{direction:"row",className:"dataviews-pagination",justify:"end",align:"center",gap:"lg",children:[(0,h.jsx)(p.Stack,{direction:"row",justify:"flex-start",align:"center",gap:"2xs",className:"dataviews-pagination__page-select",children:(0,n.createInterpolateElement)((0,a.sprintf)(
// translators: 1: Current page number, 2: Total number of pages.
// translators: 1: Current page number, 2: Total number of pages.
(0,a._x)("<div>Page</div>%1$s<div>of %2$d</div>","paging"),"<CurrentPage />",l),{div:(0,h.jsx)("div",{"aria-hidden":!0}),CurrentPage:(0,h.jsx)(r.SelectControl,{"aria-label":(0,a.__)("Current page"),value:s.toString(),options:o,onChange:n=>{t({...e,page:+n})},size:"small",variant:"minimal"})})}),(0,h.jsxs)(p.Stack,{direction:"row",gap:"2xs",align:"center",children:[(0,h.jsx)(r.Button,{onClick:()=>t({...e,page:s-1}),disabled:1===s,accessibleWhenDisabled:!0,label:(0,a.__)("Previous page"),icon:(0,a.isRTL)()?ar:ir,showTooltip:!0,size:"compact",tooltipPosition:"top"}),(0,h.jsx)(r.Button,{onClick:()=>t({...e,page:s+1}),disabled:s>=l,accessibleWhenDisabled:!0,label:(0,a.__)("Next page"),icon:(0,a.isRTL)()?ir:ar,showTooltip:!0,size:"compact",tooltipPosition:"top"})]})]})}var lr=(0,n.memo)(rr),sr=[];function or(){const{view:e,paginationInfo:{totalItems:t=0,totalPages:a},data:i,actions:r=sr}=(0,n.useContext)(Z),l=Se(r,i)&&[K,U].includes(e.type);return!t||!a||a<=1&&!l?null:!!t&&(0,h.jsxs)(p.Stack,{direction:"row",justify:"end",align:"center",className:"dataviews-footer",gap:"xs",children:[l&&(0,h.jsx)(Ne,{}),(0,h.jsx)(lr,{})]})}var cr=(0,n.memo)(function({label:e}){const{view:t,onChangeView:i}=(0,n.useContext)(Z),[l,s,o]=(0,g.useDebouncedInput)(t.search);(0,n.useEffect)(()=>{s(t.search??"")},[t.search,s]);const c=(0,n.useRef)(i),d=(0,n.useRef)(t);(0,n.useEffect)(()=>{c.current=i,d.current=t},[i,t]),(0,n.useEffect)(()=>{o!==d.current?.search&&c.current({...d.current,page:1,search:o})},[o]);const u=e||(0,a.__)("Search");return(0,h.jsx)(r.SearchControl,{className:"dataviews-search",onChange:s,value:l,label:u,placeholder:u,size:"compact"})}),dr=(0,h.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,h.jsx)(v.Path,{fillRule:"evenodd",d:"M10.289 4.836A1 1 0 0111.275 4h1.306a1 1 0 01.987.836l.244 1.466c.787.26 1.503.679 2.108 1.218l1.393-.522a1 1 0 011.216.437l.653 1.13a1 1 0 01-.23 1.273l-1.148.944a6.025 6.025 0 010 2.435l1.149.946a1 1 0 01.23 1.272l-.653 1.13a1 1 0 01-1.216.437l-1.394-.522c-.605.54-1.32.958-2.108 1.218l-.244 1.466a1 1 0 01-.987.836h-1.306a1 1 0 01-.986-.836l-.244-1.466a5.995 5.995 0 01-2.108-1.218l-1.394.522a1 1 0 01-1.217-.436l-.653-1.131a1 1 0 01.23-1.272l1.149-.946a6.026 6.026 0 010-2.435l-1.148-.944a1 1 0 01-.23-1.272l.653-1.131a1 1 0 011.217-.437l1.393.522a5.994 5.994 0 012.108-1.218l.244-1.466zM14.929 12a3 3 0 11-6 0 3 3 0 016 0z",clipRule:"evenodd"})});const ur=window.wp.warning;function mr(){const e=(0,n.useContext)(Z),{view:t,onChangeView:i}=e,l=t.infiniteScrollEnabled??!1;return e.hasInfiniteScrollHandler?(0,h.jsx)(r.ToggleControl,{label:(0,a.__)("Enable infinite scroll"),help:(0,a.__)("Automatically load more content as you scroll, instead of showing pagination links."),checked:l,onChange:e=>{i({...t,infiniteScrollEnabled:e})}}):null}var{Menu:fr}=de(r.privateApis),gr={className:"dataviews-config__popover",placement:"bottom-end",offset:9};function pr(){const{view:e,onChangeView:t,defaultLayouts:i}=(0,n.useContext)(Z),l=Object.keys(i);if(l.length<=1)return null;const s=bt.find(t=>e.type===t.type);return(0,h.jsxs)(fr,{children:[(0,h.jsx)(fr.TriggerButton,{render:(0,h.jsx)(r.Button,{size:"compact",icon:s?.icon,label:(0,a.__)("Layout")})}),(0,h.jsx)(fr.Popover,{children:l.map(n=>{const a=bt.find(e=>e.type===n);return a?(0,h.jsx)(fr.RadioItem,{value:n,name:"view-actions-available-view",checked:n===e.type,hideOnClick:!0,onChange:n=>{switch(n.target.value){case"list":case"grid":case"table":case"pickerGrid":case"pickerTable":case"activity":const a={...e};return"layout"in a&&delete a.layout,t({...a,type:n.target.value,...i[n.target.value]})}ur("Invalid dataview")},children:(0,h.jsx)(fr.ItemLabel,{children:a.label})},n):null})})]})}function vr(){const{view:e,fields:t,onChangeView:i}=(0,n.useContext)(Z),l=(0,n.useMemo)(()=>t.filter(e=>!1!==e.enableSorting).map(e=>({label:e.label,value:e.id})),[t]);return(0,h.jsx)(r.SelectControl,{__next40pxDefaultSize:!0,label:(0,a.__)("Sort by"),value:e.sort?.field,options:l,onChange:t=>{i({...e,sort:{direction:e?.sort?.direction||"desc",field:t},showLevels:!1})}})}function hr(){const{view:e,fields:t,onChangeView:i}=(0,n.useContext)(Z);if(0===t.filter(e=>!1!==e.enableSorting).length)return null;let l=e.sort?.direction;return!l&&e.sort?.field&&(l="desc"),(0,h.jsx)(r.__experimentalToggleGroupControl,{className:"dataviews-view-config__sort-direction",__next40pxDefaultSize:!0,isBlock:!0,label:(0,a.__)("Order"),value:l,onChange:n=>{"asc"!==n&&"desc"!==n?ur("Invalid direction"):i({...e,sort:{direction:n,field:e.sort?.field||t.find(e=>!1!==e.enableSorting)?.id||""},showLevels:!1})},children:H.map(e=>(0,h.jsx)(r.__experimentalToggleGroupControlOptionIcon,{value:e,icon:G[e],label:q[e]},e))})}function br(){const{view:e,config:t,onChangeView:i}=(0,n.useContext)(Z),{infiniteScrollEnabled:l}=e;return!t||!t.perPageSizes||t.perPageSizes.length<2||t.perPageSizes.length>6||l?null:(0,h.jsx)(r.__experimentalToggleGroupControl,{__next40pxDefaultSize:!0,isBlock:!0,label:(0,a.__)("Items per page"),value:e.perPage||10,disabled:!e?.sort?.field,onChange:t=>{const n="number"==typeof t||void 0===t?t:parseInt(t,10);i({...e,perPage:n,page:1})},children:t.perPageSizes.map(e=>(0,h.jsx)(r.__experimentalToggleGroupControlOption,{value:e,label:e.toString()},e))})}function wr({title:e,description:t,children:n}){return(0,h.jsxs)(r.__experimentalGrid,{columns:12,className:"dataviews-settings-section",gap:4,children:[(0,h.jsxs)("div",{className:"dataviews-settings-section__sidebar",children:[(0,h.jsx)(r.__experimentalHeading,{level:2,className:"dataviews-settings-section__title",children:e}),t&&(0,h.jsx)(r.__experimentalText,{variant:"muted",className:"dataviews-settings-section__description",children:t})]}),(0,h.jsx)(r.__experimentalGrid,{columns:8,gap:4,className:"dataviews-settings-section__content",children:n})]})}function _r(){const{view:e}=(0,n.useContext)(Z),t=(0,g.useInstanceId)(xr,"dataviews-view-config-dropdown"),i=bt.find(t=>t.type===e.type);return(0,h.jsx)(r.Dropdown,{expandOnMobile:!0,popoverProps:{...gr,id:t},renderToggle:({onToggle:e,isOpen:n})=>(0,h.jsx)(r.Button,{size:"compact",icon:dr,label:(0,a._x)("View options","View is used as a noun"),onClick:e,"aria-expanded":n?"true":"false","aria-controls":t}),renderContent:()=>(0,h.jsx)(r.__experimentalDropdownContentWrapper,{paddingSize:"medium",className:"dataviews-config__popover-content-wrapper",children:(0,h.jsx)(p.Stack,{direction:"column",className:"dataviews-view-config",gap:"lg",children:(0,h.jsxs)(wr,{title:(0,a.__)("Appearance"),children:[(0,h.jsxs)(p.Stack,{direction:"row",gap:"xs",className:"is-divided-in-two",children:[(0,h.jsx)(vr,{}),(0,h.jsx)(hr,{})]}),!!i?.viewConfigOptions&&(0,h.jsx)(i.viewConfigOptions,{}),(0,h.jsx)(mr,{}),(0,h.jsx)(br,{}),(0,h.jsx)(qe,{})]})})})})}function xr(){return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(pr,{}),(0,h.jsx)(_r,{})]})}var yr=(0,n.memo)(xr);function Sr(e,t){let n;return e?.required&&t?.required?n=t?.required?.message?t.required:void 0:e?.pattern&&t?.pattern?n=t.pattern:e?.min&&t?.min?n=t.min:e?.max&&t?.max?n=t.max:e?.minLength&&t?.minLength?n=t.minLength:e?.maxLength&&t?.maxLength?n=t.maxLength:e?.elements&&t?.elements?n=t.elements:t?.custom&&(n=t.custom),n}var{ValidatedCheckboxControl:Cr}=de(r.privateApis);const Er={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function jr(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const kr={date:jr({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:jr({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:jr({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Ir={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Vr(e){return(t,n)=>{let a;if("formatting"===(n?.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,i=n?.width?String(n.width):t;a=e.formattingValues[i]||e.formattingValues[t]}else{const t=e.defaultWidth,i=n?.width?String(n.width):e.defaultWidth;a=e.values[i]||e.values[t]}return a[e.argumentCallback?e.argumentCallback(t):t]}}function Nr(e){return(t,n={})=>{const a=n.width,i=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],r=t.match(i);if(!r)return null;const l=r[0],s=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],o=Array.isArray(s)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}(s,e=>e.test(l)):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}(s,e=>e.test(l));let c;return c=e.valueCallback?e.valueCallback(o):o,c=n.valueCallback?n.valueCallback(c):c,{value:c,rest:t.slice(l.length)}}}var Lr;const Fr={code:"en-US",formatDistance:(e,t,n)=>{let a;const i=Er[e];return a="string"==typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a},formatLong:kr,formatRelative:(e,t,n,a)=>Ir[e],localize:{ordinalNumber:(e,t)=>{const n=Number(e),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:Vr({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Vr({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:Vr({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Vr({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Vr({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(Lr={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},(e,t={})=>{const n=e.match(Lr.matchPattern);if(!n)return null;const a=n[0],i=e.match(Lr.parsePattern);if(!i)return null;let r=Lr.valueCallback?Lr.valueCallback(i[0]):i[0];return r=t.valueCallback?t.valueCallback(r):r,{value:r,rest:e.slice(a.length)}}),era:Nr({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Nr({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:Nr({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Nr({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Nr({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};let Mr={};function Pr(){return Mr}Math.pow(10,8);const Ar=6048e5,Or=Symbol.for("constructDateFrom");function Tr(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&Or in e?e[Or](t):e instanceof Date?new e.constructor(t):new Date(t)}function Dr(e,t){return Tr(t||e,e)}function Br(e){const t=Dr(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Rr(e,t){const n=Dr(e,t?.in);return n.setHours(0,0,0,0),n}function zr(e,t){const n=Dr(e,t?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Hr(e,t){const n=Dr(e,t?.in);return function(e,t,n){const[a,i]=function(e,...t){const n=Tr.bind(null,e||t.find(e=>"object"==typeof e));return t.map(n)}(n?.in,e,t),r=Rr(a),l=Rr(i),s=+r-Br(r),o=+l-Br(l);return Math.round((s-o)/864e5)}(n,zr(n))+1}function $r(e,t){const n=Pr(),a=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=Dr(e,t?.in),r=i.getDay(),l=(r<a?7:0)+r-a;return i.setDate(i.getDate()-l),i.setHours(0,0,0,0),i}function Wr(e,t){return $r(e,{...t,weekStartsOn:1})}function qr(e,t){const n=Dr(e,t?.in),a=n.getFullYear(),i=Tr(n,0);i.setFullYear(a+1,0,4),i.setHours(0,0,0,0);const r=Wr(i),l=Tr(n,0);l.setFullYear(a,0,4),l.setHours(0,0,0,0);const s=Wr(l);return n.getTime()>=r.getTime()?a+1:n.getTime()>=s.getTime()?a:a-1}function Gr(e,t){const n=Dr(e,t?.in),a=+Wr(n)-+function(e,t){const n=qr(e,t),a=Tr(t?.in||e,0);return a.setFullYear(n,0,4),a.setHours(0,0,0,0),Wr(a)}(n);return Math.round(a/Ar)+1}function Kr(e,t){const n=Dr(e,t?.in),a=n.getFullYear(),i=Pr(),r=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,l=Tr(t?.in||e,0);l.setFullYear(a+1,0,r),l.setHours(0,0,0,0);const s=$r(l,t),o=Tr(t?.in||e,0);o.setFullYear(a,0,r),o.setHours(0,0,0,0);const c=$r(o,t);return+n>=+s?a+1:+n>=+c?a:a-1}function Ur(e,t){const n=Dr(e,t?.in),a=+$r(n,t)-+function(e,t){const n=Pr(),a=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,i=Kr(e,t),r=Tr(t?.in||e,0);return r.setFullYear(i,0,a),r.setHours(0,0,0,0),$r(r,t)}(n,t);return Math.round(a/Ar)+1}function Yr(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const Zr={y(e,t){const n=e.getFullYear(),a=n>0?n:1-n;return Yr("yy"===t?a%100:a,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):Yr(n+1,2)},d:(e,t)=>Yr(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>Yr(e.getHours()%12||12,t.length),H:(e,t)=>Yr(e.getHours(),t.length),m:(e,t)=>Yr(e.getMinutes(),t.length),s:(e,t)=>Yr(e.getSeconds(),t.length),S(e,t){const n=t.length,a=e.getMilliseconds();return Yr(Math.trunc(a*Math.pow(10,n-3)),t.length)}},Xr={G:function(e,t,n){const a=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(a,{width:"abbreviated"});case"GGGGG":return n.era(a,{width:"narrow"});default:return n.era(a,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),a=t>0?t:1-t;return n.ordinalNumber(a,{unit:"year"})}return Zr.y(e,t)},Y:function(e,t,n,a){const i=Kr(e,a),r=i>0?i:1-i;return"YY"===t?Yr(r%100,2):"Yo"===t?n.ordinalNumber(r,{unit:"year"}):Yr(r,t.length)},R:function(e,t){return Yr(qr(e),t.length)},u:function(e,t){return Yr(e.getFullYear(),t.length)},Q:function(e,t,n){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return Yr(a,2);case"Qo":return n.ordinalNumber(a,{unit:"quarter"});case"QQQ":return n.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(a,{width:"narrow",context:"formatting"});default:return n.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,t,n){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return Yr(a,2);case"qo":return n.ordinalNumber(a,{unit:"quarter"});case"qqq":return n.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(a,{width:"narrow",context:"standalone"});default:return n.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,t,n){const a=e.getMonth();switch(t){case"M":case"MM":return Zr.M(e,t);case"Mo":return n.ordinalNumber(a+1,{unit:"month"});case"MMM":return n.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(a,{width:"narrow",context:"formatting"});default:return n.month(a,{width:"wide",context:"formatting"})}},L:function(e,t,n){const a=e.getMonth();switch(t){case"L":return String(a+1);case"LL":return Yr(a+1,2);case"Lo":return n.ordinalNumber(a+1,{unit:"month"});case"LLL":return n.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(a,{width:"narrow",context:"standalone"});default:return n.month(a,{width:"wide",context:"standalone"})}},w:function(e,t,n,a){const i=Ur(e,a);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):Yr(i,t.length)},I:function(e,t,n){const a=Gr(e);return"Io"===t?n.ordinalNumber(a,{unit:"week"}):Yr(a,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):Zr.d(e,t)},D:function(e,t,n){const a=Hr(e);return"Do"===t?n.ordinalNumber(a,{unit:"dayOfYear"}):Yr(a,t.length)},E:function(e,t,n){const a=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},e:function(e,t,n,a){const i=e.getDay(),r=(i-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(r);case"ee":return Yr(r,2);case"eo":return n.ordinalNumber(r,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,a){const i=e.getDay(),r=(i-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(r);case"cc":return Yr(r,t.length);case"co":return n.ordinalNumber(r,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const a=e.getDay(),i=0===a?7:a;switch(t){case"i":return String(i);case"ii":return Yr(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const a=e.getHours();let i;switch(i=12===a?"noon":0===a?"midnight":a/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const a=e.getHours();let i;switch(i=a>=17?"evening":a>=12?"afternoon":a>=4?"morning":"night",t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return Zr.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):Zr.H(e,t)},K:function(e,t,n){const a=e.getHours()%12;return"Ko"===t?n.ordinalNumber(a,{unit:"hour"}):Yr(a,t.length)},k:function(e,t,n){let a=e.getHours();return 0===a&&(a=24),"ko"===t?n.ordinalNumber(a,{unit:"hour"}):Yr(a,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Zr.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Zr.s(e,t)},S:function(e,t){return Zr.S(e,t)},X:function(e,t,n){const a=e.getTimezoneOffset();if(0===a)return"Z";switch(t){case"X":return Jr(a);case"XXXX":case"XX":return el(a);default:return el(a,":")}},x:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"x":return Jr(a);case"xxxx":case"xx":return el(a);default:return el(a,":")}},O:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Qr(a,":");default:return"GMT"+el(a,":")}},z:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Qr(a,":");default:return"GMT"+el(a,":")}},t:function(e,t,n){return Yr(Math.trunc(+e/1e3),t.length)},T:function(e,t,n){return Yr(+e,t.length)}};function Qr(e,t=""){const n=e>0?"-":"+",a=Math.abs(e),i=Math.trunc(a/60),r=a%60;return 0===r?n+String(i):n+String(i)+t+Yr(r,2)}function Jr(e,t){return e%60==0?(e>0?"-":"+")+Yr(Math.abs(e)/60,2):el(e,t)}function el(e,t=""){const n=e>0?"-":"+",a=Math.abs(e);return n+Yr(Math.trunc(a/60),2)+t+Yr(a%60,2)}const tl=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},nl=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},al={p:nl,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],a=n[1],i=n[2];if(!i)return tl(e,t);let r;switch(a){case"P":r=t.dateTime({width:"short"});break;case"PP":r=t.dateTime({width:"medium"});break;case"PPP":r=t.dateTime({width:"long"});break;default:r=t.dateTime({width:"full"})}return r.replace("{{date}}",tl(a,t)).replace("{{time}}",nl(i,t))}},il=/^D+$/,rl=/^Y+$/,ll=["D","DD","YY","YYYY"];function sl(e){return!(!((t=e)instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t))&&"number"!=typeof e||isNaN(+Dr(e)));var t}const ol=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,cl=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,dl=/^'([^]*?)'?$/,ul=/''/g,ml=/[a-zA-Z]/;function fl(e,t,n){const a=Pr(),i=n?.locale??a.locale??Fr,r=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,l=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??a.weekStartsOn??a.locale?.options?.weekStartsOn??0,s=Dr(e,n?.in);if(!sl(s))throw new RangeError("Invalid time value");let o=t.match(cl).map(e=>{const t=e[0];return"p"===t||"P"===t?(0,al[t])(e,i.formatLong):e}).join("").match(ol).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:gl(e)};if(Xr[t])return{isToken:!0,value:e};if(t.match(ml))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});i.localize.preprocessor&&(o=i.localize.preprocessor(s,o));const c={firstWeekContainsDate:r,weekStartsOn:l,locale:i};return o.map(a=>{if(!a.isToken)return a.value;const r=a.value;return(!n?.useAdditionalWeekYearTokens&&function(e){return rl.test(e)}(r)||!n?.useAdditionalDayOfYearTokens&&function(e){return il.test(e)}(r))&&function(e,t,n){const a=function(e,t,n){const a="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${a} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,n);if(console.warn(a),ll.includes(e))throw new RangeError(a)}(r,t,String(e)),(0,Xr[r[0]])(s,r,i.localize,c)}).join("")}function gl(e){const t=e.match(dl);return t?t[1].replace(ul,"'"):e}const pl=window.wp.date;var vl={[E]:[{value:"days",label:(0,a.__)("Days")},{value:"weeks",label:(0,a.__)("Weeks")},{value:"months",label:(0,a.__)("Months")},{value:"years",label:(0,a.__)("Years")}],[j]:[{value:"days",label:(0,a.__)("Days ago")},{value:"weeks",label:(0,a.__)("Weeks ago")},{value:"months",label:(0,a.__)("Months ago")},{value:"years",label:(0,a.__)("Years ago")}]};function hl({className:e,data:t,field:i,onChange:l,hideLabelFromVision:s,operator:o}){const c=vl[o===E?"inThePast":"over"],{id:d,label:u,getValue:m,setValue:f}=i,g=m({item:t}),{value:v="",unit:b=c[0].value}=g&&"object"==typeof g?g:{},w=(0,n.useCallback)(e=>l(f({item:t,value:{value:Number(e),unit:b}})),[l,f,t,b]),_=(0,n.useCallback)(e=>l(f({item:t,value:{value:v,unit:e}})),[l,f,t,v]);return(0,h.jsx)(r.BaseControl,{id:d,className:ae(e,"dataviews-controls__relative-date"),label:u,hideLabelFromVision:s,children:(0,h.jsxs)(p.Stack,{direction:"row",gap:"xs",children:[(0,h.jsx)(r.__experimentalNumberControl,{__next40pxDefaultSize:!0,className:"dataviews-controls__relative-date-number",spinControls:"none",min:1,step:1,value:v,onChange:w}),(0,h.jsx)(r.SelectControl,{className:"dataviews-controls__relative-date-unit",__next40pxDefaultSize:!0,label:(0,a.__)("Unit"),value:b,options:c,onChange:_,hideLabelFromVision:!0})]})})}function bl(e){if(!e)return null;const t=(0,pl.getDate)(e);return t&&sl(t)?t:null}var{DateCalendar:wl,ValidatedInputControl:_l}=de(r.privateApis);function xl({data:e,field:t,onChange:i,hideLabelFromVision:l,validity:s}){const{id:o,label:c,description:d,setValue:u,getValue:m,isValid:f}=t,g=m({item:e}),v="string"==typeof g?g:void 0,[b,w]=(0,n.useState)(()=>bl(v)||new Date),_=(0,n.useRef)(null),x=(0,n.useRef)(),y=(0,n.useRef)(null),S=(0,n.useCallback)(t=>i(u({item:e,value:t})),[e,i,u]);(0,n.useEffect)(()=>()=>{x.current&&clearTimeout(x.current)},[]);const C=(0,n.useCallback)(e=>{let t;if(e){let n=e;if(v){const t=bl(v);t&&(n=new Date(e),n.setHours(t.getHours()),n.setMinutes(t.getMinutes()))}t=n.toISOString(),S(t),x.current&&clearTimeout(x.current)}else S(void 0);y.current=_.current&&_.current.ownerDocument.activeElement,x.current=setTimeout(()=>{_.current&&(_.current.focus(),_.current.blur(),S(t),y.current&&y.current instanceof HTMLElement&&y.current.focus())},0)},[S,v]),E=(0,n.useCallback)(e=>{if(e){const t=new Date(e);S(t.toISOString());const n=bl(t.toISOString());n&&w(n)}else S(void 0)},[S]),{format:j}=t,k=j.weekStartsOn??(0,pl.getSettings)().l10n.startOfWeek,{timezone:{string:I}}=(0,pl.getSettings)(),V=f?.required&&!l?`${c} (${(0,a.__)("Required")})`:c;return(0,h.jsx)(r.BaseControl,{id:o,label:V,help:d,hideLabelFromVision:l,children:(0,h.jsxs)(p.Stack,{direction:"column",gap:"md",children:[(0,h.jsx)(wl,{style:{width:"100%"},selected:v&&bl(v)||void 0,onSelect:C,month:b,onMonthChange:w,timeZone:I||void 0,weekStartsOn:k}),(0,h.jsx)(_l,{ref:_,__next40pxDefaultSize:!0,required:!!f?.required,customValidity:Sr(f,s),type:"datetime-local",label:(0,a.__)("Date time"),hideLabelFromVision:!0,value:v?(N=bl(v)||void 0,N?"string"==typeof N?N:fl(N,"yyyy-MM-dd'T'HH:mm"):""):"",onChange:E})]})});var N}function yl(e,t,n){return function(e,t,n){const a=Dr(e,n?.in);return isNaN(t)?Tr(n?.in||e,NaN):t?(a.setDate(a.getDate()+t),a):a}(e,-t,n)}function Sl(e,t,n){const a=Dr(e,n?.in);if(isNaN(t))return Tr(n?.in||e,NaN);if(!t)return a;const i=a.getDate(),r=Tr(n?.in||e,a.getTime());return r.setMonth(a.getMonth()+t+1,0),i>=r.getDate()?r:(a.setFullYear(r.getFullYear(),r.getMonth(),i),a)}function Cl(e,t){const n=Dr(e,t?.in);return n.setDate(1),n.setHours(0,0,0,0),n}function El(e,t,n){return function(e,t,n){return Sl(e,12*t,n)}(e,-t,n)}var jl=(0,h.jsx)(v.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,h.jsx)(v.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12.218 5.377a.25.25 0 0 0-.436 0l-7.29 12.96a.25.25 0 0 0 .218.373h14.58a.25.25 0 0 0 .218-.372l-7.29-12.96Zm-1.743-.735c.669-1.19 2.381-1.19 3.05 0l7.29 12.96a1.75 1.75 0 0 1-1.525 2.608H4.71a1.75 1.75 0 0 1-1.525-2.608l7.29-12.96ZM12.75 17.46h-1.5v-1.5h1.5v1.5Zm-1.5-3h1.5v-5h-1.5v5Z"})}),{DateCalendar:kl,DateRangeCalendar:Il}=de(r.privateApis),Vl=[{id:"today",label:(0,a.__)("Today"),getValue:()=>(0,pl.getDate)(null)},{id:"yesterday",label:(0,a.__)("Yesterday"),getValue:()=>yl((0,pl.getDate)(null),1)},{id:"past-week",label:(0,a.__)("Past week"),getValue:()=>yl((0,pl.getDate)(null),7)},{id:"past-month",label:(0,a.__)("Past month"),getValue:()=>{return Sl((0,pl.getDate)(null),-1,e);var e}}],Nl=[{id:"last-7-days",label:(0,a.__)("Last 7 days"),getValue:()=>{const e=(0,pl.getDate)(null);return[yl(e,7),e]}},{id:"last-30-days",label:(0,a.__)("Last 30 days"),getValue:()=>{const e=(0,pl.getDate)(null);return[yl(e,30),e]}},{id:"month-to-date",label:(0,a.__)("Month to date"),getValue:()=>{const e=(0,pl.getDate)(null);return[Cl(e),e]}},{id:"last-year",label:(0,a.__)("Last year"),getValue:()=>{const e=(0,pl.getDate)(null);return[El(e,1),e]}},{id:"year-to-date",label:(0,a.__)("Year to date"),getValue:()=>{const e=(0,pl.getDate)(null);return[zr(e),e]}}],Ll=e=>{if(!e)return null;const t=(0,pl.getDate)(e);return t&&sl(t)?t:null},Fl=e=>e?"string"==typeof e?e:fl(e,"yyyy-MM-dd"):"";function Ml({field:e,validity:t,inputRefs:a,isTouched:i,setIsTouched:l,children:s}){const{isValid:o}=e,[c,d]=(0,n.useState)(void 0),u=(0,n.useCallback)(()=>{const e=Array.isArray(a)?a:[a];for(const t of e){const e=t.current;if(e&&!e.validity.valid)return void d({type:"invalid",message:e.validationMessage})}d(void 0)},[a]);return(0,n.useEffect)(()=>{if(i){const e=setTimeout(()=>{t?d(Sr(o,t)):u()},0);return()=>clearTimeout(e)}},[i,o,t,u]),(0,h.jsxs)("div",{onBlur:e=>{i||e.relatedTarget&&e.currentTarget.contains(e.relatedTarget)||l(!0)},children:[s,(0,h.jsx)("div",{"aria-live":"polite",children:c&&(0,h.jsxs)("p",{className:ae("components-validated-control__indicator","invalid"===c.type?"is-invalid":void 0,"valid"===c.type?"is-valid":void 0),children:[(0,h.jsx)(r.Icon,{className:"components-validated-control__indicator-icon",icon:jl,size:16,fill:"currentColor"}),c.message]})})]})}function Pl({data:e,field:t,onChange:i,hideLabelFromVision:l,validity:s}){const{id:o,label:c,setValue:d,getValue:u,isValid:m,format:f}=t,[g,v]=(0,n.useState)(null),b=f.weekStartsOn??(0,pl.getSettings)().l10n.startOfWeek,w=u({item:e}),_="string"==typeof w?w:void 0,[x,y]=(0,n.useState)(()=>Ll(_)||new Date),[S,C]=(0,n.useState)(!1),E=(0,n.useRef)(null),j=(0,n.useCallback)(t=>i(d({item:e,value:t})),[e,i,d]),k=(0,n.useCallback)(e=>{const t=e?fl(e,"yyyy-MM-dd"):void 0;j(t),v(null),C(!0)},[j]),I=(0,n.useCallback)(e=>{const t=e.getValue(),n=Fl(t);y(t),j(n),v(e.id),C(!0)},[j]),V=(0,n.useCallback)(e=>{if(j(e),e){const t=Ll(e);t&&y(t)}v(null),C(!0)},[j]),{timezone:{string:N}}=(0,pl.getSettings)(),L=m?.required?`${c} (${(0,a.__)("Required")})`:c;return(0,h.jsx)(Ml,{field:t,validity:s,inputRefs:E,isTouched:S,setIsTouched:C,children:(0,h.jsx)(r.BaseControl,{id:o,className:"dataviews-controls__date",label:L,hideLabelFromVision:l,children:(0,h.jsxs)(p.Stack,{direction:"column",gap:"md",children:[(0,h.jsxs)(p.Stack,{direction:"row",gap:"xs",wrap:"wrap",justify:"flex-start",children:[Vl.map(e=>{const t=g===e.id;return(0,h.jsx)(r.Button,{className:"dataviews-controls__date-preset",variant:"tertiary",isPressed:t,size:"small",onClick:()=>I(e),children:e.label},e.id)}),(0,h.jsx)(r.Button,{className:"dataviews-controls__date-preset",variant:"tertiary",isPressed:!g,size:"small",disabled:!!g,accessibleWhenDisabled:!1,children:(0,a.__)("Custom")})]}),(0,h.jsx)(r.__experimentalInputControl,{__next40pxDefaultSize:!0,ref:E,type:"date",label:(0,a.__)("Date"),hideLabelFromVision:!0,value:_,onChange:V,required:!!t.isValid?.required}),(0,h.jsx)(kl,{style:{width:"100%"},selected:_&&Ll(_)||void 0,onSelect:k,month:x,onMonthChange:y,timeZone:N||void 0,weekStartsOn:b})]})})})}function Al({data:e,field:t,onChange:i,hideLabelFromVision:l,validity:s}){const{id:o,label:c,getValue:d,setValue:u,format:m}=t;let f;const g=d({item:e});Array.isArray(g)&&2===g.length&&g.every(e=>"string"==typeof e)&&(f=g);const v=m.weekStartsOn??(0,pl.getSettings)().l10n.startOfWeek,b=(0,n.useCallback)(t=>{i(u({item:e,value:t}))},[e,i,u]),[w,_]=(0,n.useState)(null),x=(0,n.useMemo)(()=>{if(!f)return{from:void 0,to:void 0};const[e,t]=f;return{from:Ll(e)||void 0,to:Ll(t)||void 0}},[f]),[y,S]=(0,n.useState)(()=>x.from||new Date),[C,E]=(0,n.useState)(!1),j=(0,n.useRef)(null),k=(0,n.useRef)(null),I=(0,n.useCallback)((e,t)=>{e&&t?b([Fl(e),Fl(t)]):e||t||b(void 0)},[b]),V=(0,n.useCallback)(e=>{I(e?.from,e?.to),_(null),E(!0)},[I]),N=(0,n.useCallback)(e=>{const[t,n]=e.getValue();S(t),I(t,n),_(e.id),E(!0)},[I]),L=(0,n.useCallback)((e,t)=>{const[n,a]=f||[void 0,void 0];if(I("from"===e?t:n,"to"===e?t:a),t){const e=Ll(t);e&&S(e)}_(null),E(!0)},[f,I]),{timezone:F}=(0,pl.getSettings)(),M=t.isValid?.required?`${c} (${(0,a.__)("Required")})`:c;return(0,h.jsx)(Ml,{field:t,validity:s,inputRefs:[j,k],isTouched:C,setIsTouched:E,children:(0,h.jsx)(r.BaseControl,{id:o,className:"dataviews-controls__date",label:M,hideLabelFromVision:l,children:(0,h.jsxs)(p.Stack,{direction:"column",gap:"md",children:[(0,h.jsxs)(p.Stack,{direction:"row",gap:"xs",wrap:"wrap",justify:"flex-start",children:[Nl.map(e=>{const t=w===e.id;return(0,h.jsx)(r.Button,{className:"dataviews-controls__date-preset",variant:"tertiary",isPressed:t,size:"small",onClick:()=>N(e),children:e.label},e.id)}),(0,h.jsx)(r.Button,{className:"dataviews-controls__date-preset",variant:"tertiary",isPressed:!w,size:"small",accessibleWhenDisabled:!1,disabled:!!w,children:(0,a.__)("Custom")})]}),(0,h.jsxs)(p.Stack,{direction:"row",gap:"xs",justify:"space-between",className:"dataviews-controls__date-range-inputs",children:[(0,h.jsx)(r.__experimentalInputControl,{__next40pxDefaultSize:!0,ref:j,type:"date",label:(0,a.__)("From"),hideLabelFromVision:!0,value:f?.[0],onChange:e=>L("from",e),required:!!t.isValid?.required}),(0,h.jsx)(r.__experimentalInputControl,{__next40pxDefaultSize:!0,ref:k,type:"date",label:(0,a.__)("To"),hideLabelFromVision:!0,value:f?.[1],onChange:e=>L("to",e),required:!!t.isValid?.required})]}),(0,h.jsx)(Il,{style:{width:"100%"},selected:x,onSelect:V,month:y,onMonthChange:S,timeZone:F.string||void 0,weekStartsOn:v})]})})})}var Ol=(0,h.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,h.jsx)(v.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M3 7c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7Zm2-.5h14c.3 0 .5.2.5.5v1L12 13.5 4.5 7.9V7c0-.3.2-.5.5-.5Zm-.5 3.3V17c0 .3.2.5.5.5h14c.3 0 .5-.2.5-.5V9.8L12 15.4 4.5 9.8Z"})}),{ValidatedInputControl:Tl}=de(r.privateApis);function Dl({data:e,field:t,onChange:a,hideLabelFromVision:i,type:r,prefix:l,suffix:s,validity:o}){const{label:c,placeholder:d,description:u,getValue:m,setValue:f,isValid:g}=t,p=m({item:e}),v=(0,n.useCallback)(t=>a(f({item:e,value:t})),[e,f,a]);return(0,h.jsx)(Tl,{required:!!g.required,customValidity:Sr(g,o),label:c,placeholder:d,value:p??"",help:u,onChange:v,hideLabelFromVision:i,type:r,prefix:l,suffix:s,pattern:g.pattern?g.pattern.constraint:void 0,minLength:g.minLength?g.minLength.constraint:void 0,maxLength:g.maxLength?g.maxLength.constraint:void 0,__next40pxDefaultSize:!0})}var Bl=(0,h.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,h.jsx)(v.Path,{d:"M15 4H9c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 14c0 .3-.2.5-.5.5H9c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h6c.3 0 .5.2.5.5v12zm-4.5-.5h2V16h-2v1.5z"})}),Rl=(0,h.jsx)(v.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,h.jsx)(v.Path,{d:"M10 17.389H8.444A5.194 5.194 0 1 1 8.444 7H10v1.5H8.444a3.694 3.694 0 0 0 0 7.389H10v1.5ZM14 7h1.556a5.194 5.194 0 0 1 0 10.39H14v-1.5h1.556a3.694 3.694 0 0 0 0-7.39H14V7Zm-4.5 6h5v-1.5h-5V13Z"})}),{ValidatedNumberControl:zl}=de(r.privateApis);function Hl(e){if(""===e||void 0===e)return"";const t=Number(e);return Number.isFinite(t)?t:""}function $l({value:e,onChange:t,hideLabelFromVision:i,step:l}){const[s="",o=""]=e,c=(0,n.useCallback)(e=>t([Hl(e),o]),[t,o]),d=(0,n.useCallback)(e=>t([s,Hl(e)]),[t,s]);return(0,h.jsx)(r.BaseControl,{help:(0,a.__)("The max. value must be greater than the min. value."),children:(0,h.jsxs)(r.Flex,{direction:"row",gap:4,children:[(0,h.jsx)(r.__experimentalNumberControl,{label:(0,a.__)("Min."),value:s,max:o?Number(o)-l:void 0,onChange:c,__next40pxDefaultSize:!0,hideLabelFromVision:i,step:l}),(0,h.jsx)(r.__experimentalNumberControl,{label:(0,a.__)("Max."),value:o,min:s?Number(s)+l:void 0,onChange:d,__next40pxDefaultSize:!0,hideLabelFromVision:i,step:l})]})})}function Wl({data:e,field:t,onChange:a,hideLabelFromVision:i,operator:r,validity:l}){const s=t.format?.decimals??0,o=Math.pow(10,-1*Math.abs(s)),{label:c,description:d,getValue:u,setValue:m,isValid:f}=t,g=u({item:e})??"",p=(0,n.useCallback)(t=>{a(m({item:e,value:["",void 0].includes(t)?void 0:Number(t)}))},[e,a,m]),v=(0,n.useCallback)(t=>{a(m({item:e,value:t}))},[e,a,m]);if(r===C){let e=["",""];return Array.isArray(g)&&2===g.length&&g.every(e=>"number"==typeof e||""===e)&&(e=g),(0,h.jsx)($l,{value:e,onChange:v,hideLabelFromVision:i,step:o})}return(0,h.jsx)(zl,{required:!!f.required,customValidity:Sr(f,l),label:c,help:d,value:g,onChange:p,__next40pxDefaultSize:!0,hideLabelFromVision:i,step:o,min:f.min?f.min.constraint:void 0,max:f.max?f.max.constraint:void 0})}var{ValidatedRadioControl:ql}=de(r.privateApis),{ValidatedSelectControl:Gl}=de(r.privateApis),{ValidatedToggleControl:Kl}=de(r.privateApis),{ValidatedTextareaControl:Ul}=de(r.privateApis),{ValidatedToggleGroupControl:Yl}=de(r.privateApis),{ValidatedFormTokenField:Zl}=de(r.privateApis),Xl={grad:.9,turn:360,rad:360/(2*Math.PI)},Ql=function(e){return"string"==typeof e?e.length>0:"number"==typeof e},Jl=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n+0},es=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e>t?e:t},ts=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},ns=function(e){return{r:es(e.r,0,255),g:es(e.g,0,255),b:es(e.b,0,255),a:es(e.a)}},as=function(e){return{r:Jl(e.r),g:Jl(e.g),b:Jl(e.b),a:Jl(e.a,3)}},is=/^#([0-9a-f]{3,8})$/i,rs=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},ls=function(e){var t=e.r,n=e.g,a=e.b,i=e.a,r=Math.max(t,n,a),l=r-Math.min(t,n,a),s=l?r===t?(n-a)/l:r===n?2+(a-t)/l:4+(t-n)/l:0;return{h:60*(s<0?s+6:s),s:r?l/r*100:0,v:r/255*100,a:i}},ss=function(e){var t=e.h,n=e.s,a=e.v,i=e.a;t=t/360*6,n/=100,a/=100;var r=Math.floor(t),l=a*(1-n),s=a*(1-(t-r)*n),o=a*(1-(1-t+r)*n),c=r%6;return{r:255*[a,s,l,l,o,a][c],g:255*[o,a,a,s,l,l][c],b:255*[l,l,o,a,a,s][c],a:i}},os=function(e){return{h:ts(e.h),s:es(e.s,0,100),l:es(e.l,0,100),a:es(e.a)}},cs=function(e){return{h:Jl(e.h),s:Jl(e.s),l:Jl(e.l),a:Jl(e.a,3)}},ds=function(e){return ss((n=(t=e).s,{h:t.h,s:(n*=((a=t.l)<50?a:100-a)/100)>0?2*n/(a+n)*100:0,v:a+n,a:t.a}));var t,n,a},us=function(e){return{h:(t=ls(e)).h,s:(i=(200-(n=t.s))*(a=t.v)/100)>0&&i<200?n*a/100/(i<=100?i:200-i)*100:0,l:i/2,a:t.a};var t,n,a,i},ms=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,fs=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,gs=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ps=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,vs={string:[[function(e){var t=is.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?Jl(parseInt(e[3]+e[3],16)/255,2):1}:6===e.length||8===e.length?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:8===e.length?Jl(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=gs.exec(e)||ps.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:ns({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=ms.exec(e)||fs.exec(e);if(!t)return null;var n,a,i=os({h:(n=t[1],a=t[2],void 0===a&&(a="deg"),Number(n)*(Xl[a]||1)),s:Number(t[3]),l:Number(t[4]),a:void 0===t[5]?1:Number(t[5])/(t[6]?100:1)});return ds(i)},"hsl"]],object:[[function(e){var t=e.r,n=e.g,a=e.b,i=e.a,r=void 0===i?1:i;return Ql(t)&&Ql(n)&&Ql(a)?ns({r:Number(t),g:Number(n),b:Number(a),a:Number(r)}):null},"rgb"],[function(e){var t=e.h,n=e.s,a=e.l,i=e.a,r=void 0===i?1:i;if(!Ql(t)||!Ql(n)||!Ql(a))return null;var l=os({h:Number(t),s:Number(n),l:Number(a),a:Number(r)});return ds(l)},"hsl"],[function(e){var t=e.h,n=e.s,a=e.v,i=e.a,r=void 0===i?1:i;if(!Ql(t)||!Ql(n)||!Ql(a))return null;var l=function(e){return{h:ts(e.h),s:es(e.s,0,100),v:es(e.v,0,100),a:es(e.a)}}({h:Number(t),s:Number(n),v:Number(a),a:Number(r)});return ss(l)},"hsv"]]},hs=function(e,t){for(var n=0;n<t.length;n++){var a=t[n][0](e);if(a)return[a,t[n][1]]}return[null,void 0]},bs=function(e,t){var n=us(e);return{h:n.h,s:es(n.s+100*t,0,100),l:n.l,a:n.a}},ws=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},_s=function(e,t){var n=us(e);return{h:n.h,s:n.s,l:es(n.l+100*t,0,100),a:n.a}},xs=function(){function e(e){this.parsed=function(e){return"string"==typeof e?hs(e.trim(),vs.string):"object"==typeof e&&null!==e?hs(e,vs.object):[null,void 0]}(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return null!==this.parsed},e.prototype.brightness=function(){return Jl(ws(this.rgba),2)},e.prototype.isDark=function(){return ws(this.rgba)<.5},e.prototype.isLight=function(){return ws(this.rgba)>=.5},e.prototype.toHex=function(){return t=(e=as(this.rgba)).r,n=e.g,a=e.b,r=(i=e.a)<1?rs(Jl(255*i)):"","#"+rs(t)+rs(n)+rs(a)+r;var e,t,n,a,i,r},e.prototype.toRgb=function(){return as(this.rgba)},e.prototype.toRgbString=function(){return t=(e=as(this.rgba)).r,n=e.g,a=e.b,(i=e.a)<1?"rgba("+t+", "+n+", "+a+", "+i+")":"rgb("+t+", "+n+", "+a+")";var e,t,n,a,i},e.prototype.toHsl=function(){return cs(us(this.rgba))},e.prototype.toHslString=function(){return t=(e=cs(us(this.rgba))).h,n=e.s,a=e.l,(i=e.a)<1?"hsla("+t+", "+n+"%, "+a+"%, "+i+")":"hsl("+t+", "+n+"%, "+a+"%)";var e,t,n,a,i},e.prototype.toHsv=function(){return e=ls(this.rgba),{h:Jl(e.h),s:Jl(e.s),v:Jl(e.v),a:Jl(e.a,3)};var e},e.prototype.invert=function(){return ys({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},e.prototype.saturate=function(e){return void 0===e&&(e=.1),ys(bs(this.rgba,e))},e.prototype.desaturate=function(e){return void 0===e&&(e=.1),ys(bs(this.rgba,-e))},e.prototype.grayscale=function(){return ys(bs(this.rgba,-1))},e.prototype.lighten=function(e){return void 0===e&&(e=.1),ys(_s(this.rgba,e))},e.prototype.darken=function(e){return void 0===e&&(e=.1),ys(_s(this.rgba,-e))},e.prototype.rotate=function(e){return void 0===e&&(e=15),this.hue(this.hue()+e)},e.prototype.alpha=function(e){return"number"==typeof e?ys({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Jl(this.rgba.a,3);var t},e.prototype.hue=function(e){var t=us(this.rgba);return"number"==typeof e?ys({h:e,s:t.s,l:t.l,a:t.a}):Jl(t.h)},e.prototype.isEqual=function(e){return this.toHex()===ys(e).toHex()},e}(),ys=function(e){return e instanceof xs?e:new xs(e)},{ValidatedInputControl:Ss,Picker:Cs}=de(r.privateApis),Es=({color:e,onColorChange:t})=>{const n=e&&ys(e).isValid()?e:"#ffffff";return(0,h.jsx)(r.Dropdown,{renderToggle:({onToggle:e,isOpen:t})=>(0,h.jsx)(r.__experimentalInputControlPrefixWrapper,{variant:"icon",children:(0,h.jsx)("button",{type:"button",onClick:e,style:{width:"24px",height:"24px",borderRadius:"50%",backgroundColor:n,border:"1px solid #ddd",cursor:"pointer",outline:t?"2px solid #007cba":"none",outlineOffset:"2px",display:"flex",alignItems:"center",justifyContent:"center",padding:0,margin:0},"aria-label":"Open color picker"})}),renderContent:()=>(0,h.jsx)("div",{style:{padding:"16px"},children:(0,h.jsx)(Cs,{color:ys(n),onChange:t,enableAlpha:!0})})})},js=(0,h.jsx)(v.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,h.jsx)(v.Path,{d:"M3.99961 13C4.67043 13.3354 4.6703 13.3357 4.67017 13.3359L4.67298 13.3305C4.67621 13.3242 4.68184 13.3135 4.68988 13.2985C4.70595 13.2686 4.7316 13.2218 4.76695 13.1608C4.8377 13.0385 4.94692 12.8592 5.09541 12.6419C5.39312 12.2062 5.84436 11.624 6.45435 11.0431C7.67308 9.88241 9.49719 8.75 11.9996 8.75C14.502 8.75 16.3261 9.88241 17.5449 11.0431C18.1549 11.624 18.6061 12.2062 18.9038 12.6419C19.0523 12.8592 19.1615 13.0385 19.2323 13.1608C19.2676 13.2218 19.2933 13.2686 19.3093 13.2985C19.3174 13.3135 19.323 13.3242 19.3262 13.3305L19.3291 13.3359C19.3289 13.3357 19.3288 13.3354 19.9996 13C20.6704 12.6646 20.6703 12.6643 20.6701 12.664L20.6697 12.6632L20.6688 12.6614L20.6662 12.6563L20.6583 12.6408C20.6517 12.6282 20.6427 12.6108 20.631 12.5892C20.6078 12.5459 20.5744 12.4852 20.5306 12.4096C20.4432 12.2584 20.3141 12.0471 20.1423 11.7956C19.7994 11.2938 19.2819 10.626 18.5794 9.9569C17.1731 8.61759 14.9972 7.25 11.9996 7.25C9.00203 7.25 6.82614 8.61759 5.41987 9.9569C4.71736 10.626 4.19984 11.2938 3.85694 11.7956C3.68511 12.0471 3.55605 12.2584 3.4686 12.4096C3.42484 12.4852 3.39142 12.5459 3.36818 12.5892C3.35656 12.6108 3.34748 12.6282 3.34092 12.6408L3.33297 12.6563L3.33041 12.6614L3.32948 12.6632L3.32911 12.664C3.32894 12.6643 3.32879 12.6646 3.99961 13ZM11.9996 16C13.9326 16 15.4996 14.433 15.4996 12.5C15.4996 10.567 13.9326 9 11.9996 9C10.0666 9 8.49961 10.567 8.49961 12.5C8.49961 14.433 10.0666 16 11.9996 16Z"})});function ks(e){return Array.isArray(e.elements)&&e.elements.length>0||"function"==typeof e.getElements}var Is={array:function({data:e,field:t,onChange:a,hideLabelFromVision:i,validity:l}){const{label:s,placeholder:o,getValue:c,setValue:d,isValid:u}=t,m=c({item:e}),{elements:f,isLoading:g}=Mi({elements:t.elements,getElements:t.getElements}),p=(0,n.useMemo)(()=>Array.isArray(m)?m.map(e=>{const t=f?.find(t=>t.value===e);return t||{value:e,label:e}}):[],[m,f]),v=(0,n.useCallback)(t=>{const n=t.map(e=>"object"==typeof e&&"value"in e?e.value:e);a(d({item:e,value:n}))},[a,d,e]);return g?(0,h.jsx)(r.Spinner,{}):(0,h.jsx)(Zl,{required:!!u?.required,customValidity:Sr(u,l),label:i?void 0:s,value:p,onChange:v,placeholder:o,suggestions:f?.map(e=>e.value),__experimentalValidateInput:e=>!t.isValid?.elements||!f||f.some(t=>t.value===e||t.label===e),__experimentalExpandOnFocus:f&&f.length>0,__experimentalShowHowTo:!t.isValid?.elements,displayTransform:e=>{if("object"==typeof e&&"label"in e)return e.label;if("string"==typeof e&&f){const t=f.find(t=>t.value===e);return t?.label||e}return e},__experimentalRenderItem:({item:e})=>{if("string"==typeof e&&f){const t=f.find(t=>t.value===e);return(0,h.jsx)("span",{children:t?.label||e})}return(0,h.jsx)("span",{children:e})}})},checkbox:function({field:e,onChange:t,data:a,hideLabelFromVision:i,validity:r}){const{getValue:l,setValue:s,label:o,description:c,isValid:d}=e,u=(0,n.useCallback)(()=>{t(s({item:a,value:!l({item:a})}))},[a,l,t,s]);return(0,h.jsx)(Cr,{required:!!e.isValid?.required,customValidity:Sr(d,r),hidden:i,label:o,help:c,checked:l({item:a}),onChange:u})},color:function({data:e,field:t,onChange:a,hideLabelFromVision:i,validity:r}){const{label:l,placeholder:s,description:o,setValue:c,isValid:d}=t,u=t.getValue({item:e})||"",m=(0,n.useCallback)(t=>{a(c({item:e,value:t.toHex()}))},[e,a,c]),f=(0,n.useCallback)(t=>{a(c({item:e,value:t||""}))},[e,a,c]);return(0,h.jsx)(Ss,{required:!!t.isValid?.required,customValidity:Sr(d,r),label:l,placeholder:s,value:u,help:o,onChange:f,hideLabelFromVision:i,type:"text",prefix:(0,h.jsx)(Es,{color:u,onColorChange:m})})},datetime:function({data:e,field:t,onChange:n,hideLabelFromVision:a,operator:i,validity:r}){return i===E||i===j?(0,h.jsx)(hl,{className:"dataviews-controls__datetime",data:e,field:t,onChange:n,hideLabelFromVision:a,operator:i}):(0,h.jsx)(xl,{data:e,field:t,onChange:n,hideLabelFromVision:a,validity:r})},date:function({data:e,field:t,onChange:n,hideLabelFromVision:a,operator:i,validity:r}){return i===E||i===j?(0,h.jsx)(hl,{className:"dataviews-controls__date",data:e,field:t,onChange:n,hideLabelFromVision:a,operator:i}):i===C?(0,h.jsx)(Al,{data:e,field:t,onChange:n,hideLabelFromVision:a,validity:r}):(0,h.jsx)(Pl,{data:e,field:t,onChange:n,hideLabelFromVision:a,validity:r})},email:function({data:e,field:t,onChange:n,hideLabelFromVision:a,validity:i}){return(0,h.jsx)(Dl,{data:e,field:t,onChange:n,hideLabelFromVision:a,validity:i,type:"email",prefix:(0,h.jsx)(r.__experimentalInputControlPrefixWrapper,{variant:"icon",children:(0,h.jsx)(r.Icon,{icon:Ol})})})},telephone:function({data:e,field:t,onChange:n,hideLabelFromVision:a,validity:i}){return(0,h.jsx)(Dl,{data:e,field:t,onChange:n,hideLabelFromVision:a,validity:i,type:"tel",prefix:(0,h.jsx)(r.__experimentalInputControlPrefixWrapper,{variant:"icon",children:(0,h.jsx)(r.Icon,{icon:Bl})})})},url:function({data:e,field:t,onChange:n,hideLabelFromVision:a,validity:i}){return(0,h.jsx)(Dl,{data:e,field:t,onChange:n,hideLabelFromVision:a,validity:i,type:"url",prefix:(0,h.jsx)(r.__experimentalInputControlPrefixWrapper,{variant:"icon",children:(0,h.jsx)(r.Icon,{icon:Rl})})})},integer:function(e){return(0,h.jsx)(Wl,{...e})},number:function(e){return(0,h.jsx)(Wl,{...e})},password:function({data:e,field:t,onChange:i,hideLabelFromVision:l,validity:s}){const[o,c]=(0,n.useState)(!1),d=(0,n.useCallback)(()=>{c(e=>!e)},[]);return(0,h.jsx)(Dl,{data:e,field:t,onChange:i,hideLabelFromVision:l,validity:s,type:o?"text":"password",suffix:(0,h.jsx)(r.__experimentalInputControlSuffixWrapper,{variant:"control",children:(0,h.jsx)(r.Button,{icon:o?Pe:js,onClick:d,size:"small",label:o?(0,a.__)("Hide password"):(0,a.__)("Show password")})})})},radio:function({data:e,field:t,onChange:a,hideLabelFromVision:i,validity:l}){const{label:s,description:o,getValue:c,setValue:d,isValid:u}=t,{elements:m,isLoading:f}=Mi({elements:t.elements,getElements:t.getElements}),g=c({item:e}),p=(0,n.useCallback)(t=>a(d({item:e,value:t})),[e,a,d]);return f?(0,h.jsx)(r.Spinner,{}):(0,h.jsx)(ql,{required:!!t.isValid?.required,customValidity:Sr(u,l),label:s,help:o,onChange:p,options:m,selected:g,hideLabelFromVision:i})},select:function({data:e,field:t,onChange:a,hideLabelFromVision:i,validity:l}){const{type:s,label:o,description:c,getValue:d,setValue:u,isValid:m}=t,f="array"===s,g=d({item:e})??(f?[]:""),p=(0,n.useCallback)(t=>a(u({item:e,value:t})),[e,a,u]),{elements:v,isLoading:b}=Mi({elements:t.elements,getElements:t.getElements});return b?(0,h.jsx)(r.Spinner,{}):(0,h.jsx)(Gl,{required:!!t.isValid?.required,customValidity:Sr(m,l),label:o,value:g,help:c,options:v,onChange:p,__next40pxDefaultSize:!0,hideLabelFromVision:i,multiple:f})},text:function({data:e,field:t,onChange:a,hideLabelFromVision:i,config:r,validity:l}){const{prefix:s,suffix:o}=r||{};return(0,h.jsx)(Dl,{data:e,field:t,onChange:a,hideLabelFromVision:i,validity:l,prefix:s?(0,n.createElement)(s):void 0,suffix:o?(0,n.createElement)(o):void 0})},toggle:function({field:e,onChange:t,data:a,hideLabelFromVision:i,validity:r}){const{label:l,description:s,getValue:o,setValue:c,isValid:d}=e,u=(0,n.useCallback)(()=>{t(c({item:a,value:!o({item:a})}))},[t,c,a,o]);return(0,h.jsx)(Kl,{required:!!d.required,customValidity:Sr(d,r),hidden:i,label:l,help:s,checked:o({item:a}),onChange:u})},textarea:function({data:e,field:t,onChange:a,hideLabelFromVision:i,config:r,validity:l}){const{rows:s=4}=r||{},{label:o,placeholder:c,description:d,setValue:u,isValid:m}=t,f=t.getValue({item:e}),g=(0,n.useCallback)(t=>a(u({item:e,value:t})),[e,a,u]);return(0,h.jsx)(Ul,{required:!!m.required,customValidity:Sr(m,l),label:o,placeholder:c,value:f??"",help:d,onChange:g,rows:s,minLength:m.minLength?m.minLength.constraint:void 0,maxLength:m.maxLength?m.maxLength.constraint:void 0,__next40pxDefaultSize:!0,hideLabelFromVision:i})},toggleGroup:function({data:e,field:t,onChange:a,hideLabelFromVision:i,validity:l}){const{getValue:s,setValue:o,isValid:c}=t,d=s({item:e}),u=(0,n.useCallback)(t=>a(o({item:e,value:t})),[e,a,o]),{elements:m,isLoading:f}=Mi({elements:t.elements,getElements:t.getElements});if(f)return(0,h.jsx)(r.Spinner,{});if(0===m.length)return null;const g=m.find(e=>e.value===d);return(0,h.jsx)(Yl,{required:!!t.isValid?.required,customValidity:Sr(c,l),__next40pxDefaultSize:!0,isBlock:!0,label:t.label,help:g?.description||t.description,onChange:u,value:d,hideLabelFromVision:i,children:m.map(e=>(0,h.jsx)(r.__experimentalToggleGroupControlOption,{label:e.label,value:e.value},e.value))})}};function Vs(e,t){return"function"==typeof e.Edit?e.Edit:"string"==typeof e.Edit?Ns(e.Edit):(n=e.Edit)&&"object"==typeof n&&"string"==typeof n.control?function(e){const{control:t,...n}=e,a=Ns(t);return null===a?null:function(e){return(0,h.jsx)(a,{...e,config:n})}}(e.Edit):ks(e)&&"array"!==e.type?Ns("select"):null===t?null:Ns(t);var n}function Ns(e){return Object.keys(Is).includes(e)?Is[e]:null}var Ls=function(e,t,n){if(!1===e.filterBy)return!1;const a=e.filterBy?.operators?.filter(e=>n.includes(e))??t;return 0!==a.length&&{isPrimary:!!e.filterBy?.isPrimary,operators:a}},Fs=e=>({value:t})=>{const n=e.split("."),a={};let i=a;for(const e of n.slice(0,-1))i[e]={},i=i[e];return i[n.at(-1)]=t,a};function Ms({item:e,field:t}){const{elements:n,isLoading:a}=Mi({elements:t.elements,getElements:t.getElements}),i=t.getValue({item:e});return a||0===n.length?i:n?.find(e=>e.value===i)?.label||t.getValue({item:e})}function Ps({item:e,field:t}){return t.hasElements?(0,h.jsx)(Ms,{item:e,field:t}):t.getValueFormatted({item:e,field:t})}var As=(e,t,n)=>"asc"===n?e.localeCompare(t):t.localeCompare(e);function Os(e,t){const n=t.getValue({item:e});return![void 0,"",null].includes(n)}function Ts(e,t){if("number"!=typeof t.isValid.minLength?.constraint)return!1;const n=t.getValue({item:e});return!![void 0,"",null].includes(n)||String(n).length>=t.isValid.minLength.constraint}function Ds(e,t){if("number"!=typeof t.isValid.maxLength?.constraint)return!1;const n=t.getValue({item:e});return!![void 0,"",null].includes(n)||String(n).length<=t.isValid.maxLength.constraint}function Bs(e,t){if(void 0===t.isValid.pattern?.constraint)return!0;try{const n=new RegExp(t.isValid.pattern.constraint),a=t.getValue({item:e});return!![void 0,"",null].includes(a)||n.test(String(a))}catch{return!1}}function Rs(e,t){const n=(t.elements??[]).map(e=>e.value);if(0===n.length)return!0;const a=t.getValue({item:e});return[].concat(a).every(e=>n.includes(e))}var zs=function({item:e,field:t}){return t.getValue({item:e})},Hs=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,$s={type:"email",render:Ps,Edit:"email",sort:As,enableSorting:!0,enableGlobalSearch:!1,defaultOperators:[_,x],validOperators:[k,I,T,D,B,_,x,y,S],format:{},getValueFormatted:zs,validate:{required:Os,pattern:Bs,minLength:Ts,maxLength:Ds,elements:Rs,custom:function(e,t){const n=t.getValue({item:e});return[void 0,"",null].includes(n)||Hs.test(n)?null:(0,a.__)("Value must be a valid email address.")}}},Ws=(e,t,n)=>"asc"===n?e-t:t-e;function qs(e,t){if("number"!=typeof t.isValid.min?.constraint)return!1;const n=t.getValue({item:e});return!![void 0,"",null].includes(n)||Number(n)>=t.isValid.min.constraint}function Gs(e,t){if("number"!=typeof t.isValid.max?.constraint)return!1;const n=t.getValue({item:e});return!![void 0,"",null].includes(n)||Number(n)<=t.isValid.max.constraint}var Ks={separatorThousand:","},Us={type:"integer",render:Ps,Edit:"integer",sort:Ws,enableSorting:!0,enableGlobalSearch:!1,defaultOperators:[k,I,V,N,L,F,C],validOperators:[k,I,V,N,L,F,C,_,x,y,S],format:Ks,getValueFormatted:function({item:e,field:t}){let n,a=t.getValue({item:e});if(null==a)return"";if(a=Number(a),!Number.isFinite(a))return String(a);n="integer"!==t.type?Ks:t.format;const{separatorThousand:i}=n,r=Math.trunc(a);return i?String(r).replace(/\B(?=(\d{3})+(?!\d))/g,i):String(r)},validate:{required:Os,min:qs,max:Gs,elements:Rs,custom:function(e,t){const n=t.getValue({item:e});return[void 0,"",null].includes(n)||Number.isInteger(n)?null:(0,a.__)("Value must be an integer.")}}},Ys={separatorThousand:",",separatorDecimal:".",decimals:2},Zs={type:"number",render:Ps,Edit:"number",sort:Ws,enableSorting:!0,enableGlobalSearch:!1,defaultOperators:[k,I,V,N,L,F,C],validOperators:[k,I,V,N,L,F,C,_,x,y,S],format:Ys,getValueFormatted:function({item:e,field:t}){let n,a=t.getValue({item:e});if(null==a)return"";if(a=Number(a),!Number.isFinite(a))return String(a);n="number"!==t.type?Ys:t.format;const{separatorThousand:i,separatorDecimal:r,decimals:l}=n,s=a.toFixed(l),[o,c]=s.split("."),d=i?o.replace(/\B(?=(\d{3})+(?!\d))/g,i):o;return 0===l?d:d+r+c},validate:{required:Os,min:qs,max:Gs,elements:Rs,custom:function(e,t){const n=t.getValue({item:e});return function(e){return""===e||null==e}(n)||Number.isFinite(n)?null:(0,a.__)("Value must be a number.")}}},Xs={type:"text",render:Ps,Edit:"text",sort:As,enableSorting:!0,enableGlobalSearch:!1,defaultOperators:[_,x],validOperators:[k,I,T,D,B,_,x,y,S],format:{},getValueFormatted:zs,validate:{required:Os,pattern:Bs,minLength:Ts,maxLength:Ds,elements:Rs}},Qs={datetime:(0,pl.getSettings)().formats.datetime,weekStartsOn:(0,pl.getSettings)().l10n.startOfWeek},Js={type:"datetime",render:Ps,Edit:"datetime",sort:(e,t,n)=>{const a=new Date(e).getTime(),i=new Date(t).getTime();return"asc"===n?a-i:i-a},enableSorting:!0,enableGlobalSearch:!1,defaultOperators:[R,z,M,P,A,O,E,j],validOperators:[R,z,M,P,A,O,E,j],format:Qs,getValueFormatted:function({item:e,field:t}){const n=t.getValue({item:e});if(["",void 0,null].includes(n))return"";let a;return a="datetime"!==t.type?Qs:t.format,(0,pl.dateI18n)(a.datetime,(0,pl.getDate)(n))},validate:{required:Os,elements:Rs}},eo={date:(0,pl.getSettings)().formats.date,weekStartsOn:(0,pl.getSettings)().l10n.startOfWeek},to={type:"date",render:Ps,Edit:"date",sort:(e,t,n)=>{const a=new Date(e).getTime(),i=new Date(t).getTime();return"asc"===n?a-i:i-a},enableSorting:!0,enableGlobalSearch:!1,defaultOperators:[R,z,M,P,A,O,E,j,C],validOperators:[R,z,M,P,A,O,E,j,C],format:eo,getValueFormatted:function({item:e,field:t}){const n=t.getValue({item:e});if(["",void 0,null].includes(n))return"";let a;return a="date"!==t.type?eo:t.format,(0,pl.dateI18n)(a.date,(0,pl.getDate)(n))},validate:{required:Os,elements:Rs}},no={type:"boolean",render:Ps,Edit:"checkbox",sort:(e,t,n)=>{const a=Boolean(e);return a===Boolean(t)?0:"asc"===n?a?1:-1:a?-1:1},validate:{required:function(e,t){return!0===t.getValue({item:e})},elements:Rs,custom:function(e,t){const n=t.getValue({item:e});return[void 0,"",null].includes(n)||[!0,!1].includes(n)?null:(0,a.__)("Value must be true, false, or undefined")}},enableSorting:!0,enableGlobalSearch:!1,defaultOperators:[k,I],validOperators:[k,I],format:{},getValueFormatted:function({item:e,field:t}){const n=t.getValue({item:e});return!0===n?(0,a.__)("True"):!1===n?(0,a.__)("False"):""}},ao={type:"media",render:()=>null,Edit:null,sort:()=>0,enableSorting:!1,enableGlobalSearch:!1,defaultOperators:[],validOperators:[],format:{},getValueFormatted:zs,validate:{}};function io({item:e,field:t}){const n=t.getValue({item:e});return(Array.isArray(n)?n:[]).join(", ")}var ro={type:"array",render:function({item:e,field:t}){return io({item:e,field:t})},Edit:"array",sort:(e,t,n)=>{const a=Array.isArray(e)?e:[],i=Array.isArray(t)?t:[];if(a.length!==i.length)return"asc"===n?a.length-i.length:i.length-a.length;const r=a.join(","),l=i.join(",");return"asc"===n?r.localeCompare(l):l.localeCompare(r)},enableSorting:!0,enableGlobalSearch:!1,defaultOperators:[_,x],validOperators:[_,x,y,S],format:{},getValueFormatted:io,validate:{required:function(e,t){const n=t.getValue({item:e});return Array.isArray(n)&&n.length>0&&n.every(e=>![void 0,"",null].includes(e))},elements:Rs,custom:function(e,t){const n=t.getValue({item:e});return[void 0,"",null].includes(n)||Array.isArray(n)?n.every(e=>"string"==typeof e)?null:(0,a.__)("Every value must be a string."):(0,a.__)("Value must be an array.")}}},lo={type:"password",render:Ps,Edit:"password",sort:()=>0,enableSorting:!1,enableGlobalSearch:!1,defaultOperators:[],validOperators:[],format:{},getValueFormatted:function({item:e,field:t}){return t.getValue({item:e})?"••••••••":""},validate:{required:Os,pattern:Bs,minLength:Ts,maxLength:Ds,elements:Rs}},so={type:"telephone",render:Ps,Edit:"telephone",sort:As,enableSorting:!0,enableGlobalSearch:!1,defaultOperators:[_,x],validOperators:[k,I,T,D,B,_,x,y,S],format:{},getValueFormatted:zs,validate:{required:Os,pattern:Bs,minLength:Ts,maxLength:Ds,elements:Rs}},oo={type:"color",render:function({item:e,field:t}){if(t.hasElements)return(0,h.jsx)(Ms,{item:e,field:t});const n=zs({item:e,field:t});return n&&ys(n).isValid()?(0,h.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,h.jsx)("div",{style:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:n,border:"1px solid #ddd",flexShrink:0}}),(0,h.jsx)("span",{children:n})]}):n},Edit:"color",sort:(e,t,n)=>{const a=ys(e),i=ys(t);if(!a.isValid()&&!i.isValid())return 0;if(!a.isValid())return"asc"===n?1:-1;if(!i.isValid())return"asc"===n?-1:1;const r=a.toHsl(),l=i.toHsl();return r.h!==l.h?"asc"===n?r.h-l.h:l.h-r.h:r.s!==l.s?"asc"===n?r.s-l.s:l.s-r.s:"asc"===n?r.l-l.l:l.l-r.l},enableSorting:!0,enableGlobalSearch:!1,defaultOperators:[_,x],validOperators:[k,I,_,x],format:{},getValueFormatted:zs,validate:{required:Os,elements:Rs,custom:function(e,t){const n=t.getValue({item:e});return[void 0,"",null].includes(n)||ys(n).isValid()?null:(0,a.__)("Value must be a valid color.")}}},co={type:"url",render:Ps,Edit:"url",sort:As,enableSorting:!0,enableGlobalSearch:!1,defaultOperators:[_,x],validOperators:[k,I,T,D,B,_,x,y,S],format:{},getValueFormatted:zs,validate:{required:Os,pattern:Bs,minLength:Ts,maxLength:Ds,elements:Rs}},uo={render:Ps,Edit:null,sort:(e,t,n)=>"number"==typeof e&&"number"==typeof t?Ws(e,t,n):As(e,t,n),enableSorting:!0,enableGlobalSearch:!1,defaultOperators:[k,I],validOperators:qi.map(e=>e.name),format:{},getValueFormatted:zs,validate:{required:Os,elements:Rs}};function mo(e,t){let n,a,i,r,l,s,o;return!0===e.isValid?.required&&void 0!==t.validate.required&&(n={constraint:!0,validate:t.validate.required}),(!0===e.isValid?.elements||void 0===e.isValid?.elements&&(e.elements||e.getElements))&&void 0!==t.validate.elements&&(a={constraint:!0,validate:t.validate.elements}),"number"==typeof e.isValid?.min&&void 0!==t.validate.min&&(i={constraint:e.isValid.min,validate:t.validate.min}),"number"==typeof e.isValid?.max&&void 0!==t.validate.max&&(r={constraint:e.isValid.max,validate:t.validate.max}),"number"==typeof e.isValid?.minLength&&void 0!==t.validate.minLength&&(l={constraint:e.isValid.minLength,validate:t.validate.minLength}),"number"==typeof e.isValid?.maxLength&&void 0!==t.validate.maxLength&&(s={constraint:e.isValid.maxLength,validate:t.validate.maxLength}),void 0!==e.isValid?.pattern&&void 0!==t.validate.pattern&&(o={constraint:e.isValid?.pattern,validate:t.validate.pattern}),{required:n,elements:a,min:i,max:r,minLength:l,maxLength:s,pattern:o,custom:e.isValid?.custom??t.validate.custom}}var fo=function(e,t){return{...t.format,...e.format}};var go=e=>e.id,po=()=>!0,vo=[],ho=bt.filter(e=>!e.isPicker);function bo({header:e,search:t=!0,searchLabel:n}){return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(p.Stack,{direction:"row",align:"top",justify:"space-between",className:"dataviews__view-actions",gap:"2xs",children:[(0,h.jsxs)(p.Stack,{direction:"row",justify:"start",gap:"xs",className:"dataviews__search",children:[t&&(0,h.jsx)(cr,{label:n}),(0,h.jsx)(St,{})]}),(0,h.jsxs)(p.Stack,{direction:"row",gap:"2xs",style:{flexShrink:0},children:[(0,h.jsx)(yr,{}),e]})]}),(0,h.jsx)(tr,{className:"dataviews-filters__container"}),(0,h.jsx)(nr,{}),(0,h.jsx)(or,{})]})}var wo=function({view:e,onChangeView:t,fields:a,search:i=!0,searchLabel:r,actions:l=vo,data:s,getItemId:o=go,getItemLevel:c,isLoading:d=!1,paginationInfo:u,defaultLayouts:m,selection:f,onChangeSelection:p,onClickItem:v,renderItemLink:b,isItemClickable:w=po,header:_,children:x,config:y={perPageSizes:[10,20,50,100]},empty:S}){const{infiniteScrollHandler:C}=u,E=(0,n.useRef)(null),[j,k]=(0,n.useState)(0),I=(0,g.useResizeObserver)(e=>{k(e[0].borderBoxSize[0].inlineSize)},{box:"border-box"}),[V,N]=(0,n.useState)([]),L=void 0===f||void 0===p,F=L?V:f,[M,P]=(0,n.useState)(null),A=(0,n.useMemo)(()=>function(e){return e.map(e=>{const t=function(e){const t=[$s,Us,Zs,Xs,Js,to,no,ao,ro,lo,so,oo,co].find(t=>t?.type===e);return t||uo}(e.type),n=e.getValue||(a=e.id,({item:e})=>{const t=a.split(".");let n=e;for(const e of t)n=n.hasOwnProperty(e)?n[e]:void 0;return n});var a;return{id:e.id,label:e.label||e.id,header:e.header||e.label||e.id,description:e.description,placeholder:e.placeholder,getValue:n,setValue:e.setValue||Fs(e.id),elements:e.elements,getElements:e.getElements,hasElements:ks(e),isVisible:e.isVisible,enableHiding:e.enableHiding??!0,readOnly:e.readOnly??!1,type:t.type,render:e.render??t.render,Edit:Vs(e,t.Edit),sort:function(a,i,r){const l=n({item:a}),s=n({item:i});return e.sort?e.sort(l,s,r):t.sort(l,s,r)},enableSorting:e.enableSorting??t.enableSorting,enableGlobalSearch:e.enableGlobalSearch??t.enableGlobalSearch,isValid:mo(e,t),filterBy:Ls(e,t.defaultOperators,t.validOperators),format:fo(e,t),getValueFormatted:e.getValueFormatted??t.getValueFormatted}})}(a),[a]),O=(0,n.useMemo)(()=>F.filter(e=>s.some(t=>o(t)===e)),[F,s,o]),T=Ji(A,e),D=(0,n.useMemo)(()=>(T||[]).some(e=>e.isPrimary||e.isLocked),[T]),[B,R]=(0,n.useState)(D);(0,n.useEffect)(()=>{D&&!B&&R(!0)},[D,B]),(0,n.useEffect)(()=>{if(!e.infiniteScrollEnabled||!E.current)return;const t=(0,g.throttle)(e=>{const t=e.target,n=t.scrollTop,a=t.scrollHeight;n+t.clientHeight>=a-100&&C?.()},100),n=E.current;return n.addEventListener("scroll",t),()=>{n.removeEventListener("scroll",t),t.cancel()}},[C,e.infiniteScrollEnabled]);const z=(0,n.useMemo)(()=>Object.fromEntries(Object.entries(m).filter(([e])=>ho.some(t=>t.type===e))),[m]);return z[e.type]?(0,h.jsx)(Z.Provider,{value:{view:e,onChangeView:t,fields:A,actions:l,data:s,isLoading:d,paginationInfo:u,selection:O,onChangeSelection:function(e){const t="function"==typeof e?e(F):e;L&&N(t),p&&p(t)},openedFilter:M,setOpenedFilter:P,getItemId:o,getItemLevel:c,isItemClickable:w,onClickItem:v,renderItemLink:b,containerWidth:j,containerRef:E,resizeObserverRef:I,defaultLayouts:z,filters:T,isShowingFilter:B,setIsShowingFilter:R,config:y,empty:S,hasInfiniteScrollHandler:!!C},children:(0,h.jsx)("div",{className:"dataviews-wrapper",ref:E,children:x??(0,h.jsx)(bo,{header:_,search:i,searchLabel:r})})}):null};wo.BulkActionToolbar=Ne,wo.Filters=er,wo.FiltersToggled=tr,wo.FiltersToggle=St,wo.Layout=nr,wo.LayoutSwitcher=pr,wo.Pagination=rr,wo.Search=cr,wo.ViewConfig=_r,wo.Footer=or;var _o=wo;const xo=({title:t,children:n,...a})=>(0,e.createElement)(r.Card,{...a},t?(0,e.createElement)(r.CardHeader,null,(0,e.createElement)("strong",null,t)):null,(0,e.createElement)(r.CardBody,null,n)),yo={table:{showMedia:!1}},So=({title:t,data:n,fields:i,view:r,onChangeView:l,isLoading:s,error:o,emptyLabel:c,paginationInfo:d,getItemId:u,perPageSizes:m=[5,10,20]})=>{if(!_o)throw new Error((0,a.__)("Lean Stats requires WordPress Data Views to render this table.","lean-stats"));return(0,e.createElement)(xo,{title:t},(0,e.createElement)(f,{isLoading:s,error:o,isEmpty:!s&&!o&&0===n.length,emptyLabel:c,loadingLabel:(0,a.sprintf)((0,a.__)("Loading: %s","lean-stats"),t)}),!s&&!o&&n.length>0&&(0,e.createElement)(_o,{data:n,fields:i,view:r,onChangeView:l,paginationInfo:d,getItemId:u,defaultLayouts:yo,search:!1,isLoading:s,config:{perPageSizes:m}}))},Co=window.LeanStatsAdmin||null,Eo=()=>{var e;return Boolean(null!==(e=window.LEAN_STATS_DEBUG)&&void 0!==e?e:Co?.settings?.debugEnabled)},jo=[{name:"dashboard",title:(0,a.__)("Dashboard","lean-stats")},{name:"top-pages",title:(0,a.__)("Pages","lean-stats")},{name:"referrers",title:(0,a.__)("Referring sites","lean-stats")},{name:"not-found",title:(0,a.__)("Pages not found (404)","lean-stats")},{name:"search-terms",title:(0,a.__)("Internal searches","lean-stats")},{name:"geolocation",title:(0,a.__)("Geolocation","lean-stats")},{name:"settings",title:(0,a.__)("Settings","lean-stats")}],ko={plugin_label:"",strict_mode:!1,respect_dnt_gpc:!0,url_strip_query:!0,url_query_allowlist:[],utm_allowlist:[],raw_logs_enabled:!1,raw_logs_retention_days:1,excluded_roles:[],excluded_paths:[],debug_enabled:!1,maxmind_api_key:""},Io=["7d","30d","90d"],Vo=["wp-dataviews","wp-data-views"],No=[{label:"window.wp.dataviews.DataViews",get:()=>"undefined"==typeof window?null:window.wp?.dataviews?.DataViews}],Lo=()=>`lean_stats_range_preset:${Co?.currentUserId?String(Co.currentUserId):"default"}`,Fo=e=>Io.includes(e)?e:null,Mo=()=>{const e=(()=>{if("undefined"==typeof window)return null;const e=new URLSearchParams(window.location.search);return Fo(e.get("period")||e.get("range"))})(),[t,a]=(0,n.useState)(()=>e||(()=>{if("undefined"==typeof window||!window.localStorage)return null;try{return Fo(window.localStorage.getItem(Lo()))}catch(e){return null}})()||"30d"),[i,r]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{e&&!i||Fo(t)&&(e=>{if("undefined"!=typeof window&&window.localStorage)try{window.localStorage.setItem(Lo(),e)}catch(e){}})(t)},[t,e,i]),[t,e=>{a(e),r(!0)}]},Po=e=>`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`,Ao=e=>{const t=new Date,n=new Date(t.getFullYear(),t.getMonth(),t.getDate()),a=new Date(n);switch(e){case"7d":a.setDate(a.getDate()-6);break;case"30d":default:a.setDate(a.getDate()-29);break;case"90d":a.setDate(a.getDate()-89)}return{start:Po(a),end:Po(n)}},Oo=(e,t,n)=>{const a=Co?.restUrl?`${Co.restUrl}`:"",i=new URL(`${null!=n?n:Co?.settings?.restInternalNamespace||""}${e}`,a);return t&&Object.entries(t).forEach(([e,t])=>{null!=t&&""!==t&&i.searchParams.set(e,t)}),i.toString()},To=(e,t,i={})=>{const[r,s]=(0,n.useState)(null),[c,d]=(0,n.useState)(!0),[u,m]=(0,n.useState)(null),f=(0,n.useMemo)(()=>JSON.stringify(null!=t?t:{}),[t]),g=(0,n.useMemo)(()=>o({debugEnabled:Eo}),[]),{enabled:p=!0,namespace:v=Co?.settings?.restInternalNamespace}=i;return(0,n.useEffect)(()=>{if(!p||!e)return d(!1),m(null),void s(null);let n=!0;const i=new AbortController,r=l();return(async()=>{if(!Co?.restNonce||!Co?.restUrl)return m((0,a.__)("Missing REST configuration.","lean-stats")),void d(!1);d(!0),m(null),g.debug("Loading admin data",{action:"admin.fetch",traceId:r,path:e,params:t});try{const l=await fetch(Oo(e,t,v),{signal:i.signal,headers:{"X-WP-Nonce":Co.restNonce}});if(!l.ok)throw new Error((0,a.sprintf)((0,a.__)("API error (%s)","lean-stats"),l.status));const o=await l.json();n&&s(o),g.debug("Admin data received",{action:"admin.fetch.success",traceId:r,path:e})}catch(t){n&&"AbortError"!==t.name?(m(t.message||(0,a.__)("Loading error.","lean-stats")),g.error("Admin load error",{action:"admin.fetch.error",traceId:r,path:e,error:t?.message})):"AbortError"===t.name&&g.debug("Admin load cancelled",{action:"admin.fetch.abort",traceId:r,path:e})}finally{n&&d(!1)}})(),()=>{n=!1,i.abort()}},[e,f,p]),{data:r,isLoading:c,error:u}},Do=e=>{const t={...ko,...e||{}},n=Boolean(t.debug_enabled||t.raw_logs_enabled);return{...t,debug_enabled:n,raw_logs_enabled:n}},Bo=({debugEnabled:t})=>{const{data:n,isLoading:i,error:l}=To("/admin/raw-logs",{limit:50},{enabled:t}),s=n?.items||[];return t?(0,e.createElement)("div",{className:"ls-settings-logs"},(0,e.createElement)(f,{isLoading:i,error:l,isEmpty:!i&&!l&&0===s.length,emptyLabel:(0,a.__)("No raw logs available.","lean-stats"),loadingLabel:(0,a.__)("Loading raw logs…","lean-stats"),skeletonRows:4}),!i&&!l&&s.length>0&&(0,e.createElement)("table",{className:"widefat striped ls-settings-logs__table"},(0,e.createElement)("thead",null,(0,e.createElement)("tr",null,(0,e.createElement)("th",null,(0,a.__)("Date","lean-stats")),(0,e.createElement)("th",null,(0,a.__)("Page","lean-stats")),(0,e.createElement)("th",null,(0,a.__)("Referrer","lean-stats")),(0,e.createElement)("th",null,(0,a.__)("Device","lean-stats")))),(0,e.createElement)("tbody",null,s.map((t,n)=>{return(0,e.createElement)("tr",{key:`${t.timestamp_bucket}-${n}`},(0,e.createElement)("td",null,(i=t.timestamp_bucket)?new Date(1e3*i).toLocaleString():""),(0,e.createElement)("td",null,t.page_path),(0,e.createElement)("td",null,t.referrer_domain||(0,a.__)("Direct","lean-stats")),(0,e.createElement)("td",null,t.device_class||"-"));var i})))):(0,e.createElement)(r.Notice,{status:"warning",isDismissible:!1},(0,a.__)("Enable debug mode to display raw logs.","lean-stats"))},Ro=()=>{const{data:t,isLoading:n,error:i}=To("/admin/geolocation"),l=t?.location||null,s=l&&!l.error,o="maxmind-api"===l?.source?(0,a.__)("MaxMind API","lean-stats"):(0,a.__)("GeoLite2 (local)","lean-stats");return(0,e.createElement)(xo,{title:(0,a.__)("Geolocation","lean-stats")},(0,e.createElement)(f,{isLoading:n,error:i,isEmpty:!n&&!i&&!s,emptyLabel:(0,a.__)("No geolocation data available.","lean-stats"),loadingLabel:(0,a.__)("Looking up location…","lean-stats"),skeletonRows:4}),!n&&!i&&l?.error&&(0,e.createElement)(r.Notice,{status:"warning",isDismissible:!1},l.error),!n&&!i&&s&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("p",null,(0,a.__)("Location is derived from the current request IP and is not stored.","lean-stats")),(0,e.createElement)("table",{className:"widefat striped"},(0,e.createElement)("tbody",null,(0,e.createElement)("tr",null,(0,e.createElement)("th",null,(0,a.__)("IP address","lean-stats")),(0,e.createElement)("td",null,l.ip)),(0,e.createElement)("tr",null,(0,e.createElement)("th",null,(0,a.__)("Country","lean-stats")),(0,e.createElement)("td",null,l.country||(0,a.__)("Unavailable","lean-stats"))),(0,e.createElement)("tr",null,(0,e.createElement)("th",null,(0,a.__)("Region","lean-stats")),(0,e.createElement)("td",null,l.region||(0,a.__)("Unavailable","lean-stats"))),(0,e.createElement)("tr",null,(0,e.createElement)("th",null,(0,a.__)("City","lean-stats")),(0,e.createElement)("td",null,l.city||(0,a.__)("Unavailable","lean-stats"))),(0,e.createElement)("tr",null,(0,e.createElement)("th",null,(0,a.__)("Source","lean-stats")),(0,e.createElement)("td",null,o))))))},zo=({value:t,onChange:n})=>(0,e.createElement)(r.Card,{className:"ls-overview__summary-card ls-overview__summary-card--filter"},(0,e.createElement)(r.CardBody,null,(0,e.createElement)(r.SelectControl,{label:(0,a.__)("Period","lean-stats"),value:t,options:[{label:(0,a.__)("7 days","lean-stats"),value:"7d"},{label:(0,a.__)("30 days","lean-stats"),value:"30d"},{label:(0,a.__)("90 days","lean-stats"),value:"90d"}],onChange:n,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}))),Ho=()=>{const{data:t,isLoading:i,error:s}=To("/admin/settings"),[c,d]=(0,n.useState)(ko),[u,m]=(0,n.useState)(""),[g,p]=(0,n.useState)(""),[v,h]=(0,n.useState)(""),[b,w]=(0,n.useState)(!1),[_,x]=(0,n.useState)(null),[y,S]=(0,n.useState)(!1),[C,E]=(0,n.useState)(!1),[j,k]=(0,n.useState)(null),I=(0,n.useMemo)(()=>o({debugEnabled:Eo}),[]),V=Boolean(c.debug_enabled);(0,n.useEffect)(()=>{if(t?.settings){const e=Do(t.settings);d(e),m(e.url_query_allowlist.join(", ")),p(e.utm_allowlist.join(", ")),h(e.excluded_paths.join("\n")),window.LEAN_STATS_DEBUG=Boolean(e.debug_enabled)}},[t]);const N=async()=>{if(!Co?.restNonce||!Co?.restUrl)return void x({status:"error",message:(0,a.__)("Missing REST configuration.","lean-stats")});w(!0),x(null);const e=l();I.info("Saving settings",{action:"settings.save",traceId:e});try{const t=await fetch(Oo("/admin/settings"),{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":Co.restNonce},body:JSON.stringify(c)});if(!t.ok)throw new Error((0,a.sprintf)((0,a.__)("API error (%s)","lean-stats"),t.status));const n=await t.json();if(n?.settings){const e=Do(n.settings);d(e),m(e.url_query_allowlist.join(", ")),p(e.utm_allowlist.join(", ")),h(e.excluded_paths.join("\n")),window.LEAN_STATS_DEBUG=Boolean(e.debug_enabled)}x({status:"success",message:(0,a.__)("Settings saved.","lean-stats")}),I.info("Settings saved",{action:"settings.save.success",traceId:e})}catch(t){x({status:"error",message:t.message||(0,a.__)("Error while saving.","lean-stats")}),I.error("Settings save error",{action:"settings.save.error",traceId:e,error:t?.message})}finally{w(!1)}},L=async()=>{if(!Co?.restNonce||!Co?.restUrl)return void k({status:"error",message:(0,a.__)("Missing REST configuration.","lean-stats")});E(!0),k(null);const e=l();I.info("Purging analytics data",{action:"settings.purge",traceId:e});try{const t=await fetch(Oo("/admin/purge-data"),{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":Co.restNonce}});if(!t.ok)throw new Error((0,a.sprintf)((0,a.__)("API error (%s)","lean-stats"),t.status));await t.json(),k({status:"success",message:(0,a.__)("Analytics data purged.","lean-stats")}),I.info("Analytics data purged",{action:"settings.purge.success",traceId:e})}catch(t){k({status:"error",message:t.message||(0,a.__)("Error while purging.","lean-stats")}),I.error("Purge error",{action:"settings.purge.error",traceId:e,error:t?.message})}finally{E(!1),S(!1)}},F=Co?.roles||[],M=[{name:"general",title:(0,a.__)("General","lean-stats")},...V?[{name:"logs",title:(0,a.__)("Logs","lean-stats")}]:[]];return(0,e.createElement)(xo,{title:(0,a.__)("Settings","lean-stats")},(0,e.createElement)(f,{isLoading:i,error:s,isEmpty:!1,emptyLabel:"",loadingLabel:(0,a.__)("Loading settings…","lean-stats"),skeletonRows:6}),!i&&!s&&(0,e.createElement)(r.TabPanel,{tabs:M},t=>"logs"===t.name?(0,e.createElement)(Bo,{debugEnabled:V}):(0,e.createElement)("div",{className:"ls-settings-form"},_&&(0,e.createElement)(r.Notice,{status:_.status,isDismissible:!1},_.message),j&&(0,e.createElement)(r.Notice,{status:j.status,isDismissible:!1},j.message),(0,e.createElement)(r.Card,{className:"ls-settings-section"},(0,e.createElement)(r.CardBody,null,(0,e.createElement)("h3",{className:"ls-settings-section__title"},(0,a.__)("General","lean-stats")),(0,e.createElement)(r.TextControl,{label:(0,a.__)("Plugin name (menu and dashboard)","lean-stats"),help:(0,a.__)('Leave blank to use "Lean Stats".',"lean-stats"),value:c.plugin_label,onChange:e=>d(t=>({...t,plugin_label:e}))}),(0,e.createElement)(r.ToggleControl,{label:(0,a.__)("Strict mode","lean-stats"),help:(0,a.__)("Ignore tracking for logged-in users.","lean-stats"),checked:c.strict_mode,onChange:e=>d(t=>({...t,strict_mode:e}))}))),(0,e.createElement)(r.Card,{className:"ls-settings-section"},(0,e.createElement)(r.CardBody,null,(0,e.createElement)("h3",{className:"ls-settings-section__title"},(0,a.__)("Geolocation","lean-stats")),(0,e.createElement)(r.TextControl,{label:(0,a.__)("MaxMind API key","lean-stats"),type:"password",help:(0,a.__)("Format: AccountID:LicenseKey. Leave blank to use the local GeoLite2 database.","lean-stats"),value:c.maxmind_api_key,onChange:e=>d(t=>({...t,maxmind_api_key:e}))}))),(0,e.createElement)(r.Card,{className:"ls-settings-section"},(0,e.createElement)(r.CardBody,null,(0,e.createElement)("h3",{className:"ls-settings-section__title"},(0,a.__)("Privacy & consent","lean-stats")),(0,e.createElement)(r.ToggleControl,{label:(0,a.__)("Respect DNT / GPC","lean-stats"),help:(0,a.__)("Ignore tracking if the browser sends DNT or GPC.","lean-stats"),checked:c.respect_dnt_gpc,onChange:e=>d(t=>({...t,respect_dnt_gpc:e}))}),(0,e.createElement)(r.ToggleControl,{label:(0,a.__)("Debug mode","lean-stats"),help:(0,a.__)("Enables detailed console logs and raw log capture.","lean-stats"),checked:c.debug_enabled,onChange:e=>d(t=>({...t,debug_enabled:e,raw_logs_enabled:e}))}),(0,e.createElement)(r.TextControl,{label:(0,a.__)("Retention window (days)","lean-stats"),type:"number",min:1,max:365,value:String(c.raw_logs_retention_days),help:(0,a.__)("Raw logs purge automatically after the configured window.","lean-stats"),onChange:e=>{const t=Number.parseInt(e,10);d(e=>({...e,raw_logs_retention_days:Number.isNaN(t)?e.raw_logs_retention_days:t}))}}))),(0,e.createElement)(r.Card,{className:"ls-settings-section"},(0,e.createElement)(r.CardBody,null,(0,e.createElement)("h3",{className:"ls-settings-section__title"},(0,a.__)("URL cleaning","lean-stats")),(0,e.createElement)(r.ToggleControl,{label:(0,a.__)("Strip query parameters","lean-stats"),help:(0,a.__)("Remove query parameters from tracked URLs.","lean-stats"),checked:c.url_strip_query,onChange:e=>d(t=>({...t,url_strip_query:e}))}),(0,e.createElement)(r.TextControl,{label:(0,a.__)("Query parameter allowlist","lean-stats"),help:(0,a.__)("Comma-separated list (e.g., utm_source, utm_campaign).","lean-stats"),value:u,onChange:e=>{m(e);const t=e.split(",").map(e=>e.trim()).filter(Boolean);d(e=>({...e,url_query_allowlist:t}))}}),(0,e.createElement)(r.TextControl,{label:(0,a.__)("UTM allowlist","lean-stats"),help:(0,a.__)("Comma-separated list of UTM parameters to aggregate (e.g., utm_source, utm_medium).","lean-stats"),value:g,onChange:e=>{p(e);const t=e.split(",").map(e=>e.trim()).filter(Boolean);d(e=>({...e,utm_allowlist:t}))}}))),(0,e.createElement)(r.Card,{className:"ls-settings-section"},(0,e.createElement)(r.CardBody,null,(0,e.createElement)("h3",{className:"ls-settings-section__title"},(0,a.__)("Exclusions","lean-stats")),(0,e.createElement)(r.TextareaControl,{label:(0,a.__)("Excluded paths","lean-stats"),help:(0,a.__)("One per line or comma-separated (e.g., /privacy, /account).","lean-stats"),value:v,onChange:e=>{h(e);const t=e.split(/[\n,]+/).map(e=>e.trim()).filter(Boolean);d(e=>({...e,excluded_paths:t}))}}),(0,e.createElement)("div",null,(0,e.createElement)("p",{className:"ls-settings-roles__title"},(0,a.__)("Role exclusions","lean-stats")),(0,e.createElement)("div",{className:"ls-settings-roles__list"},0===F.length&&(0,e.createElement)("p",null,(0,a.__)("No roles available.","lean-stats")),F.map(t=>(0,e.createElement)(r.CheckboxControl,{key:t.key,label:t.label,checked:c.excluded_roles.includes(t.key),onChange:e=>{d(n=>{const a=new Set(n.excluded_roles);return e?a.add(t.key):a.delete(t.key),{...n,excluded_roles:Array.from(a)}})}})))))),(0,e.createElement)(r.Card,{className:"ls-settings-section"},(0,e.createElement)(r.CardBody,null,(0,e.createElement)("h3",{className:"ls-settings-section__title"},(0,a.__)("Data management","lean-stats")),(0,e.createElement)("p",null,(0,a.__)("Remove all aggregated analytics and raw log entries.","lean-stats")),(0,e.createElement)(r.Button,{variant:"secondary",isDestructive:!0,onClick:()=>S(!0)},(0,a.__)("Purge analytics data","lean-stats")))),(0,e.createElement)(r.Button,{variant:"primary",isBusy:b,onClick:N,"aria-label":(0,a.__)("Save settings","lean-stats")},(0,a.__)("Save","lean-stats")),y&&(0,e.createElement)(r.Modal,{title:(0,a.__)("Confirm data purge","lean-stats"),onRequestClose:()=>S(!1)},(0,e.createElement)("p",null,(0,a.__)("This action permanently removes all stored analytics and raw logs. Settings remain unchanged.","lean-stats")),(0,e.createElement)("div",{className:"ls-settings-modal__actions"},(0,e.createElement)(r.Button,{variant:"secondary",onClick:()=>S(!1)},(0,a.__)("Cancel","lean-stats")),(0,e.createElement)(r.Button,{variant:"primary",isDestructive:!0,isBusy:C,onClick:L},(0,a.__)("Purge now","lean-stats")))))))},$o=({range:t})=>{var n;const{data:i,isLoading:l,error:s}=To("/overview",t,{namespace:Co?.settings?.restNamespace}),o=i?.overview||null,c=!l&&!s&&!o;if(l||s||c)return(0,e.createElement)(r.Card,{className:"ls-overview__summary-card ls-overview__summary-card--status"},(0,e.createElement)(r.CardBody,null,(0,e.createElement)(f,{isLoading:l,error:s,isEmpty:c,emptyLabel:(0,a.__)("No overview data available.","lean-stats"),loadingLabel:(0,a.__)("Loading overview…","lean-stats"),skeletonRows:3})));const d=(0,a.__)("Number of anonymous sessions over the selected period. The same person can generate multiple visits.","lean-stats"),u=(0,a.__)("Anonymous sessions aggregated over the selected period.","lean-stats"),m="undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(max-width: 600px)").matches?u:d,g=[{label:(0,a.__)("Visits","lean-stats"),value:null!==(n=o.visits)&&void 0!==n?n:0,icon:"visibility",tooltip:m},{label:(0,a.__)("Page views","lean-stats"),value:o.pageViews,icon:"chart-bar"},{label:(0,a.__)("Referring sites","lean-stats"),value:o.uniqueReferrers,icon:"admin-links"},{label:(0,a.__)("Pages not found (404)","lean-stats"),value:o.notFoundHits,icon:"warning"},{label:(0,a.__)("Internal searches","lean-stats"),value:o.searchHits,icon:"search"}];return(0,e.createElement)(e.Fragment,null,g.map(t=>(0,e.createElement)(r.Card,{key:t.label,className:"ls-overview__summary-card"},(0,e.createElement)(r.CardBody,{className:"ls-kpi-card__body"},(0,e.createElement)("span",{className:`dashicons dashicons-${t.icon} ls-kpi-card__icon`,"aria-hidden":"true"}),(0,e.createElement)("div",{className:"ls-kpi-card__content"},(0,e.createElement)("p",{className:"ls-kpi-card__label"},(0,e.createElement)("span",{className:"ls-kpi-card__label-text"},t.label),t.tooltip?(0,e.createElement)(r.Tooltip,{text:t.tooltip},(0,e.createElement)(r.Button,{className:"ls-kpi-card__tooltip-button",variant:"tertiary",isSmall:!0,"aria-label":t.tooltip},(0,e.createElement)("span",{className:"dashicons dashicons-info-outline","aria-hidden":"true"}))):null),(0,e.createElement)("strong",{className:"ls-kpi-card__value"},t.value))))))},Wo=({range:t})=>{const{data:i,isLoading:r,error:l}=To("/admin/timeseries/day",t),s=i?.items||[],o=(0,n.useMemo)(()=>(e=>{const t=e.reduce((e,t)=>Math.max(e,t.hits),0),n=Math.max(576,1),a=Math.max(176,1),i=Math.max(e.length-1,1),r=e.map((e,r)=>({x:32+n*r/i,y:208-(t?e.hits/t*a:0),label:e.bucket,hits:e.hits})),l=r.map((e,t)=>`${0===t?"M":"L"} ${e.x} ${e.y}`).join(" ");return{points:r,path:l,maxHits:t,width:640,height:240,padding:32}})(s),[s]);return(0,e.createElement)(xo,{title:(0,a.__)("Daily page views","lean-stats")},(0,e.createElement)(f,{isLoading:r,error:l,isEmpty:!r&&!l&&0===s.length,emptyLabel:(0,a.__)("No data available for this period.","lean-stats"),loadingLabel:(0,a.__)("Loading chart…","lean-stats")}),!r&&!l&&s.length>0&&(0,e.createElement)("div",{className:"ls-timeseries"},(0,e.createElement)(u,{height:240,ariaLabel:(0,a.__)("Daily page views line chart","lean-stats")},(0,e.createElement)("svg",{viewBox:`0 0 ${o.width} ${o.height}`,className:"ls-timeseries__svg",role:"img","aria-label":(0,a.__)("Daily page views line chart","lean-stats")},(0,e.createElement)("rect",{x:"0",y:"0",width:o.width,height:o.height,className:"ls-timeseries__bg"}),(0,e.createElement)("line",{x1:o.padding,y1:o.padding,x2:o.padding,y2:o.height-o.padding,className:"ls-timeseries__axis"}),(0,e.createElement)("line",{x1:o.padding,y1:o.height-o.padding,x2:o.width-o.padding,y2:o.height-o.padding,className:"ls-timeseries__axis"}),(0,e.createElement)("path",{d:o.path,className:"ls-timeseries__line"}),o.points.map(t=>(0,e.createElement)("circle",{key:`${t.label}-${t.hits}`,cx:t.x,cy:t.y,r:"3",className:"ls-timeseries__point"})))),(0,e.createElement)("table",{className:"widefat striped ls-timeseries__table","aria-label":(0,a.__)("Daily series table","lean-stats")},(0,e.createElement)("thead",null,(0,e.createElement)("tr",null,(0,e.createElement)("th",null,(0,a.__)("Date","lean-stats")),(0,e.createElement)("th",null,(0,a.__)("Page views","lean-stats")))),(0,e.createElement)("tbody",null,s.map(t=>(0,e.createElement)("tr",{key:t.bucket},(0,e.createElement)("td",null,t.bucket),(0,e.createElement)("td",null,t.hits)))))))},qo=({title:t,labelHeader:i,range:l,endpoint:s,emptyLabel:o,labelFallback:c,metricLabel:d=(0,a.__)("Page views","lean-stats"),metricKey:u="hits",metricValueKey:m="hits"})=>{const[g,p]=(0,n.useState)(1),[v,h]=(0,n.useState)(10),[b,w]=(0,n.useState)(u),[_,x]=(0,n.useState)("desc");(0,n.useEffect)(()=>{p(1)},[l.start,l.end]),(0,n.useEffect)(()=>{w(u),x("desc")},[u]);const{data:y,isLoading:S,error:C}=To(s,{...l,page:g,per_page:v,orderby:b,order:_},{namespace:Co?.settings?.restNamespace}),E=y?.items||[],j=y?.pagination||{},k=j.totalPages||1,I=j.totalItems||E.length;(0,n.useEffect)(()=>{!S&&!C&&k&&g>k&&p(k)},[k,g,S,C]);const V=g>1,N=g<k,L="asc"===_?(0,a.__)("Ascending","lean-stats"):(0,a.__)("Descending","lean-stats"),F=(0,a.sprintf)((0,a.__)("%s label","lean-stats"),i),M=(0,a.sprintf)((0,a.__)("Toggle sort order: %s","lean-stats"),L),P=(0,a.sprintf)((0,a.__)("Table: %s","lean-stats"),t),A=E.map((e,t)=>{var n;return{key:`${e.label||c}-${t}`,label:e.label||c,value:null!==(n=e?.[m])&&void 0!==n?n:0}});return(0,e.createElement)(xo,{title:t},(0,e.createElement)("div",{className:"ls-table-controls"},(0,e.createElement)(r.SelectControl,{label:(0,a.__)("Sort by","lean-stats"),value:b,options:[{label:d,value:u},{label:F,value:"label"}],onChange:e=>{w(e),p(1)},__nextHasNoMarginBottom:!0}),(0,e.createElement)(r.Button,{variant:"secondary",icon:"asc"===_?"arrow-up-alt2":"arrow-down-alt2",onClick:()=>{x("asc"===_?"desc":"asc"),p(1)},"aria-label":M},L),(0,e.createElement)(r.SelectControl,{label:(0,a.__)("Rows","lean-stats"),value:String(v),options:[{label:"5",value:"5"},{label:"10",value:"10"},{label:"20",value:"20"}],onChange:e=>{h(Number(e)),p(1)},__nextHasNoMarginBottom:!0})),(0,e.createElement)(f,{isLoading:S,error:C,isEmpty:!S&&!C&&0===A.length,emptyLabel:o,loadingLabel:(0,a.sprintf)((0,a.__)("Loading: %s","lean-stats"),t)}),!S&&!C&&A.length>0&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("table",{className:"ls-report-table","aria-label":P},(0,e.createElement)("thead",null,(0,e.createElement)("tr",null,(0,e.createElement)("th",{scope:"col"},i),(0,e.createElement)("th",{scope:"col"},d))),(0,e.createElement)("tbody",null,A.map(t=>(0,e.createElement)("tr",{key:t.key},(0,e.createElement)("td",null,t.label),(0,e.createElement)("td",null,t.value))))),(0,e.createElement)(r.Flex,{className:"ls-table-pagination",justify:"space-between",align:"center"},(0,e.createElement)(r.FlexItem,null,(0,e.createElement)(r.ButtonGroup,null,(0,e.createElement)(r.Button,{variant:"secondary",onClick:()=>p(e=>Math.max(e-1,1)),disabled:!V,"aria-label":(0,a.__)("Previous page","lean-stats")},(0,a.__)("Previous","lean-stats")),(0,e.createElement)(r.Button,{variant:"secondary",onClick:()=>p(e=>Math.min(e+1,k)),disabled:!N,"aria-label":(0,a.__)("Next page","lean-stats")},(0,a.__)("Next","lean-stats")))),(0,e.createElement)(r.FlexItem,{className:"ls-table-pagination__meta"},(0,a.sprintf)((0,a.__)("Page %1$d of %2$d","lean-stats"),g,k)),(0,e.createElement)(r.FlexItem,{className:"ls-table-pagination__meta"},(0,a.sprintf)((0,a.__)("%s items","lean-stats"),I)))))},Go=({title:t,labelHeader:i,range:r,endpoint:l,emptyLabel:s,labelFallback:o,metricLabel:c=(0,a.__)("Page views","lean-stats"),metricKey:d="hits",metricValueKey:u="hits"})=>{var m,f,g,p;const[v,h]=(0,n.useState)(()=>(({metricKey:e,perPage:t=10})=>({type:"table",search:"",page:1,perPage:t,sort:{field:e,direction:"desc"},fields:["label",e],layout:{}}))({metricKey:d}));(0,n.useEffect)(()=>{h(e=>({...e,page:1}))},[r.start,r.end]),(0,n.useEffect)(()=>{h(e=>({...e,sort:{field:d,direction:"desc"},fields:["label",d]}))},[d]);const b=null!==(m=v.page)&&void 0!==m?m:1,w=null!==(f=v.perPage)&&void 0!==f?f:10,_=null!==(g=v.sort?.field)&&void 0!==g?g:d,x=null!==(p=v.sort?.direction)&&void 0!==p?p:"desc",{data:y,isLoading:S,error:C}=To(l,{...r,page:b,per_page:w,orderby:_,order:x},{namespace:Co?.settings?.restNamespace}),E=y?.items||[],j=y?.pagination||{},k=j.totalPages||1,I=j.totalItems||E.length;(0,n.useEffect)(()=>{!S&&!C&&k&&b>k&&h(e=>({...e,page:k}))},[k,b,S,C]);const V=(0,n.useMemo)(()=>(({labelHeader:e,metricLabel:t,metricKey:n})=>[{id:"label",type:"text",label:e,enableHiding:!1},{id:n,type:"integer",label:t,enableHiding:!1}])({labelHeader:i,metricLabel:c,metricKey:d}),[i,c,d]),N=(0,n.useMemo)(()=>(({items:e,labelFallback:t,metricKey:n,metricValueKey:a})=>e.map((e,i)=>{var r;return{id:`${e.label||t}-${i}`,label:e.label||t,[n]:null!==(r=e?.[a])&&void 0!==r?r:0}}))({items:E,labelFallback:o,metricKey:d,metricValueKey:u}),[E,o,d,u]),L=(0,n.useMemo)(()=>({totalItems:I,totalPages:k}),[I,k]);return(0,e.createElement)(So,{title:t,data:N,fields:V,view:v,onChangeView:h,isLoading:S,error:C,emptyLabel:s,paginationInfo:L,getItemId:e=>e.id})},Ko=({range:t})=>{const[i,l]=(0,n.useState)(1),[s,o]=(0,n.useState)(10),[c,d]=(0,n.useState)("hits"),[u,m]=(0,n.useState)("desc");(0,n.useEffect)(()=>{l(1)},[t.start,t.end]);const{data:g,isLoading:p,error:v}=To("/referrer-sources",{...t,page:i,per_page:s,orderby:c,order:u},{namespace:Co?.settings?.restNamespace}),h=g?.items||[],b=g?.pagination||{},w=b.totalPages||1,_=b.totalItems||h.length;(0,n.useEffect)(()=>{!p&&!v&&w&&i>w&&l(w)},[w,i,p,v]);const x=i>1,y=i<w,S="asc"===u?(0,a.__)("Ascending","lean-stats"):(0,a.__)("Descending","lean-stats"),C=(0,a.sprintf)((0,a.__)("Toggle sort order: %s","lean-stats"),S),E=(0,a.__)("Table: Referrer sources","lean-stats"),j=h.map((e,t)=>{const n=e.referrer_domain||(0,a.__)("Direct","lean-stats"),i=e.referrer_domain?(0,a.__)("Referrer","lean-stats"):(0,a.__)("Direct","lean-stats");return{key:`${n}-${e.source_category||i}-${t}`,referrer:n,category:e.source_category||i,hits:e.hits}});return(0,e.createElement)(xo,{title:(0,a.__)("Referrer sources","lean-stats")},(0,e.createElement)("div",{className:"ls-table-controls"},(0,e.createElement)(r.SelectControl,{label:(0,a.__)("Sort by","lean-stats"),value:c,options:[{label:(0,a.__)("Page views","lean-stats"),value:"hits"},{label:(0,a.__)("Referrer","lean-stats"),value:"referrer"},{label:(0,a.__)("Source category","lean-stats"),value:"category"}],onChange:e=>{d(e),l(1)},__nextHasNoMarginBottom:!0}),(0,e.createElement)(r.Button,{variant:"secondary",icon:"asc"===u?"arrow-up-alt2":"arrow-down-alt2",onClick:()=>{m("asc"===u?"desc":"asc"),l(1)},"aria-label":C},S),(0,e.createElement)(r.SelectControl,{label:(0,a.__)("Rows","lean-stats"),value:String(s),options:[{label:"5",value:"5"},{label:"10",value:"10"},{label:"20",value:"20"}],onChange:e=>{o(Number(e)),l(1)},__nextHasNoMarginBottom:!0})),(0,e.createElement)(f,{isLoading:p,error:v,isEmpty:!p&&!v&&0===j.length,emptyLabel:(0,a.__)("No referrer data available.","lean-stats"),loadingLabel:(0,a.__)("Loading referrer sources…","lean-stats")}),!p&&!v&&j.length>0&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("table",{className:"ls-report-table","aria-label":E},(0,e.createElement)("thead",null,(0,e.createElement)("tr",null,(0,e.createElement)("th",{scope:"col"},(0,a.__)("Referrer","lean-stats")),(0,e.createElement)("th",{scope:"col"},(0,a.__)("Source category","lean-stats")),(0,e.createElement)("th",{scope:"col"},(0,a.__)("Page views","lean-stats")))),(0,e.createElement)("tbody",null,j.map(t=>(0,e.createElement)("tr",{key:t.key},(0,e.createElement)("td",null,t.referrer),(0,e.createElement)("td",null,t.category),(0,e.createElement)("td",null,t.hits))))),(0,e.createElement)(r.Flex,{className:"ls-table-pagination",justify:"space-between",align:"center"},(0,e.createElement)(r.FlexItem,null,(0,e.createElement)(r.ButtonGroup,null,(0,e.createElement)(r.Button,{variant:"secondary",onClick:()=>l(e=>Math.max(e-1,1)),disabled:!x,"aria-label":(0,a.__)("Previous page","lean-stats")},(0,a.__)("Previous","lean-stats")),(0,e.createElement)(r.Button,{variant:"secondary",onClick:()=>l(e=>Math.min(e+1,w)),disabled:!y,"aria-label":(0,a.__)("Next page","lean-stats")},(0,a.__)("Next","lean-stats")))),(0,e.createElement)(r.FlexItem,{className:"ls-table-pagination__meta"},(0,a.sprintf)((0,a.__)("Page %1$d of %2$d","lean-stats"),i,w)),(0,e.createElement)(r.FlexItem,{className:"ls-table-pagination__meta"},(0,a.sprintf)((0,a.__)("%s items","lean-stats"),_)))))},Uo=({title:t,endpoint:a,labelHeader:i,emptyLabel:r,labelFallback:l,metricLabel:s,metricKey:o,metricValueKey:c})=>{const[d,u]=Mo(),m=(0,n.useMemo)(()=>Ao(d),[d]);return(0,e.createElement)("div",{className:"ls-report-panel"},(0,e.createElement)("div",{className:"ls-report-panel__header"},(0,e.createElement)(zo,{value:d,onChange:u})),(0,e.createElement)(qo,{title:t,labelHeader:i,range:m,endpoint:a,emptyLabel:r,labelFallback:l,metricLabel:s,metricKey:o,metricValueKey:c}))},Yo=({title:t,endpoint:a,labelHeader:i,emptyLabel:r,labelFallback:l,metricLabel:s,metricKey:o,metricValueKey:c})=>{const[d,u]=Mo(),m=(0,n.useMemo)(()=>Ao(d),[d]);return(0,e.createElement)("div",{className:"ls-report-panel"},(0,e.createElement)("div",{className:"ls-report-panel__header"},(0,e.createElement)(zo,{value:d,onChange:u})),(0,e.createElement)(Go,{title:t,labelHeader:i,range:m,endpoint:a,emptyLabel:r,labelFallback:l,metricLabel:s,metricKey:o,metricValueKey:c}))},Zo=()=>{const t=[{name:"top-pages",title:(0,a.__)("Pages","lean-stats")},{name:"entry-pages",title:(0,a.__)("Entry pages","lean-stats")},{name:"exit-pages",title:(0,a.__)("Exit pages","lean-stats")}];return(0,e.createElement)(r.TabPanel,{className:"ls-pages-tabs",tabs:t},t=>"entry-pages"===t.name?(0,e.createElement)(ec,null):"exit-pages"===t.name?(0,e.createElement)(tc,null):(0,e.createElement)(Xo,null))},Xo=()=>(0,e.createElement)(Yo,{title:(0,a.__)("Top pages","lean-stats"),labelHeader:(0,a.__)("Page","lean-stats"),endpoint:"/top-pages",emptyLabel:(0,a.__)("No popular pages available.","lean-stats"),labelFallback:"/"}),Qo=()=>(0,e.createElement)(Uo,{title:(0,a.__)("Top 404s","lean-stats"),labelHeader:(0,a.__)("Missing page","lean-stats"),endpoint:"/404s",emptyLabel:(0,a.__)("No missing pages available.","lean-stats"),labelFallback:"/"}),Jo=()=>(0,e.createElement)(Uo,{title:(0,a.__)("Search terms","lean-stats"),labelHeader:(0,a.__)("Search term","lean-stats"),endpoint:"/search-terms",emptyLabel:(0,a.__)("No search terms available.","lean-stats"),labelFallback:(0,a.__)("Unknown","lean-stats")}),ec=()=>(0,e.createElement)(Uo,{title:(0,a.__)("Entry pages (approx.)","lean-stats"),labelHeader:(0,a.__)("Entry page","lean-stats"),endpoint:"/entry-pages",emptyLabel:(0,a.__)("No entry pages available.","lean-stats"),labelFallback:"/",metricLabel:(0,a.__)("Entries (approx.)","lean-stats"),metricKey:"entries",metricValueKey:"entries"}),tc=()=>(0,e.createElement)(Uo,{title:(0,a.__)("Exit pages (approx.)","lean-stats"),labelHeader:(0,a.__)("Exit page","lean-stats"),endpoint:"/exit-pages",emptyLabel:(0,a.__)("No exit pages available.","lean-stats"),labelFallback:"/",metricLabel:(0,a.__)("Exits (approx.)","lean-stats"),metricKey:"exits",metricValueKey:"exits"}),nc=()=>{const[t,a]=Mo(),i=(0,n.useMemo)(()=>Ao(t),[t]);return(0,e.createElement)("div",{className:"ls-report-panel"},(0,e.createElement)("div",{className:"ls-report-panel__header"},(0,e.createElement)(zo,{value:t,onChange:a})),(0,e.createElement)(Ko,{range:i}))},ac=({range:t})=>{const{data:n,isLoading:i,error:r}=To("/admin/device-split",t),l=(n?.items||[]).map(e=>({...e,label:e.label?e.label.charAt(0).toUpperCase()+e.label.slice(1):(0,a.__)("Unknown","lean-stats")})),s=l.reduce((e,t)=>Math.max(e,t.hits),0);return(0,e.createElement)(xo,{title:(0,a.__)("Device page views","lean-stats")},(0,e.createElement)(f,{isLoading:i,error:r,isEmpty:!i&&!r&&0===l.length,emptyLabel:(0,a.__)("No device data available.","lean-stats"),loadingLabel:(0,a.__)("Loading device breakdown…","lean-stats")}),!i&&!r&&l.length>0&&(0,e.createElement)("div",{className:"ls-device-breakdown"},l.map(t=>{const n=s?Math.round(t.hits/s*100):0;return(0,e.createElement)("div",{key:t.label,className:"ls-device-breakdown__row"},(0,e.createElement)("div",{className:"ls-device-breakdown__label"},t.label),(0,e.createElement)("div",{className:"ls-device-breakdown__bar","aria-hidden":"true"},(0,e.createElement)("div",{className:"ls-device-breakdown__bar-fill",style:{width:`${n}%`}})),(0,e.createElement)("div",{className:"ls-device-breakdown__value"},(0,a.sprintf)((0,a.__)("%s views","lean-stats"),t.hits)))})))},ic=()=>{const[t,i]=Mo(),r=(0,n.useMemo)(()=>Ao(t),[t]);return(0,e.createElement)("div",{className:"ls-overview"},(0,e.createElement)("div",{className:"ls-overview__summary"},(0,e.createElement)(zo,{value:t,onChange:i}),(0,e.createElement)($o,{range:r})),(0,e.createElement)(Wo,{range:r}),(0,e.createElement)("div",{className:"ls-overview__grid"},(0,e.createElement)(Go,{title:(0,a.__)("Top pages","lean-stats"),labelHeader:(0,a.__)("Page","lean-stats"),range:r,endpoint:"/top-pages",emptyLabel:(0,a.__)("No popular pages available.","lean-stats"),labelFallback:"/"}),(0,e.createElement)(qo,{title:(0,a.__)("Top referrers","lean-stats"),labelHeader:(0,a.__)("Referrer","lean-stats"),range:r,endpoint:"/referrers",emptyLabel:(0,a.__)("No referrers available.","lean-stats"),labelFallback:(0,a.__)("Direct","lean-stats")}),(0,e.createElement)(ac,{range:r})))},rc=()=>{var t;if(!Co)return(0,e.createElement)(r.Notice,{status:"error",isDismissible:!1},(0,a.__)("Missing admin configuration.","lean-stats"));const i=(e=>{if(!Array.isArray(e))return jo;const t=e.map(e=>({name:e?.name||"",title:e?.title||e?.name||""})).filter(e=>e.name);return t.length>0?t:jo})(Co?.panels),c=Co?.currentPanel||"dashboard",d=(e=>{const t={dashboard:ic,"top-pages":Zo,referrers:nc,"not-found":Qo,"search-terms":Jo,geolocation:Ro,settings:Ho};return t[e]?t[e]:(window.LeanStatsAdminPanels||{})[e]||null})(c),u=((e,t)=>{const n=t.find(t=>t.name===e);return n?.title||(0,a.__)("Lean Stats","lean-stats")})(c,i),m=Co?.settings?.pluginLabel||(0,a.__)("Lean Stats","lean-stats"),f=Boolean(null!==(t=window.LEAN_STATS_DEBUG)&&void 0!==t?t:Co?.settings?.debugEnabled),g=(0,n.useMemo)(()=>o({debugEnabled:f}),[f]);return(0,n.useEffect)(()=>{(e=>{window&&window.addEventListener&&(window.addEventListener("error",t=>{e.error("Global error captured",{action:"window.error",message:t.message,filename:t.filename,lineno:t.lineno,colno:t.colno,error:t.error?t.error.toString():void 0})}),window.addEventListener("unhandledrejection",t=>{e.error("Unhandled promise rejection",{action:"window.unhandledrejection",reason:t.reason?t.reason.toString():void 0})}))})(g),g.info("Loading admin interface",{action:"admin.init",traceId:l(),context:s()})},[g]),(0,e.createElement)("div",{className:"ls-admin-app"},(0,e.createElement)("h1",null,m),d?(0,e.createElement)(d,{panel:{name:c,title:u}}):(0,e.createElement)(r.Notice,{status:"warning",isDismissible:!1},(0,a.__)("No panel available for this screen.","lean-stats")))},lc=document.getElementById("lean-stats-admin");if(lc){const t="undefined"==typeof window?null:null!==(sc=window.LEAN_STATS_FATAL)&&void 0!==sc?sc:null;(0,n.render)((0,e.createElement)(d,{fatal:t,checkedHandles:Vo,checkedGlobals:No.map(e=>e.label)},(0,e.createElement)(rc,null)),lc)}var sc})()})();